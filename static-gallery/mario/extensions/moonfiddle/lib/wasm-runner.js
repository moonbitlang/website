"use strict";var module=module||{};module.exports=(()=>{var g={kind:"start",message:""},l={kind:"over",message:""},f=s=>({kind:"warn",message:s}),b=s=>({kind:"error",message:s}),p=s=>({kind:"internal",message:s}),u=[["spectest","print_char"],["js_string","new_js_string"],["js_string","log"]];self.onmessage=async s=>{try{self.postMessage(g);let t=s.data.wasm,n=(await import(s.data.runtimeURL)).default;for(let[e,r]of u)e in n&&r in n[e]&&self.postMessage(f(`${e}.${r} is a reserved runtime, override it may break moonbit`));let a,m={spectest:{print_char:e=>self.postMessage(e)},js_string:{new_js_string:(e,r)=>{let o=new Uint8Array(a.buffer,e,r);return new TextDecoder("utf8").decode(o)},log:e=>{let r=new TextEncoder().encode(e);for(let o of r)self.postMessage(o)},...n?.js_string},...(delete n?.js_string,n)},{instance:i}=await WebAssembly.instantiate(t,m);a=i.exports.memory;let c=i.exports._start;c(),self.postMessage(l)}catch(t){t instanceof WebAssembly.CompileError?self.postMessage(p(`${t}`)):self.postMessage(b(`${t}`))}};})();
