"use strict";var module=module||{};module.exports=(()=>{var ce=Object.create;var S=Object.defineProperty;var xe=Object.getOwnPropertyDescriptor;var be=Object.getOwnPropertyNames;var he=Object.getPrototypeOf,Be=Object.prototype.hasOwnProperty;var ye=(t,e,o)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var J=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,o)=>(typeof require<"u"?require:e)[o]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Ke=(t,e)=>{for(var o in e)S(t,o,{get:e[o],enumerable:!0})},U=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of be(e))!Be.call(t,a)&&a!==o&&S(t,a,{get:()=>e[a],enumerable:!(r=xe(e,a))||r.enumerable});return t};var E=(t,e,o)=>(o=t!=null?ce(he(t)):{},U(e||!t||!t.__esModule?S(o,"default",{value:t,enumerable:!0}):o,t)),We=t=>U(S({},"__esModule",{value:!0}),t);var C=(t,e,o)=>(ye(t,typeof e!="symbol"?e+"":e,o),o);var ct={};Ke(ct,{activate:()=>ut});var s=E(J("vscode"));var g=J("vscode");var h=E(J("vscode"));function O(t){t.createDirectory(h.default.Uri.parse("memfs:/app/main")),t.writeFile(h.default.Uri.parse("memfs:/app/index.html"),Uint8Array.from(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT45eDkgR3JpZDwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBoZWlnaHQ6IDEwMHZoOwogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7CiAgICAgICAgfQogICAgICAgIHRhYmxlIHsKICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgYmxhY2s7CiAgICAgICAgfQogICAgICAgIHRkIHsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgfQogICAgICAgIGlucHV0IHsKICAgICAgICAgICAgd2lkdGg6IDMwcHg7CiAgICAgICAgICAgIGhlaWdodDogMzBweDsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPHRhYmxlIGlkPSJncmlkIj48L3RhYmxlPgogICAgPGJ1dHRvbiBvbmNsaWNrPSJnZXRWYWx1ZXMoKSI+U29sdmU8L2J1dHRvbj4KICAgIDxzY3JpcHQ+CiAgICAgICAgLy8g5Yib5bu6OXg555qE572R5qC8CiAgICAgICAgdmFyIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWQnKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDk7IGkrKykgewogICAgICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA5OyBqKyspIHsKICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnbnVtYmVyJyk7CiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ21pbicsICcxJyk7CiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ21heCcsICc5Jyk7CiAgICAgICAgICAgICAgICBjZWxsLmFwcGVuZENoaWxkKGlucHV0KTsKICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgaW1wb3J0T2JqZWN0ID0gewogICAgICAgICAgICBzcGVjdGVzdDogewogICAgICAgICAgICAgICAgcHJpbnRfY2hhcjogY29uc29sZS5sb2cKICAgICAgICAgICAgfSwKICAgICAgICB9CgogICAgICAgIC8vIOS7jk1vb25iaXQgaW1wb3J0IOS4gOS6m+WHveaVsAogICAgICAgIGxldCBhc3NpZ24gPSBudWxsOwogICAgICAgIGxldCBpbml0VmFsdWVzID0gbnVsbDsKICAgICAgICBsZXQgcmVhZFZhbHVlcyA9IG51bGw7CiAgICAgICAgbGV0IHNvbHZlID0gbnVsbDsKCiAgICAgICAgLy8g5a+85YWl5omA6ZyA5Ye95pWwCiAgICAgICAgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcoCiAgICAgICAgICAgIGZldGNoKCJ0YXJnZXQvd2FzbS9yZWxlYXNlL2J1aWxkL21haW4vbWFpbi53YXNtIiksCiAgICAgICAgICAgIGltcG9ydE9iamVjdAogICAgICAgICAgICApLnRoZW4oKG9iaikgPT4gewogICAgICAgICAgICAgICAgb2JqLmluc3RhbmNlLmV4cG9ydHMuX3N0YXJ0KCk7CiAgICAgICAgICAgICAgICBhc3NpZ24gPSBvYmouaW5zdGFuY2UuZXhwb3J0c1sic3Vkb2t1L21haW46OmlqX2Fzc2lnbiJdCiAgICAgICAgICAgICAgICBpbml0VmFsdWVzID0gb2JqLmluc3RhbmNlLmV4cG9ydHNbInN1ZG9rdS9tYWluOjppbml0VmFsdWVzIl0KICAgICAgICAgICAgICAgIHJlYWRWYWx1ZXMgPSBvYmouaW5zdGFuY2UuZXhwb3J0c1sic3Vkb2t1L21haW46OmlqX3JlYWQiXQogICAgICAgICAgICAgICAgc29sdmUgPSBvYmouaW5zdGFuY2UuZXhwb3J0c1sic3Vkb2t1L21haW46OnNvbHZlVmFsdWVzIl0KICAgICAgICB9KTsKCiAgICAgICAgLy8g6I635Y+W572R5qC855qE5YC8CiAgICAgICAgZnVuY3Rpb24gZ2V0VmFsdWVzKCkgewogICAgICAgICAgICBsZXQgdmFsdWVzID0gaW5pdFZhbHVlcygpCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgOTsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDk7IGorKykgewogICAgICAgICAgICAgICAgICAgIC8vIOivu+WPluW5tui9rGludAogICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0YWJsZS5yb3dzW2ldLmNlbGxzW2pdLmZpcnN0Q2hpbGQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCkgewogICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24odmFsdWVzLCBpLCBqLCBwYXJzZUludCh2YWwpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB2YWx1ZXMgPSBzb2x2ZSh2YWx1ZXMpCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgOTsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDk7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRhYmxlLnJvd3NbaV0uY2VsbHNbal0uZmlyc3RDaGlsZC52YWx1ZSA9IHJlYWRWYWx1ZXModmFsdWVzLCBpLCBqKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo="),e=>e.charCodeAt(0)),{create:!0,overwrite:!0}),t.writeFile(h.default.Uri.parse("memfs:/app/main/main.mbt"),Uint8Array.from(atob("cHViIGZuIGluaXRWYWx1ZXMoKSAtPiBTcXVhcmVNYXBbTGlzdFtDaGFyXV0gewogIGxldCBkaWdpdHMgPSBjb2xzLnRvX2xpc3QoKQogIFNxdWFyZU1hcDo6bmV3KGRpZ2l0cykKfQoKcHViIGZuIHNvbHZlVmFsdWVzKHZhbHVlcyA6IFNxdWFyZU1hcFtMaXN0W0NoYXJdXSkgLT4gU3F1YXJlTWFwW0xpc3RbQ2hhcl1dIHsKICBtYXRjaCBzZWFyY2godmFsdWVzKSB7CiAgICBOb25lID0+IGFib3J0KCJzb2x2ZSgpIDogY2FudCBzb2x2ZSIpCiAgICBTb21lKHYpID0+IHYKICB9Cn0KCnB1YiBmbiBpal9hc3NpZ24odmFsdWVzOiBTcXVhcmVNYXBbTGlzdFtDaGFyXV0sIGkgOiBJbnQsIGogOiBJbnQsIHZhbCA6IEludCkgLT4gQm9vbCB7CiAgbGV0IGtleSA9IHJvd3NbaV0udG9fc3RyaW5nKCkgKyBjb2xzW2pdLnRvX3N0cmluZygpCiAgbGV0IHZhbCA9IHZhbC50b19zdHJpbmcoKVswXQogIGFzc2lnbih2YWx1ZXMsIGtleSwgdmFsKQp9CgoKcHViIGZuIGlqX3JlYWQodmFsdWVzOiBTcXVhcmVNYXBbTGlzdFtDaGFyXV0sIGkgOiBJbnQsIGogOiBJbnQpIC0+IEludCB7CiAgbGV0IGtleSA9IHJvd3NbaV0udG9fc3RyaW5nKCkgKyBjb2xzW2pdLnRvX3N0cmluZygpCiAgbGV0IENvbnMoZGlnaXQsIE5pbCkgPSB2YWx1ZXNba2V5XQogIGRpZ2l0LnRvX2ludCgpIC0gNDgKfQoKZm4gaW5pdCB7CiAgLy8gbGV0IGdyaWQxID0gIi4uNS40Li4uMiAuLi41LjcxOC4gNC43MS4uLjMuIDMuLjguLjYuNyAuNzIuNTkuLi4gOC40Li4uMy4uIDI5Li4uLi4xLiAuLi40Li4uNTYgNTQuLjY4Li4uIgogIC8vIHByaW50R3JpZChzb2x2ZShncmlkMSkpCn0K"),e=>e.charCodeAt(0)),{create:!0,overwrite:!0}),t.writeFile(h.default.Uri.parse("memfs:/app/main/moon.pkg.json"),Uint8Array.from(atob("ewogICJpc19tYWluIjogdHJ1ZSwKICAiaW1wb3J0IjogewogIH0KfQ=="),e=>e.charCodeAt(0)),{create:!0,overwrite:!0}),t.writeFile(h.default.Uri.parse("memfs:/app/main/sudoku.mbt"),Uint8Array.from(atob("Ly8vIFNxdWFyZU1hcApzdHJ1Y3QgU3F1YXJlTWFwW1RdIHsKICBjb250ZW50cyA6IEFycmF5W1RdCn0KLy8gQTEgPT4gMCwgQTIgPT4gMQpmbiBzcXVhcmVfdG9faW50KHMgOiBTdHJpbmcpIC0+IEludCB7CiAgaWYgc1swXS5pbignQScsICdJJykgJiYgc1sxXS5pbignMScsICc5JykgewogICAgbGV0IHJvdyA9IHNbMF0udG9faW50KCkgLSA2NSAvLyAnQScgPD0+IDAKICAgIGxldCBjb2wgPSBzWzFdLnRvX2ludCgpIC0gNDkgLy8gJzEnIDw9PiAwCiAgICByZXR1cm4gcm93ICogOSArIGNvbAogIH0gZWxzZSB7CiAgICBhYm9ydCgic3F1YXJlX3RvX2ludCgpOiBcKHMpIGlzIG5vdCBhIHNxdWFyZSIpCiAgfQp9CgpmbiBjb250YWluc1tUXShzZWxmIDogU3F1YXJlTWFwW1RdLCBwcmVkIDogKFQpIC0+IEJvb2wpIC0+IEJvb2wgewogIHZhciByZXN1bHQgPSBmYWxzZQogIHZhciBpID0gMAogIHdoaWxlIGkgPCBzZWxmLmNvbnRlbnRzLmxlbmd0aCgpIHsKICAgIHJlc3VsdCA9IHJlc3VsdCB8fCBwcmVkKHNlbGYuY29udGVudHNbaV0pCiAgICBpZiByZXN1bHQgewogICAgICBicmVhawogICAgfSBlbHNlIHsKICAgICAgaSA9IGkgKyAxCiAgICB9CiAgfQogIHJldHVybiByZXN1bHQKfQoKZm4gU3F1YXJlTWFwOjpuZXdbVF0odmFsIDogVCkgLT4gU3F1YXJlTWFwW1RdIHsKICB7IGNvbnRlbnRzIDogQXJyYXk6Om1ha2UoODEsIHZhbCkgfQp9CgpmbiBjb3B5W1RdKHNlbGYgOiBTcXVhcmVNYXBbVF0pIC0+IFNxdWFyZU1hcFtUXSB7CiAgbGV0IGFyciA9IEFycmF5OjptYWtlKDgxLCBzZWxmLmNvbnRlbnRzWzBdKQogIHZhciBpID0gMAogIHdoaWxlIGkgPCA4MSB7CiAgICBhcnJbaV0gPSBzZWxmLmNvbnRlbnRzW2ldCiAgICBpID0gaSArIDEKICB9CiAgcmV0dXJuIHsgY29udGVudHMgOiBhcnIgfQp9CiAgCmZuIG9wX2dldFtUXShzZWxmIDogU3F1YXJlTWFwW1RdLCBzcXVhcmUgOiBTdHJpbmcpIC0+IFQgewogIHNlbGYuY29udGVudHNbc3F1YXJlX3RvX2ludChzcXVhcmUpXQp9CgpmbiBvcF9zZXRbVF0oc2VsZiA6IFNxdWFyZU1hcFtUXSwgc3F1YXJlIDogU3RyaW5nLCB4IDogVCkgewogIHNlbGYuY29udGVudHNbc3F1YXJlX3RvX2ludChzcXVhcmUpXSA9IHgKfQoKLy8g6K6h566Xc3F1YXJlcyx1bml0c+WSjHBlZXJzCgpsZXQgcm93cyA9ICJBQkNERUZHSEkiCmxldCBjb2xzID0gIjEyMzQ1Njc4OSIKCmZuIGNyb3NzKHggOiBTdHJpbmcsIHkgOiBTdHJpbmcsIHByZWQgOiAoU3RyaW5nKSAtPiBCb29sKSAtPiBMaXN0W1N0cmluZ10gewogIHZhciByZXN1bHQgOiBMaXN0W1N0cmluZ10gPSBOaWwKICB2YXIgaSA9IDAKICB2YXIgaiA9IDAKICB3aGlsZSBpIDwgeC5sZW5ndGgoKSB7CiAgICB3aGlsZSBqIDwgeS5sZW5ndGgoKSB7CiAgICAgIGxldCByZXMgPSB4W2ldLnRvX3N0cmluZygpICsgeVtqXS50b19zdHJpbmcoKQogICAgICBpZiBwcmVkKHJlcykgeyByZXN1bHQgPSBDb25zKHJlcywgcmVzdWx0KX0KICAgICAgaiA9IGogKyAxCiAgICB9CiAgICBqID0gMAogICAgaSA9IGkgKyAxCiAgfQogIHJldHVybiByZXN1bHQKfQoKZm4gc3F1YXJlc18oKSAtPiBMaXN0W1N0cmluZ10gewogIGNyb3NzKHJvd3MsIGNvbHMsIGZuIChfXyl7IHRydWUgfSkKfQoKbGV0IHNxdWFyZXMgOiBMaXN0W1N0cmluZ10gPSBzcXVhcmVzXygpLnJldmVyc2UoKQoKZm4gdW5pdE9mKHNxdWFyZSA6IFN0cmluZykgLT4gTGlzdFtTdHJpbmddIHsKICBsZXQgcm93ID0gc3F1YXJlWzBdCiAgbGV0IGNvbCA9IHNxdWFyZVsxXQogIHZhciByb3dzID0gIiIKICB2YXIgY29scyA9ICIiCiAgaWYgcm93LmluKCdBJywgJ0MnKSB7CiAgICByb3dzID0gIkFCQyIKICB9CiAgaWYgcm93LmluKCdEJywgJ0YnKSB7CiAgICByb3dzID0gIkRFRiIKICB9CiAgaWYgcm93LmluKCdHJywgJ0knKSB7CiAgICByb3dzID0gIkdISSIKICB9CiAgaWYgY29sLmluKCcxJywgJzMnKSB7CiAgICBjb2xzID0gIjEyMyIKICB9CiAgaWYgY29sLmluKCc0JywgJzYnKSB7CiAgICBjb2xzID0gIjQ1NiIKICB9CiAgaWYgY29sLmluKCc3JywgJzknKSB7CiAgICBjb2xzID0gIjc4OSIKICB9CiAgY3Jvc3Mocm93cywgY29scywgZm4gKHMpeyBzICE9IHNxdWFyZSB9KQp9CgpmbiBuZXdVbml0VGFibGUoKSAtPiBTcXVhcmVNYXBbTGlzdFtTdHJpbmddXSB7CiAgbGV0IHRhYmxlIDogU3F1YXJlTWFwW0xpc3RbU3RyaW5nXV0gPSBTcXVhcmVNYXA6Om5ldyhOaWwpCiAgc3F1YXJlcy5pdGVyKGZuIChzcXVhcmUpIHsKICAgIHRhYmxlW3NxdWFyZV0gPSB1bml0T2Yoc3F1YXJlKQogIH0pCiAgdGFibGUKfQoKbGV0IHVuaXRzIDogU3F1YXJlTWFwW0xpc3RbU3RyaW5nXV0gPSBuZXdVbml0VGFibGUoKQoKZm4gaXNQZWVyT2Yoc2VsZiA6IFN0cmluZywgc3F1YXJlIDogU3RyaW5nKSAtPiBCb29sIHsKICBzZWxmICE9IHNxdWFyZSAmJiAoc2VsZlswXSA9PSBzcXVhcmVbMF0gfHwgc2VsZlsxXSA9PSBzcXVhcmVbMV0gfHwgdW5pdHNbc3F1YXJlXS5leGlzdChmbiAoc3EpIHsgc3EgPT0gc2VsZiB9KSkKfQoKZm4gbmV3UGVlcnMoKSAtPiBTcXVhcmVNYXBbTGlzdFtTdHJpbmddXSB7CiAgbGV0IHRhYmxlIDogU3F1YXJlTWFwW0xpc3RbU3RyaW5nXV0gPSBTcXVhcmVNYXA6Om5ldyhOaWwpCiAgc3F1YXJlcy5pdGVyKGZuIChzcXVhcmUpIHsKICAgIHRhYmxlW3NxdWFyZV0gPSBzcXVhcmVzLmZpbHRlcihmbiAoc3EpIHsgc3EuaXNQZWVyT2Yoc3F1YXJlKSB9KQogIH0pCiAgcmV0dXJuIHRhYmxlCn0KCmxldCBwZWVycyA6IFNxdWFyZU1hcFtMaXN0W1N0cmluZ11dID0gbmV3UGVlcnMoKQoKCi8vIEdyaWQKCgoKZm4gZWxpbWluYXRlKHZhbHVlcyA6IFNxdWFyZU1hcFtMaXN0W0NoYXJdXSwga2V5IDogU3RyaW5nLCB2YWwgOiBDaGFyKSAtPiBCb29sIHsKICBpZiBub3QodmFsdWVzW2tleV0uZXhpc3QoZm4gKHYpIHsgdiA9PSB2YWwgfSkpIHsKICAgIHJldHVybiB0cnVlCiAgfQogIHZhbHVlc1trZXldID0gdmFsdWVzW2tleV0ucmVtb3ZlKHZhbCkKICAvLyDlpoLmnpxrZXnlr7nlupTnmoTlj6/og73mgKflj6rliankuIvkuIDnp43vvIzliJnku45rZXnnmoTpgrvov5HkvY3nva7kuK3mtojpmaTmraTlj6/og73mgKcKICBtYXRjaCB2YWx1ZXNba2V5XS5zaW5nbGUoKSB7CiAgICBFcnIoYikgPT4gewogICAgICBpZiBub3QoYikgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICB9CiAgICBPayh2YWwpID0+IHsKICAgICAgdmFyIHJlc3VsdCA9IHRydWUKICAgICAgcGVlcnNba2V5XS5pdGVyKGZuIChrZXkpIHsKICAgICAgICByZXN1bHQgPSByZXN1bHQgJiYgZWxpbWluYXRlKHZhbHVlcywga2V5LCB2YWwpCiAgICAgIH0pCiAgICAgIGlmIG5vdChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogIH0KICAvLyDlpoLmnpxrZXnmiYDlnKjnmoR1bml05Lit5Y+q5Ymp5LiL5LiA5Liq5pa55Z2X5Y+v5a6557qzdmFsLCDliJnmiop2YWzotYvlgLznu5nor6XmlrnlnZcKICBsZXQgdW5pdCA9IHVuaXRzW2tleV0KICBsZXQgcGxhY2VzID0gdW5pdC5maWx0ZXIoZm4gKHNxKSB7CiAgICB2YWx1ZXNbc3FdLmV4aXN0KGZuICh2KSB7IHYgPT0gdmFsIH0pCiAgfSkKICBtYXRjaCBwbGFjZXMuc2luZ2xlKCkgewogICAgRXJyKGIpID0+IHsKICAgICAgaWYgbm90KGIpIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgT2soa2V5KSA9PiB7CiAgICAgIHJldHVybiBhc3NpZ24odmFsdWVzLCBrZXksIHZhbCkKICAgIH0KICB9CiAgcmV0dXJuIHRydWUKfQoKZm4gYXNzaWduKHZhbHVlcyA6IFNxdWFyZU1hcFtMaXN0W0NoYXJdXSwga2V5IDogU3RyaW5nLCB2YWwgOiBDaGFyKSAtPiBCb29sIHsKICBsZXQgb3RoZXJfdmFsdWVzID0gdmFsdWVzW2tleV0ucmVtb3ZlKHZhbCkKICB2YXIgcmVzdWx0ID0gdHJ1ZQogIG90aGVyX3ZhbHVlcy5pdGVyKGZuICh2YWwpIHsKICAgIHJlc3VsdCA9IHJlc3VsdCAmJiBlbGltaW5hdGUodmFsdWVzLCBrZXksIHZhbCkKICB9KQogIHJldHVybiByZXN1bHQKfQoKCmZuIHBhcnNlR3JpZChzIDogU3RyaW5nKSAtPiBTcXVhcmVNYXBbTGlzdFtDaGFyXV0gewogIGxldCBkaWdpdHMgPSBjb2xzLnRvX2xpc3QoKQogIGxldCB2YWx1ZXMgOiBTcXVhcmVNYXBbTGlzdFtDaGFyXV0gPSBTcXVhcmVNYXA6Om5ldyhkaWdpdHMpCiAgbGV0IGNoYXJzID0gcy50b19saXN0KCkuZmlsdGVyKGZuIChjaCl7CiAgICBjaC5pbignMCcsICc5JykgfHwgY2ggPT0gJy4nCiAgfSkKICB2YXIgcGFpcnMgPSB6aXAoc3F1YXJlcywgY2hhcnMpCiAgd2hpbGUgbm90KHBhaXJzLmlzTmlsKCkpIHsKICAgIGxldCBDb25zKHAsIHBzKSA9IHBhaXJzCiAgICBsZXQgKHNxdWFyZSwgZGlnaXQpID0gcAogICAgaWYgZGlnaXQuaW4oJzEnLCAnOScpIHsKICAgICAgaWYgbm90KGFzc2lnbih2YWx1ZXMsIHNxdWFyZSwgZGlnaXQpKSB7CiAgICAgICAgYWJvcnQoInBhcnNlR3JpZCgpOiBmb3VuZCBjb250cmFkaWN0aW9uIikKICAgICAgfQogICAgfQogICAgcGFpcnMgPSBwcwogIH0KICByZXR1cm4gdmFsdWVzCn0KCmZuIHByaW50R3JpZChncmlkIDogU3F1YXJlTWFwW0xpc3RbQ2hhcl1dKSB7CiAgbGV0IHJlcCA9IEFycmF5OjptYWtlKDgxLCAiIikKICB2YXIgaSA9IDAKICB2YXIgbWF4V2lkdGggPSAwCiAgd2hpbGUgaSA8IDgxIHsKICAgIHJlcFtpXSA9IHN0cmluZyhncmlkLmNvbnRlbnRzW2ldKQogICAgbWF4V2lkdGggPSBtYXgocmVwW2ldLmxlbmd0aCgpLCBtYXhXaWR0aCkKICAgIGkgPSBpICsgMQogIH0KICBpID0gMAogIHdoaWxlIGkgPCA4MSB7CiAgICBwcmludCgiICIpCiAgICBwcmludChyZXBbaV0pCiAgICBwcmludChibGFuayhtYXhXaWR0aCAtIHJlcFtpXS5sZW5ndGgoKSkpCiAgICBpZiAoaSArIDEpICUgMjcgPT0gMCAmJiBpICsgMSAhPSA4MSB7CiAgICAgIHByaW50KCJcbiIpCiAgICAgIHByaW50KFN0cmluZzo6bWFrZShtYXhXaWR0aCAqIDMgKyA2LCAnLScpKQogICAgICBwcmludCgiKyIpCiAgICAgIHByaW50KFN0cmluZzo6bWFrZShtYXhXaWR0aCAqIDMgKyA2LCAnLScpKQogICAgICBwcmludCgiKyIpCiAgICAgIHByaW50KFN0cmluZzo6bWFrZShtYXhXaWR0aCAqIDMgKyA2LCAnLScpKQogICAgICBwcmludCgiXG4iKQogICAgfSBlbHNlIGlmIChpICsgMSkgJSA5ID09IDAgewogICAgICBwcmludCgiXG4iKQogICAgfSBlbHNlIGlmIChpICsgMSkgJSAzID09IDAgewogICAgICBwcmludCgiIHwiKQogICAgfSBlbHNlIHsKICAgICAgcHJpbnQoIiAiKQogICAgfQogICAgaSA9IGkgKyAxCiAgfQp9CgpmbiBzZWFyY2godmFsdWVzIDogU3F1YXJlTWFwW0xpc3RbQ2hhcl1dKSAtPiBPcHRpb25bU3F1YXJlTWFwW0xpc3RbQ2hhcl1dXSB7CiAgaWYgdmFsdWVzLmNvbnRhaW5zKGZuIChkaWdpdHMpeyBub3QoZGlnaXRzLmlzU2luZ2xldG9uKCkpIH0pIHsKICAgIHZhciBtaW5zcSA9ICIiCiAgICB2YXIgbiA9IDEwCiAgICBzcXVhcmVzLml0ZXIoZm4gKHNxKSB7CiAgICAgIGxldCBsZW4gPSB2YWx1ZXNbc3FdLmxlbmd0aCgpCiAgICAgIGlmIGxlbiA+IDEgewogICAgICAgIGlmIGxlbiA8IG4gewogICAgICAgICAgbiA9IGxlbgogICAgICAgICAgbWluc3EgPSBzcQogICAgICAgIH0KICAgICAgfQogICAgfSkKICAgIHZhciByZXN1bHQgOiBPcHRpb25bU3F1YXJlTWFwW0xpc3RbQ2hhcl1dXSA9IE5vbmUKICAgIHZhbHVlc1ttaW5zcV0uaXRlcl9pZihmbiAoZGlnaXQpIHsKICAgICAgbGV0IGFub3RoZXIgPSB2YWx1ZXMuY29weSgpCiAgICAgIGlmIGFzc2lnbihhbm90aGVyLCBtaW5zcSwgZGlnaXQpIHsKICAgICAgICBsZXQgdGVtcCA9IHNlYXJjaChhbm90aGVyKQogICAgICAgIG1hdGNoIHRlbXAgewogICAgICAgICAgTm9uZSA9PiB0cnVlCiAgICAgICAgICBTb21lKHYpID0+IHsKICAgICAgICAgICAgcmVzdWx0ID0gU29tZSh2KQogICAgICAgICAgICBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0cnVlCiAgICAgIH0KICAgIH0pCiAgICByZXR1cm4gcmVzdWx0CiAgfSBlbHNlIHsKICAgIHJldHVybiBTb21lKHZhbHVlcykKICB9Cn0KCmZuIHNvbHZlKGcgOiBTdHJpbmcpIC0+IFNxdWFyZU1hcFtMaXN0W0NoYXJdXSB7CiAgbWF0Y2ggc2VhcmNoKHBhcnNlR3JpZChnKSkgewogICAgTm9uZSA9PiBhYm9ydCgic29sdmUoKSA6IGNhbnQgc29sdmUgXChnKSIpCiAgICBTb21lKHYpID0+IHYKICB9Cn0="),e=>e.charCodeAt(0)),{create:!0,overwrite:!0}),t.writeFile(h.default.Uri.parse("memfs:/app/main/utils.mbt"),Uint8Array.from(atob("Zm4gaW4oc2VsZiA6IENoYXIsIGx3IDogQ2hhciwgdXAgOiBDaGFyKSAtPiBCb29sIHsKICBzZWxmID49IGx3ICYmIHNlbGYgPD0gdXAKfQoKZm4gcmVtb3ZlW1QgOiBFcV0oc2VsZiA6IExpc3RbVF0sIGVsZW0gOiBUKSAtPiBMaXN0W1RdIHsKICBmbiBnbyhsc3QgOiBMaXN0W1RdKSAtPiBMaXN0W1RdIHsKICAgIG1hdGNoIGxzdCB7CiAgICAgIE5pbCA9PiBOaWwKICAgICAgQ29ucyh4LCB4cykgPT4gewogICAgICAgIGlmIHggPT0gZWxlbSB7CiAgICAgICAgICBnbyh4cykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgQ29ucyh4LCBnbyh4cykpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIGdvKHNlbGYpCn0KCmZuIGl0ZXJbWF0oc2VsZjogTGlzdFtYXSwgZjogKFgpIC0+IFVuaXQpIC0+IFVuaXQgewogIG1hdGNoIHNlbGYgewogICAgTmlsID0+ICgpCiAgICBDb25zKHgsIHJlc3QpID0+IHsgZih4KTsgaXRlcihyZXN0LCBmKSB9CiAgfQp9CgpmbiBpdGVyX2lmW1RdKHNlbGYgOiBMaXN0W1RdLCBmIDogKFQpIC0+IEJvb2wpIC0+IFVuaXQgewogIG1hdGNoIHNlbGYgewogICAgTmlsID0+ICgpCiAgICBDb25zKHgsIHJlc3QpID0+IHsKICAgICAgaWYgZih4KSB7CiAgICAgICAgaXRlcl9pZihyZXN0LCBmKQogICAgICB9CiAgICB9CiAgfQp9CgpmbiB0b19zdHJpbmdbVCA6IFNob3ddKHNlbGYgOiBMaXN0W1RdKSAtPiBTdHJpbmcgewogIGZuIGdvKGxzIDogTGlzdFtUXSl7CiAgICBtYXRjaCBscyB7CiAgICAgIE5pbCA9PiAiIgogICAgICBDb25zKHgsTmlsKSA9PiAiXCh4KSIKICAgICAgQ29ucyh4LHhzKSA9PiAiXCh4KSwgIiArIGdvKHhzKQogICAgfQogIH0KICAiWyIgKyBnbyhzZWxmKSArICJdIgp9CgpmbiB0b19zdHJpbmdbVCA6IFNob3ddKHNlbGYgOiBPcHRpb25bVF0pIC0+IFN0cmluZyB7CiAgbWF0Y2ggc2VsZiB7CiAgICBOb25lID0+ICJOb25lIgogICAgU29tZSh2KSA9PiAiU29tZShcKHYpKSIKICB9Cn0KCgpmbiBleGlzdFtUXShzZWxmIDogTGlzdFtUXSwgcHJlZCA6IChUKSAtPiBCb29sKSAtPiBCb29sIHsKICBtYXRjaCBzZWxmIHsKICAgIE5pbCA9PiBmYWxzZQogICAgQ29ucyh4LCB4cykgPT4gcHJlZCh4KSB8fCBleGlzdCh4cywgcHJlZCkKICB9Cn0KCmZuIGZpbHRlcltUXShzZWxmOiBMaXN0W1RdLCBwcmVkaWNhdGU6IChUKSAtPiBCb29sKSAtPiBMaXN0W1RdIHsKICBtYXRjaCBzZWxmIHsKICAgIE5pbCA9PiBOaWwKICAgIENvbnMoeCwgeHMpID0+CiAgICAgIGlmIHByZWRpY2F0ZSh4KSB7CiAgICAgICAgQ29ucyh4LCBmaWx0ZXIoeHMsIHByZWRpY2F0ZSkpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsdGVyKHhzLCBwcmVkaWNhdGUpCiAgICAgIH0KICB9Cn0KCmZuIHRvX2xpc3Qoc2VsZiA6IFN0cmluZykgLT4gTGlzdFtDaGFyXSB7CiAgZm4gZ28oaSA6IEludCkgLT4gTGlzdFtDaGFyXSB7CiAgICBpZiBpIDwgc2VsZi5sZW5ndGgoKSB7CiAgICAgIENvbnMoc2VsZltpXSwgZ28oaSArIDEpKQogICAgfSBlbHNlIHsKICAgICAgTmlsCiAgICB9CiAgfQogIGdvKDApCn0KCmZuIHppcFtYLCBZXSh4cyA6IExpc3RbWF0sIHlzIDogTGlzdFtZXSkgLT4gTGlzdFsoWCwgWSldIHsKICBtYXRjaCAoeHMsIHlzKSB7CiAgICAoTmlsLCBOaWwpID0+IE5pbAogICAgKENvbnMoeCwgeHMpLCBDb25zKHksIHlzKSkgPT4gewogICAgICBDb25zKCh4LCB5KSwgemlwKHhzLCB5cykpCiAgICB9CiAgICBfID0+IGFib3J0KCJ6aXAoKTogbGVuZ3RoIHhzICE9IGxlbmd0aCB5cyIpCiAgfQp9CgoKZm4gaXNOaWxbVF0oc2VsZiA6IExpc3RbVF0pIC0+IEJvb2wgewogIG1hdGNoIHNlbGYgewogICAgTmlsID0+IHRydWUKICAgIF8gICA9PiBmYWxzZQogIH0KfQoKZm4gc3RyaW5nKGxzdCA6IExpc3RbQ2hhcl0pIC0+IFN0cmluZyB7CiAgbWF0Y2ggbHN0IHsKICAgIE5pbCA9PiAiIgogICAgQ29ucyh4LCB4cykgPT4geC50b19zdHJpbmcoKSArIHN0cmluZyh4cykKICB9Cn0KCmZuIGJsYW5rKG4gOiBJbnQpIC0+IFN0cmluZyB7CiAgLy8gU3RyaW5nOjptYWtlKG4sICcgJykKICBmbiBnbyhpIDogSW50KSAtPiBTdHJpbmcgewogICAgaWYgaSA9PSAwIHsKICAgICAgcmV0dXJuICIiCiAgICB9IGVsc2UgewogICAgICAiICIgKyBnbyhpIC0gMSkKICAgIH0KICB9CiAgZ28obikKfQoKZm4gbWF4KHggOiBJbnQsIHkgOiBJbnQpIC0+IEludCB7CiAgaWYgeCA8IHkgewogICAgeQogIH0gZWxzZSB7CiAgICB4CiAgfQp9CgpmbiByZXZlcnNlW1hdKHNlbGY6IExpc3RbWF0pIC0+IExpc3RbWF0gewogIGZuIGdvKGFjYywgeHM6IExpc3RbWF0pIHsKICAgIG1hdGNoIHhzIHsKICAgICAgTmlsID0+IGFjYwogICAgICBDb25zKHgsIHJlc3QpID0+IGdvKChDb25zKHgsIGFjYykgOiBMaXN0W1hdKSwgcmVzdCkKICAgIH0KICB9CgogIGdvKE5pbCwgc2VsZikKfQoKCgpmbiBTdHJpbmc6Om1ha2UobiA6IEludCwgY2ggOiBDaGFyKSAtPiBTdHJpbmcgewogICAgZm4gZ28oaSA6IEludCkgLT4gU3RyaW5nIHsKICAgIGlmIGkgPT0gMCB7CiAgICAgIHJldHVybiAiIgogICAgfSBlbHNlIHsKICAgICAgY2gudG9fc3RyaW5nKCkgKyBnbyhpIC0gMSkKICAgIH0KICB9CiAgZ28obikKfQoKZW51bSBSZXN1bHRbViwgRV0gewogIE9rKFYpCiAgRXJyKEUpCn0KCmZuIHNpbmdsZVtUXShzZWxmIDogTGlzdFtUXSkgLT4gUmVzdWx0W1QsIEJvb2xdIHsKICBtYXRjaCBzZWxmIHsKICAgIE5pbCA9PiBFcnIoZmFsc2UpCiAgICBDb25zKHgsIE5pbCkgPT4gT2soeCkKICAgIF8gPT4gRXJyKHRydWUpCiAgfQp9CgpmbiBpc1NpbmdsZXRvbltUXShzZWxmIDogTGlzdFtUXSkgLT4gQm9vbCB7CiAgbWF0Y2ggc2VsZiB7CiAgICBDb25zKF8sIE5pbCkgPT4gdHJ1ZQogICAgXyAgICAgICAgICAgID0+IGZhbHNlCiAgfQp9CgpmbiBsZW5ndGhbVF0oc2VsZjogTGlzdFtUXSkgLT4gSW50IHsKICBtYXRjaCBzZWxmIHsKICAgIE5pbCA9PiAwCiAgICBDb25zKF8sIHhzKSA9PiAxICsgeHMubGVuZ3RoKCkKICB9Cn0="),e=>e.charCodeAt(0)),{create:!0,overwrite:!0})}var X=class{constructor(e,o){this.uri=e;C(this,"type");C(this,"ctime");C(this,"mtime");C(this,"size");C(this,"name");C(this,"data");this.type=g.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=o}},B=class{constructor(e,o){this.uri=e;C(this,"type");C(this,"ctime");C(this,"mtime");C(this,"size");C(this,"name");C(this,"entries");this.type=g.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=o,this.entries=new Map}},Bt=new TextEncoder,W=class W{constructor(){C(this,"disposable");C(this,"root",new B(g.Uri.parse("memfs:/"),""));C(this,"_emitter",new g.EventEmitter);C(this,"_bufferedEvents",[]);C(this,"_fireSoonHandle");C(this,"onDidChangeFile",this._emitter.event);C(this,"_textDecoder",new TextDecoder);this.disposable=g.Disposable.from(g.workspace.registerFileSystemProvider(W.scheme,this,{isCaseSensitive:!0}),g.workspace.registerFileSearchProvider(W.scheme,this),g.workspace.registerTextSearchProvider(W.scheme,this))}dispose(){this.disposable?.dispose()}initFolder(){console.log("create dir: sample-folder"),this.createDirectory(g.Uri.parse("memfs:/app/")),O(this)}stat(e){return this._lookup(e,!1)}readDirectory(e){let o=this._lookupAsDirectory(e,!1),r=[];for(let[a,I]of o.entries)r.push([a,I.type]);return r}readFile(e){let o=this._lookupAsFile(e,!1).data;if(o)return o;throw g.FileSystemError.FileNotFound()}writeFile(e,o,r){let a=this._basename(e.path),I=this._lookupParentDirectory(e),i=I.entries.get(a);if(i instanceof B)throw g.FileSystemError.FileIsADirectory(e);if(!i&&!r.create)throw g.FileSystemError.FileNotFound(e);if(i&&r.create&&!r.overwrite)throw g.FileSystemError.FileExists(e);i||(i=new X(e,a),I.entries.set(a,i),this._fireSoon({type:g.FileChangeType.Created,uri:e})),i.mtime=Date.now(),i.size=o.byteLength,i.data=o,this._fireSoon({type:g.FileChangeType.Changed,uri:e})}rename(e,o,r){if(!r.overwrite&&this._lookup(o,!0))throw g.FileSystemError.FileExists(o);let a=this._lookup(e,!1),I=this._lookupParentDirectory(e),i=this._lookupParentDirectory(o),l=this._basename(o.path);I.entries.delete(a.name),a.name=l,i.entries.set(l,a),this._fireSoon({type:g.FileChangeType.Deleted,uri:e},{type:g.FileChangeType.Created,uri:o})}delete(e){let o=e.with({path:this._dirname(e.path)}),r=this._basename(e.path),a=this._lookupAsDirectory(o,!1);if(!a.entries.has(r))throw g.FileSystemError.FileNotFound(e);a.entries.delete(r),a.mtime=Date.now(),a.size-=1,this._fireSoon({type:g.FileChangeType.Changed,uri:o},{uri:e,type:g.FileChangeType.Deleted})}createDirectory(e){let o=this._basename(e.path),r=e.with({path:this._dirname(e.path)}),a=this._lookupAsDirectory(r,!1),I=new B(e,o);a.entries.set(I.name,I),a.mtime=Date.now(),a.size+=1,this._fireSoon({type:g.FileChangeType.Changed,uri:r},{type:g.FileChangeType.Created,uri:e})}_lookup(e,o){let r=e.path.split("/"),a=this.root;for(let I of r){if(!I)continue;let i;if(a instanceof B&&(i=a.entries.get(I)),!i){if(o)return;throw g.FileSystemError.FileNotFound(e)}a=i}return a}_lookupAsDirectory(e,o){let r=this._lookup(e,o);if(r instanceof B)return r;throw g.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,o){let r=this._lookup(e,o);if(r instanceof X)return r;throw g.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){let o=e.with({path:this._dirname(e.path)});return this._lookupAsDirectory(o,!1)}watch(e){return new g.Disposable(()=>{})}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout(()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0},5)}_basename(e){return e=this._rtrim(e,"/"),e?e.substr(e.lastIndexOf("/")+1):""}_dirname(e){return e=this._rtrim(e,"/"),e?e.substr(0,e.lastIndexOf("/")):"/"}_rtrim(e,o){if(!e||!o)return e;let r=o.length,a=e.length;if(r===0||a===0)return e;let I=a,i=-1;for(;i=e.lastIndexOf(o,I-1),!(i===-1||i+r!==I);){if(i===0)return"";I=i}return e.substring(0,I)}_getFiles(){let e=new Set;return this._doGetFiles(this.root,e),e}_doGetFiles(e,o){e.entries.forEach(r=>{r instanceof X?o.add(r):this._doGetFiles(r,o)})}_convertSimple2RegExpPattern(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}provideFileSearchResults(e,o,r){return this._findFiles(e.pattern)}_findFiles(e){let o=this._getFiles(),r=[],a=e?new RegExp(this._convertSimple2RegExpPattern(e)):null;for(let I of o)(!a||a.exec(I.name))&&r.push(I.uri);return r}provideTextSearchResults(e,o,r,a){let I={limitHit:!1},i=this._findFiles(o.includes[0]);if(i)for(let l of i){let p=this._textDecoder.decode(this.readFile(l)).split(`
`);for(let f=0;f<p.length;f++){let m=p[f],n=m.indexOf(e.pattern);n!==-1&&r.report({uri:l,ranges:new g.Range(new g.Position(f,n),new g.Position(f,n+e.pattern.length)),preview:{text:m,matches:new g.Range(new g.Position(0,n),new g.Position(0,n+e.pattern.length))}})}}return I}};C(W,"scheme","memfs");var Q=W,V=new Q;var Ze=typeof global=="object"&&global&&global.Object===Object&&global,M=Ze;var He=typeof self=="object"&&self&&self.Object===Object&&self,Se=M||He||Function("return this")(),Y=Se;var Xe=Y.Symbol,c=Xe;var j=Object.prototype,Fe=j.hasOwnProperty,Ge=j.toString,F=c?c.toStringTag:void 0;function we(t){var e=Fe.call(t,F),o=t[F];try{t[F]=void 0;var r=!0}catch{}var a=Ge.call(t);return r&&(e?t[F]=o:delete t[F]),a}var _=we;var Ve=Object.prototype,Ye=Ve.toString;function ve(t){return Ye.call(t)}var q=ve;var Ne="[object Null]",Re="[object Undefined]",$=c?c.toStringTag:void 0;function ze(t){return t==null?t===void 0?Re:Ne:$&&$ in Object(t)?_(t):q(t)}var ee=ze;function De(t){return t!=null&&typeof t=="object"}var te=De;var ke="[object Symbol]";function Je(t){return typeof t=="symbol"||te(t)&&ee(t)==ke}var v=Je;function Qe(t,e){for(var o=-1,r=t==null?0:t.length,a=Array(r);++o<r;)a[o]=e(t[o],o,t);return a}var oe=Qe;var Te=Array.isArray,re=Te;var Pe=1/0,ae=c?c.prototype:void 0,ge=ae?ae.toString:void 0;function ie(t){if(typeof t=="string")return t;if(re(t))return oe(t,ie)+"";if(v(t))return ge?ge.call(t):"";var e=t+"";return e=="0"&&1/t==-Pe?"-0":e}var Ie=ie;var Le=/\s/;function Ue(t){for(var e=t.length;e--&&Le.test(t.charAt(e)););return e}var se=Ue;var Ee=/^\s+/;function Oe(t){return t&&t.slice(0,se(t)+1).replace(Ee,"")}var le=Oe;function Me(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var y=Me;var Ce=NaN,je=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,qe=/^0o[0-7]+$/i,$e=parseInt;function et(t){if(typeof t=="number")return t;if(v(t))return Ce;if(y(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=y(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=le(t);var o=_e.test(t);return o||qe.test(t)?$e(t.slice(2),o?2:8):je.test(t)?Ce:+t}var T=et;function tt(t){return t==null?"":Ie(t)}var N=tt;function ot(t){return function(e){return t?.[e]}}var fe=ot;var rt=function(){return Y.Date.now()},R=rt;var at="Expected a function",gt=Math.max,it=Math.min;function It(t,e,o){var r,a,I,i,l,A,p=0,f=!1,m=!1,n=!0;if(typeof t!="function")throw new TypeError(at);e=T(e)||0,y(o)&&(f=!!o.leading,m="maxWait"in o,I=m?gt(T(o.maxWait)||0,e):I,n="trailing"in o?!!o.trailing:n);function u(d){var x=r,H=a;return r=a=void 0,p=d,i=t.apply(H,x),i}function b(d){return p=d,l=setTimeout(w,e),f?u(d):i}function K(d){var x=d-A,H=d-p,L=e-x;return m?it(L,I-H):L}function G(d){var x=d-A,H=d-p;return A===void 0||x>=e||x<0||m&&H>=I}function w(){var d=R();if(G(d))return P(d);l=setTimeout(w,K(d))}function P(d){return l=void 0,n&&r?u(d):(r=a=void 0,i)}function Ae(){l!==void 0&&clearTimeout(l),p=0,r=A=a=l=void 0}function ue(){return l===void 0?i:P(R())}function k(){var d=R(),x=G(d);if(r=arguments,a=this,A=d,x){if(l===void 0)return b(A);if(m)return clearTimeout(l),l=setTimeout(w,e),u(A)}return l===void 0&&(l=setTimeout(w,e)),i}return k.cancel=Ae,k.flush=ue,k}var de=It;var st={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lt=fe(st),pe=lt;var me=/[&<>"']/g,Ct=RegExp(me.source);function ft(t){return t=N(t),t&&Ct.test(t)?t.replace(me,pe):t}var z=ft;var ne=/[\\^$.*+?()[\]{}|]/g,dt=RegExp(ne.source);function pt(t){return t=N(t),t&&dt.test(t)?t.replace(ne,"\\$&"):t}var Z=pt;var mt="Expected a function";function nt(t,e,o){var r=!0,a=!0;if(typeof t!="function")throw new TypeError(mt);return y(o)&&(r="leading"in o?!!o.leading:r,a="trailing"in o?!!o.trailing:a),de(t,e,{leading:r,maxWait:e,trailing:a})}var D=nt;async function ut(t){t.subscriptions.push(V),V.initFolder();let e=null,o=p=>{let f=Math.random(),m=s.Uri.parse("memfs:/app/index.html"),n=V.readFile(m),u=`"${z(p.asWebviewUri(s.Uri.parse("memfs:/app/main/moon.wasm")).toString(!0))}"`,b=new TextDecoder().decode(n);return b=b.replace(/<head>/,`<head><base href="${z(p.asWebviewUri(m).toString(!0))}" /><meta name="nonce" content="${f}" />`).replace(new RegExp(Z('"target/wasm/debug/build/main/main.wasm"')),u).replace(new RegExp(Z('"target/wasm/release/build/main/main.wasm"')),u).replace(new RegExp(Z('"target/wasm-gc/debug/build/main/main.wasm"')),u).replace(new RegExp(Z('"target/wasm-gc/debug/build/main/main.wasm"')),u).replace(/\"(?:.*?)\/main::/g,'"'),b},r=()=>{if(s.workspace.workspaceFolders?.[0]!=null){if(e==null){let f=s.window.createWebviewPanel("canvas","Preview",{viewColumn:s.ViewColumn.Two},{enableScripts:!0,localResourceRoots:[s.Uri.parse("memfs:/")]});f.webview.html=o(f.webview),f.onDidDispose(()=>{e===f&&(e=null)}),e=f}e.reveal(),s.commands.executeCommand("workbench.action.lockEditorGroup")}};t.subscriptions.push(s.commands.registerCommand("moonfiddle.open-preview",()=>{r()})),r();let a=!1,I=D(async()=>{if(a)return;a=!0;let p=performance.now(),f=s.workspace.workspaceFolders?.[0];if(f==null)return;let m=s.Uri.joinPath(f.uri,"main"),n=await s.workspace.fs.readDirectory(m),u=[];for(let[K,G]of n)G===s.FileType.File&&K.endsWith(".mbt")&&u.push(s.Uri.joinPath(m,K).toString(!1));if(e!=null)try{await s.commands.executeCommand("moonbit.compile-to-wasm",s.Uri.parse("memfs:/app/main/moon.pkg.json"),{silent:!0}),e.webview.html=o(e.webview)}catch(K){console.error(K)}let b=performance.now()-p;console.log(`live reload in ${b}ms`),a=!1},100),i=D(async()=>{a||e!=null&&(e.webview.html=o(e.webview))},100),l=s.workspace.createFileSystemWatcher("**/*.mbt");l.onDidCreate(I),l.onDidChange(I),t.subscriptions.push(l);let A=s.workspace.createFileSystemWatcher("**/*");A.onDidChange(i),t.subscriptions.push(A)}return We(ct);})();
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
