"use strict";var module=module||{};module.exports=(()=>{var $g=Object.create;var li=Object.defineProperty;var Gg=Object.getOwnPropertyDescriptor;var zg=Object.getOwnPropertyNames;var Jg=Object.getPrototypeOf,Vg=Object.prototype.hasOwnProperty;var Zg=(n,e,t)=>e in n?li(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var we=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+n+'" is not supported')});var lr=(n,e)=>()=>(n&&(e=n(n=0)),e);var Z=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Hl=(n,e)=>{for(var t in e)li(n,t,{get:e[t],enumerable:!0})},Kl=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zg(e))!Vg.call(n,i)&&i!==t&&li(n,i,{get:()=>e[i],enumerable:!(r=Gg(e,i))||r.enumerable});return n};var qr=(n,e,t)=>(t=n!=null?$g(Jg(n)):{},Kl(e||!n||!n.__esModule?li(t,"default",{value:n,enumerable:!0}):t,n)),Xg=n=>Kl(li({},"__esModule",{value:!0}),n);var vt=(n,e,t)=>(Zg(n,typeof e!="symbol"?e+"":e,t),t);var j,E=lr(()=>{j=globalThis});var D=lr(()=>{});var x=lr(()=>{});var H={};Hl(H,{_debugEnd:()=>Pd,_debugProcess:()=>Bd,_events:()=>zd,_eventsCount:()=>Jd,_exiting:()=>fd,_fatalExceptions:()=>Sd,_getActiveHandles:()=>md,_getActiveRequests:()=>gd,_kill:()=>vd,_linkedBinding:()=>ld,_maxListeners:()=>Gd,_preload_modules:()=>Kd,_rawDebug:()=>cd,_startProfilerIdleNotifier:()=>Fd,_stopProfilerIdleNotifier:()=>qd,_tickCallback:()=>kd,abort:()=>Md,addListener:()=>Vd,allowedNodeEnvironmentFlags:()=>Ed,arch:()=>Jl,argv:()=>Xl,argv0:()=>Hd,assert:()=>Dd,binding:()=>rd,chdir:()=>sd,config:()=>pd,cpuUsage:()=>no,cwd:()=>od,debugPort:()=>jd,default:()=>sf,dlopen:()=>hd,domain:()=>dd,emit:()=>tf,emitWarning:()=>nd,env:()=>Zl,execArgv:()=>Yl,execPath:()=>Ud,exit:()=>_d,features:()=>xd,hasUncaughtExceptionCaptureCallback:()=>Td,hrtime:()=>to,kill:()=>Ad,listeners:()=>of,memoryUsage:()=>Cd,moduleLoadList:()=>ud,nextTick:()=>$l,off:()=>Xd,on:()=>Nn,once:()=>Zd,openStdin:()=>bd,pid:()=>Ld,platform:()=>Vl,ppid:()=>Nd,prependListener:()=>nf,prependOnceListener:()=>rf,reallyExit:()=>yd,release:()=>ad,removeAllListeners:()=>ef,removeListener:()=>Yd,resourceUsage:()=>wd,setSourceMapsEnabled:()=>Wd,setUncaughtExceptionCaptureCallback:()=>Rd,stderr:()=>Id,stdin:()=>Od,stdout:()=>Qd,title:()=>zl,umask:()=>id,uptime:()=>$d,version:()=>ed,versions:()=>td});function Bs(n){throw new Error("Node.js process "+n+" is not supported by JSPM core outside of Node.js")}function Yg(){!Qr||!dr||(Qr=!1,dr.length?Ln=dr.concat(Ln):eo=-1,Ln.length&&Wl())}function Wl(){if(!Qr){var n=setTimeout(Yg,0);Qr=!0;for(var e=Ln.length;e;){for(dr=Ln,Ln=[];++eo<e;)dr&&dr[eo].run();eo=-1,e=Ln.length}dr=null,Qr=!1,clearTimeout(n)}}function $l(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Ln.push(new Gl(n,e)),Ln.length===1&&!Qr&&setTimeout(Wl,0)}function Gl(n,e){this.fun=n,this.array=e}function Lt(){}function ld(n){Bs("_linkedBinding")}function hd(n){Bs("dlopen")}function gd(){return[]}function md(){return[]}function Dd(n,e){if(!n)throw new Error(e||"assertion error")}function Td(){return!1}function $d(){return er.now()/1e3}function to(n){var e=Math.floor((Date.now()-er.now())*.001),t=er.now()*.001,r=Math.floor(t)+e,i=Math.floor(t%1*1e9);return n&&(r=r-n[0],i=i-n[1],i<0&&(r--,i+=ks)),[r,i]}function Nn(){return sf}function of(n){return[]}var Ln,Qr,dr,eo,zl,Jl,Vl,Zl,Xl,Yl,ed,td,nd,rd,id,od,sd,ad,cd,ud,dd,fd,pd,yd,vd,no,wd,Cd,Ad,_d,bd,Ed,xd,Sd,Rd,kd,Bd,Pd,Fd,qd,Qd,Id,Od,Md,Ld,Nd,Ud,jd,Hd,Kd,Wd,er,Ts,ks,Gd,zd,Jd,Vd,Zd,Xd,Yd,ef,tf,nf,rf,sf,af=lr(()=>{E();D();x();R();S();Ln=[],Qr=!1,eo=-1;Gl.prototype.run=function(){this.fun.apply(null,this.array)};zl="browser",Jl="x64",Vl="browser",Zl={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Xl=["/usr/bin/node"],Yl=[],ed="v16.8.0",td={},nd=function(n,e){console.warn((e?e+": ":"")+n)},rd=function(n){Bs("binding")},id=function(n){return 0},od=function(){return"/"},sd=function(n){},ad={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};cd=Lt,ud=[];dd={},fd=!1,pd={};yd=Lt,vd=Lt,no=function(){return{}},wd=no,Cd=no,Ad=Lt,_d=Lt,bd=Lt,Ed={};xd={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Sd=Lt,Rd=Lt;kd=Lt,Bd=Lt,Pd=Lt,Fd=Lt,qd=Lt,Qd=void 0,Id=void 0,Od=void 0,Md=Lt,Ld=2,Nd=1,Ud="/bin/usr/node",jd=9229,Hd="node",Kd=[],Wd=Lt,er={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};er.now===void 0&&(Ts=Date.now(),er.timing&&er.timing.navigationStart&&(Ts=er.timing.navigationStart),er.now=()=>Date.now()-Ts);ks=1e9;to.bigint=function(n){var e=to(n);return typeof BigInt>"u"?e[0]*ks+e[1]:BigInt(e[0]*ks)+BigInt(e[1])};Gd=10,zd={},Jd=0;Vd=Nn,Zd=Nn,Xd=Nn,Yd=Nn,ef=Nn,tf=Lt,nf=Nn,rf=Nn;sf={version:ed,versions:td,arch:Jl,platform:Vl,release:ad,_rawDebug:cd,moduleLoadList:ud,binding:rd,_linkedBinding:ld,_events:zd,_eventsCount:Jd,_maxListeners:Gd,on:Nn,addListener:Vd,once:Zd,off:Xd,removeListener:Yd,removeAllListeners:ef,emit:tf,prependListener:nf,prependOnceListener:rf,listeners:of,domain:dd,_exiting:fd,config:pd,dlopen:hd,uptime:$d,_getActiveRequests:gd,_getActiveHandles:md,reallyExit:yd,_kill:vd,cpuUsage:no,resourceUsage:wd,memoryUsage:Cd,kill:Ad,exit:_d,openStdin:bd,allowedNodeEnvironmentFlags:Ed,assert:Dd,features:xd,_fatalExceptions:Sd,setUncaughtExceptionCaptureCallback:Rd,hasUncaughtExceptionCaptureCallback:Td,emitWarning:nd,nextTick:$l,_tickCallback:kd,_debugProcess:Bd,_debugEnd:Pd,_startProfilerIdleNotifier:Fd,_stopProfilerIdleNotifier:qd,stdout:Qd,stdin:Od,stderr:Id,abort:Md,umask:id,chdir:sd,cwd:od,env:Zl,title:zl,argv:Xl,execArgv:Yl,pid:Ld,ppid:Nd,execPath:Ud,debugPort:jd,hrtime:to,argv0:Hd,_preload_modules:Kd,setSourceMapsEnabled:Wd}});var S=lr(()=>{af()});function em(){if(cf)return di;cf=!0,di.byteLength=u,di.toByteArray=h,di.fromByteArray=A;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function o(B){var _=B.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=B.indexOf("=");M===-1&&(M=_);var U=M===_?0:4-M%4;return[M,U]}function u(B){var _=o(B),M=_[0],U=_[1];return(M+U)*3/4-U}function p(B,_,M){return(_+M)*3/4-M}function h(B){var _,M=o(B),U=M[0],Y=M[1],le=new t(p(B,U,Y)),ie=0,ye=Y>0?U-4:U,te;for(te=0;te<ye;te+=4)_=e[B.charCodeAt(te)]<<18|e[B.charCodeAt(te+1)]<<12|e[B.charCodeAt(te+2)]<<6|e[B.charCodeAt(te+3)],le[ie++]=_>>16&255,le[ie++]=_>>8&255,le[ie++]=_&255;return Y===2&&(_=e[B.charCodeAt(te)]<<2|e[B.charCodeAt(te+1)]>>4,le[ie++]=_&255),Y===1&&(_=e[B.charCodeAt(te)]<<10|e[B.charCodeAt(te+1)]<<4|e[B.charCodeAt(te+2)]>>2,le[ie++]=_>>8&255,le[ie++]=_&255),le}function C(B){return n[B>>18&63]+n[B>>12&63]+n[B>>6&63]+n[B&63]}function T(B,_,M){for(var U,Y=[],le=_;le<M;le+=3)U=(B[le]<<16&16711680)+(B[le+1]<<8&65280)+(B[le+2]&255),Y.push(C(U));return Y.join("")}function A(B){for(var _,M=B.length,U=M%3,Y=[],le=16383,ie=0,ye=M-U;ie<ye;ie+=le)Y.push(T(B,ie,ie+le>ye?ye:ie+le));return U===1?(_=B[M-1],Y.push(n[_>>2]+n[_<<4&63]+"==")):U===2&&(_=(B[M-2]<<8)+B[M-1],Y.push(n[_>>10]+n[_>>4&63]+n[_<<2&63]+"=")),Y.join("")}return di}function tm(){if(uf)return ro;uf=!0;return ro.read=function(n,e,t,r,i){var s,o,u=i*8-r-1,p=(1<<u)-1,h=p>>1,C=-7,T=t?i-1:0,A=t?-1:1,B=n[e+T];for(T+=A,s=B&(1<<-C)-1,B>>=-C,C+=u;C>0;s=s*256+n[e+T],T+=A,C-=8);for(o=s&(1<<-C)-1,s>>=-C,C+=r;C>0;o=o*256+n[e+T],T+=A,C-=8);if(s===0)s=1-h;else{if(s===p)return o?NaN:(B?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-h}return(B?-1:1)*o*Math.pow(2,s-r)},ro.write=function(n,e,t,r,i,s){var o,u,p,h=s*8-i-1,C=(1<<h)-1,T=C>>1,A=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=r?0:s-1,_=r?1:-1,M=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=C):(o=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-o))<1&&(o--,p*=2),o+T>=1?e+=A/p:e+=A*Math.pow(2,1-T),e*p>=2&&(o++,p/=2),o+T>=C?(u=0,o=C):o+T>=1?(u=(e*p-1)*Math.pow(2,i),o=o+T):(u=e*Math.pow(2,T-1)*Math.pow(2,i),o=0));i>=8;n[t+B]=u&255,B+=_,u/=256,i-=8);for(o=o<<i|u,h+=i;h>0;n[t+B]=o&255,B+=_,o/=256,h-=8);n[t+B-_]|=M*128},ro}function nm(){if(lf)return fr;lf=!0;let n=em(),e=tm(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;fr.Buffer=o,fr.SlowBuffer=Y,fr.INSPECT_MAX_BYTES=50;let r=2147483647;fr.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=i(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let g=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(g,a),g.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function s(g){if(g>r)throw new RangeError('The value "'+g+'" is invalid for option "size"');let a=new Uint8Array(g);return Object.setPrototypeOf(a,o.prototype),a}function o(g,a,c){if(typeof g=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(g)}return u(g,a,c)}o.poolSize=8192;function u(g,a,c){if(typeof g=="string")return T(g,a);if(ArrayBuffer.isView(g))return B(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Je(g,ArrayBuffer)||g&&Je(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Je(g,SharedArrayBuffer)||g&&Je(g.buffer,SharedArrayBuffer)))return _(g,a,c);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let d=g.valueOf&&g.valueOf();if(d!=null&&d!==g)return o.from(d,a,c);let w=M(g);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return o.from(g[Symbol.toPrimitive]("string"),a,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}o.from=function(g,a,c){return u(g,a,c)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function p(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function h(g,a,c){return p(g),g<=0?s(g):a!==void 0?typeof c=="string"?s(g).fill(a,c):s(g).fill(a):s(g)}o.alloc=function(g,a,c){return h(g,a,c)};function C(g){return p(g),s(g<0?0:U(g)|0)}o.allocUnsafe=function(g){return C(g)},o.allocUnsafeSlow=function(g){return C(g)};function T(g,a){if((typeof a!="string"||a==="")&&(a="utf8"),!o.isEncoding(a))throw new TypeError("Unknown encoding: "+a);let c=le(g,a)|0,d=s(c),w=d.write(g,a);return w!==c&&(d=d.slice(0,w)),d}function A(g){let a=g.length<0?0:U(g.length)|0,c=s(a);for(let d=0;d<a;d+=1)c[d]=g[d]&255;return c}function B(g){if(Je(g,Uint8Array)){let a=new Uint8Array(g);return _(a.buffer,a.byteOffset,a.byteLength)}return A(g)}function _(g,a,c){if(a<0||g.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<a+(c||0))throw new RangeError('"length" is outside of buffer bounds');let d;return a===void 0&&c===void 0?d=new Uint8Array(g):c===void 0?d=new Uint8Array(g,a):d=new Uint8Array(g,a,c),Object.setPrototypeOf(d,o.prototype),d}function M(g){if(o.isBuffer(g)){let a=U(g.length)|0,c=s(a);return c.length===0||g.copy(c,0,0,a),c}if(g.length!==void 0)return typeof g.length!="number"||yt(g.length)?s(0):A(g);if(g.type==="Buffer"&&Array.isArray(g.data))return A(g.data)}function U(g){if(g>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return g|0}function Y(g){return+g!=g&&(g=0),o.alloc(+g)}o.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==o.prototype},o.compare=function(a,c){if(Je(a,Uint8Array)&&(a=o.from(a,a.offset,a.byteLength)),Je(c,Uint8Array)&&(c=o.from(c,c.offset,c.byteLength)),!o.isBuffer(a)||!o.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===c)return 0;let d=a.length,w=c.length;for(let k=0,I=Math.min(d,w);k<I;++k)if(a[k]!==c[k]){d=a[k],w=c[k];break}return d<w?-1:w<d?1:0},o.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(a,c){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return o.alloc(0);let d;if(c===void 0)for(c=0,d=0;d<a.length;++d)c+=a[d].length;let w=o.allocUnsafe(c),k=0;for(d=0;d<a.length;++d){let I=a[d];if(Je(I,Uint8Array))k+I.length>w.length?(o.isBuffer(I)||(I=o.from(I)),I.copy(w,k)):Uint8Array.prototype.set.call(w,I,k);else if(o.isBuffer(I))I.copy(w,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=I.length}return w};function le(g,a){if(o.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Je(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);let c=g.length,d=arguments.length>2&&arguments[2]===!0;if(!d&&c===0)return 0;let w=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return Jt(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Ze(g).length;default:if(w)return d?-1:Jt(g).length;a=(""+a).toLowerCase(),w=!0}}o.byteLength=le;function ie(g,a,c){let d=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,a>>>=0,c<=a))return"";for(g||(g="utf8");;)switch(g){case"hex":return ze(this,a,c);case"utf8":case"utf-8":return kt(this,a,c);case"ascii":return ht(this,a,c);case"latin1":case"binary":return ct(this,a,c);case"base64":return at(this,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return je(this,a,c);default:if(d)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),d=!0}}o.prototype._isBuffer=!0;function ye(g,a,c){let d=g[a];g[a]=g[c],g[c]=d}o.prototype.swap16=function(){let a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<a;c+=2)ye(this,c,c+1);return this},o.prototype.swap32=function(){let a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<a;c+=4)ye(this,c,c+3),ye(this,c+1,c+2);return this},o.prototype.swap64=function(){let a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<a;c+=8)ye(this,c,c+7),ye(this,c+1,c+6),ye(this,c+2,c+5),ye(this,c+3,c+4);return this},o.prototype.toString=function(){let a=this.length;return a===0?"":arguments.length===0?kt(this,0,a):ie.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(a){if(!o.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:o.compare(this,a)===0},o.prototype.inspect=function(){let a="",c=fr.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},t&&(o.prototype[t]=o.prototype.inspect),o.prototype.compare=function(a,c,d,w,k){if(Je(a,Uint8Array)&&(a=o.from(a,a.offset,a.byteLength)),!o.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(c===void 0&&(c=0),d===void 0&&(d=a?a.length:0),w===void 0&&(w=0),k===void 0&&(k=this.length),c<0||d>a.length||w<0||k>this.length)throw new RangeError("out of range index");if(w>=k&&c>=d)return 0;if(w>=k)return-1;if(c>=d)return 1;if(c>>>=0,d>>>=0,w>>>=0,k>>>=0,this===a)return 0;let I=k-w,ae=d-c,me=Math.min(I,ae),ve=this.slice(w,k),Ce=a.slice(c,d);for(let ce=0;ce<me;++ce)if(ve[ce]!==Ce[ce]){I=ve[ce],ae=Ce[ce];break}return I<ae?-1:ae<I?1:0};function te(g,a,c,d,w){if(g.length===0)return-1;if(typeof c=="string"?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,yt(c)&&(c=w?0:g.length-1),c<0&&(c=g.length+c),c>=g.length){if(w)return-1;c=g.length-1}else if(c<0)if(w)c=0;else return-1;if(typeof a=="string"&&(a=o.from(a,d)),o.isBuffer(a))return a.length===0?-1:de(g,a,c,d,w);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(g,a,c):Uint8Array.prototype.lastIndexOf.call(g,a,c):de(g,[a],c,d,w);throw new TypeError("val must be string, number or Buffer")}function de(g,a,c,d,w){let k=1,I=g.length,ae=a.length;if(d!==void 0&&(d=String(d).toLowerCase(),d==="ucs2"||d==="ucs-2"||d==="utf16le"||d==="utf-16le")){if(g.length<2||a.length<2)return-1;k=2,I/=2,ae/=2,c/=2}function me(Ce,ce){return k===1?Ce[ce]:Ce.readUInt16BE(ce*k)}let ve;if(w){let Ce=-1;for(ve=c;ve<I;ve++)if(me(g,ve)===me(a,Ce===-1?0:ve-Ce)){if(Ce===-1&&(Ce=ve),ve-Ce+1===ae)return Ce*k}else Ce!==-1&&(ve-=ve-Ce),Ce=-1}else for(c+ae>I&&(c=I-ae),ve=c;ve>=0;ve--){let Ce=!0;for(let ce=0;ce<ae;ce++)if(me(g,ve+ce)!==me(a,ce)){Ce=!1;break}if(Ce)return ve}return-1}o.prototype.includes=function(a,c,d){return this.indexOf(a,c,d)!==-1},o.prototype.indexOf=function(a,c,d){return te(this,a,c,d,!0)},o.prototype.lastIndexOf=function(a,c,d){return te(this,a,c,d,!1)};function re(g,a,c,d){c=Number(c)||0;let w=g.length-c;d?(d=Number(d),d>w&&(d=w)):d=w;let k=a.length;d>k/2&&(d=k/2);let I;for(I=0;I<d;++I){let ae=parseInt(a.substr(I*2,2),16);if(yt(ae))return I;g[c+I]=ae}return I}function he(g,a,c,d){return At(Jt(a,g.length-c),g,c,d)}function be(g,a,c,d){return At(Ct(a),g,c,d)}function nt(g,a,c,d){return At(Ze(a),g,c,d)}function rt(g,a,c,d){return At(rn(a,g.length-c),g,c,d)}o.prototype.write=function(a,c,d,w){if(c===void 0)w="utf8",d=this.length,c=0;else if(d===void 0&&typeof c=="string")w=c,d=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(d)?(d=d>>>0,w===void 0&&(w="utf8")):(w=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let k=this.length-c;if((d===void 0||d>k)&&(d=k),a.length>0&&(d<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let I=!1;for(;;)switch(w){case"hex":return re(this,a,c,d);case"utf8":case"utf-8":return he(this,a,c,d);case"ascii":case"latin1":case"binary":return be(this,a,c,d);case"base64":return nt(this,a,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rt(this,a,c,d);default:if(I)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),I=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function at(g,a,c){return a===0&&c===g.length?n.fromByteArray(g):n.fromByteArray(g.slice(a,c))}function kt(g,a,c){c=Math.min(g.length,c);let d=[],w=a;for(;w<c;){let k=g[w],I=null,ae=k>239?4:k>223?3:k>191?2:1;if(w+ae<=c){let me,ve,Ce,ce;switch(ae){case 1:k<128&&(I=k);break;case 2:me=g[w+1],(me&192)===128&&(ce=(k&31)<<6|me&63,ce>127&&(I=ce));break;case 3:me=g[w+1],ve=g[w+2],(me&192)===128&&(ve&192)===128&&(ce=(k&15)<<12|(me&63)<<6|ve&63,ce>2047&&(ce<55296||ce>57343)&&(I=ce));break;case 4:me=g[w+1],ve=g[w+2],Ce=g[w+3],(me&192)===128&&(ve&192)===128&&(Ce&192)===128&&(ce=(k&15)<<18|(me&63)<<12|(ve&63)<<6|Ce&63,ce>65535&&ce<1114112&&(I=ce))}}I===null?(I=65533,ae=1):I>65535&&(I-=65536,d.push(I>>>10&1023|55296),I=56320|I&1023),d.push(I),w+=ae}return Oe(d)}let X=4096;function Oe(g){let a=g.length;if(a<=X)return String.fromCharCode.apply(String,g);let c="",d=0;for(;d<a;)c+=String.fromCharCode.apply(String,g.slice(d,d+=X));return c}function ht(g,a,c){let d="";c=Math.min(g.length,c);for(let w=a;w<c;++w)d+=String.fromCharCode(g[w]&127);return d}function ct(g,a,c){let d="";c=Math.min(g.length,c);for(let w=a;w<c;++w)d+=String.fromCharCode(g[w]);return d}function ze(g,a,c){let d=g.length;(!a||a<0)&&(a=0),(!c||c<0||c>d)&&(c=d);let w="";for(let k=a;k<c;++k)w+=N[g[k]];return w}function je(g,a,c){let d=g.slice(a,c),w="";for(let k=0;k<d.length-1;k+=2)w+=String.fromCharCode(d[k]+d[k+1]*256);return w}o.prototype.slice=function(a,c){let d=this.length;a=~~a,c=c===void 0?d:~~c,a<0?(a+=d,a<0&&(a=0)):a>d&&(a=d),c<0?(c+=d,c<0&&(c=0)):c>d&&(c=d),c<a&&(c=a);let w=this.subarray(a,c);return Object.setPrototypeOf(w,o.prototype),w};function Pe(g,a,c){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+a>c)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(a,c,d){a=a>>>0,c=c>>>0,d||Pe(a,c,this.length);let w=this[a],k=1,I=0;for(;++I<c&&(k*=256);)w+=this[a+I]*k;return w},o.prototype.readUintBE=o.prototype.readUIntBE=function(a,c,d){a=a>>>0,c=c>>>0,d||Pe(a,c,this.length);let w=this[a+--c],k=1;for(;c>0&&(k*=256);)w+=this[a+--c]*k;return w},o.prototype.readUint8=o.prototype.readUInt8=function(a,c){return a=a>>>0,c||Pe(a,1,this.length),this[a]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(a,c){return a=a>>>0,c||Pe(a,2,this.length),this[a]|this[a+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(a,c){return a=a>>>0,c||Pe(a,2,this.length),this[a]<<8|this[a+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(a,c){return a=a>>>0,c||Pe(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(a,c){return a=a>>>0,c||Pe(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},o.prototype.readBigUInt64LE=z(function(a){a=a>>>0,Re(a,"offset");let c=this[a],d=this[a+7];(c===void 0||d===void 0)&&Mt(a,this.length-8);let w=c+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,k=this[++a]+this[++a]*2**8+this[++a]*2**16+d*2**24;return BigInt(w)+(BigInt(k)<<BigInt(32))}),o.prototype.readBigUInt64BE=z(function(a){a=a>>>0,Re(a,"offset");let c=this[a],d=this[a+7];(c===void 0||d===void 0)&&Mt(a,this.length-8);let w=c*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],k=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+d;return(BigInt(w)<<BigInt(32))+BigInt(k)}),o.prototype.readIntLE=function(a,c,d){a=a>>>0,c=c>>>0,d||Pe(a,c,this.length);let w=this[a],k=1,I=0;for(;++I<c&&(k*=256);)w+=this[a+I]*k;return k*=128,w>=k&&(w-=Math.pow(2,8*c)),w},o.prototype.readIntBE=function(a,c,d){a=a>>>0,c=c>>>0,d||Pe(a,c,this.length);let w=c,k=1,I=this[a+--w];for(;w>0&&(k*=256);)I+=this[a+--w]*k;return k*=128,I>=k&&(I-=Math.pow(2,8*c)),I},o.prototype.readInt8=function(a,c){return a=a>>>0,c||Pe(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},o.prototype.readInt16LE=function(a,c){a=a>>>0,c||Pe(a,2,this.length);let d=this[a]|this[a+1]<<8;return d&32768?d|4294901760:d},o.prototype.readInt16BE=function(a,c){a=a>>>0,c||Pe(a,2,this.length);let d=this[a+1]|this[a]<<8;return d&32768?d|4294901760:d},o.prototype.readInt32LE=function(a,c){return a=a>>>0,c||Pe(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},o.prototype.readInt32BE=function(a,c){return a=a>>>0,c||Pe(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},o.prototype.readBigInt64LE=z(function(a){a=a>>>0,Re(a,"offset");let c=this[a],d=this[a+7];(c===void 0||d===void 0)&&Mt(a,this.length-8);let w=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(d<<24);return(BigInt(w)<<BigInt(32))+BigInt(c+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),o.prototype.readBigInt64BE=z(function(a){a=a>>>0,Re(a,"offset");let c=this[a],d=this[a+7];(c===void 0||d===void 0)&&Mt(a,this.length-8);let w=(c<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(w)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+d)}),o.prototype.readFloatLE=function(a,c){return a=a>>>0,c||Pe(a,4,this.length),e.read(this,a,!0,23,4)},o.prototype.readFloatBE=function(a,c){return a=a>>>0,c||Pe(a,4,this.length),e.read(this,a,!1,23,4)},o.prototype.readDoubleLE=function(a,c){return a=a>>>0,c||Pe(a,8,this.length),e.read(this,a,!0,52,8)},o.prototype.readDoubleBE=function(a,c){return a=a>>>0,c||Pe(a,8,this.length),e.read(this,a,!1,52,8)};function et(g,a,c,d,w,k){if(!o.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>w||a<k)throw new RangeError('"value" argument is out of bounds');if(c+d>g.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(a,c,d,w){if(a=+a,c=c>>>0,d=d>>>0,!w){let ae=Math.pow(2,8*d)-1;et(this,a,c,d,ae,0)}let k=1,I=0;for(this[c]=a&255;++I<d&&(k*=256);)this[c+I]=a/k&255;return c+d},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(a,c,d,w){if(a=+a,c=c>>>0,d=d>>>0,!w){let ae=Math.pow(2,8*d)-1;et(this,a,c,d,ae,0)}let k=d-1,I=1;for(this[c+k]=a&255;--k>=0&&(I*=256);)this[c+k]=a/I&255;return c+d},o.prototype.writeUint8=o.prototype.writeUInt8=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,1,255,0),this[c]=a&255,c+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,2,65535,0),this[c]=a&255,this[c+1]=a>>>8,c+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,2,65535,0),this[c]=a>>>8,this[c+1]=a&255,c+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,4,4294967295,0),this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255,c+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,4,4294967295,0),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4};function wt(g,a,c,d,w){Rt(a,d,w,g,c,7);let k=Number(a&BigInt(4294967295));g[c++]=k,k=k>>8,g[c++]=k,k=k>>8,g[c++]=k,k=k>>8,g[c++]=k;let I=Number(a>>BigInt(32)&BigInt(4294967295));return g[c++]=I,I=I>>8,g[c++]=I,I=I>>8,g[c++]=I,I=I>>8,g[c++]=I,c}function mn(g,a,c,d,w){Rt(a,d,w,g,c,7);let k=Number(a&BigInt(4294967295));g[c+7]=k,k=k>>8,g[c+6]=k,k=k>>8,g[c+5]=k,k=k>>8,g[c+4]=k;let I=Number(a>>BigInt(32)&BigInt(4294967295));return g[c+3]=I,I=I>>8,g[c+2]=I,I=I>>8,g[c+1]=I,I=I>>8,g[c]=I,c+8}o.prototype.writeBigUInt64LE=z(function(a,c=0){return wt(this,a,c,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=z(function(a,c=0){return mn(this,a,c,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(a,c,d,w){if(a=+a,c=c>>>0,!w){let me=Math.pow(2,8*d-1);et(this,a,c,d,me-1,-me)}let k=0,I=1,ae=0;for(this[c]=a&255;++k<d&&(I*=256);)a<0&&ae===0&&this[c+k-1]!==0&&(ae=1),this[c+k]=(a/I>>0)-ae&255;return c+d},o.prototype.writeIntBE=function(a,c,d,w){if(a=+a,c=c>>>0,!w){let me=Math.pow(2,8*d-1);et(this,a,c,d,me-1,-me)}let k=d-1,I=1,ae=0;for(this[c+k]=a&255;--k>=0&&(I*=256);)a<0&&ae===0&&this[c+k+1]!==0&&(ae=1),this[c+k]=(a/I>>0)-ae&255;return c+d},o.prototype.writeInt8=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,1,127,-128),a<0&&(a=255+a+1),this[c]=a&255,c+1},o.prototype.writeInt16LE=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,2,32767,-32768),this[c]=a&255,this[c+1]=a>>>8,c+2},o.prototype.writeInt16BE=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,2,32767,-32768),this[c]=a>>>8,this[c+1]=a&255,c+2},o.prototype.writeInt32LE=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,4,2147483647,-2147483648),this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24,c+4},o.prototype.writeInt32BE=function(a,c,d){return a=+a,c=c>>>0,d||et(this,a,c,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4},o.prototype.writeBigInt64LE=z(function(a,c=0){return wt(this,a,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=z(function(a,c=0){return mn(this,a,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function dn(g,a,c,d,w,k){if(c+d>g.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function St(g,a,c,d,w){return a=+a,c=c>>>0,w||dn(g,a,c,4),e.write(g,a,c,d,23,4),c+4}o.prototype.writeFloatLE=function(a,c,d){return St(this,a,c,!0,d)},o.prototype.writeFloatBE=function(a,c,d){return St(this,a,c,!1,d)};function Bt(g,a,c,d,w){return a=+a,c=c>>>0,w||dn(g,a,c,8),e.write(g,a,c,d,52,8),c+8}o.prototype.writeDoubleLE=function(a,c,d){return Bt(this,a,c,!0,d)},o.prototype.writeDoubleBE=function(a,c,d){return Bt(this,a,c,!1,d)},o.prototype.copy=function(a,c,d,w){if(!o.isBuffer(a))throw new TypeError("argument should be a Buffer");if(d||(d=0),!w&&w!==0&&(w=this.length),c>=a.length&&(c=a.length),c||(c=0),w>0&&w<d&&(w=d),w===d||a.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),a.length-c<w-d&&(w=a.length-c+d);let k=w-d;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,d,w):Uint8Array.prototype.set.call(a,this.subarray(d,w),c),k},o.prototype.fill=function(a,c,d,w){if(typeof a=="string"){if(typeof c=="string"?(w=c,c=0,d=this.length):typeof d=="string"&&(w=d,d=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!o.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(a.length===1){let I=a.charCodeAt(0);(w==="utf8"&&I<128||w==="latin1")&&(a=I)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(c<0||this.length<c||this.length<d)throw new RangeError("Out of range index");if(d<=c)return this;c=c>>>0,d=d===void 0?this.length:d>>>0,a||(a=0);let k;if(typeof a=="number")for(k=c;k<d;++k)this[k]=a;else{let I=o.isBuffer(a)?a:o.from(a,w),ae=I.length;if(ae===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(k=0;k<d-c;++k)this[k+c]=I[k%ae]}return this};let Pt={};function en(g,a,c){Pt[g]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}en("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),en("ERR_INVALID_ARG_TYPE",function(g,a){return`The "${g}" argument must be of type number. Received type ${typeof a}`},TypeError),en("ERR_OUT_OF_RANGE",function(g,a,c){let d=`The value of "${g}" is out of range.`,w=c;return Number.isInteger(c)&&Math.abs(c)>2**32?w=tn(String(c)):typeof c=="bigint"&&(w=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(w=tn(w)),w+="n"),d+=` It must be ${a}. Received ${w}`,d},RangeError);function tn(g){let a="",c=g.length,d=g[0]==="-"?1:0;for(;c>=d+4;c-=3)a=`_${g.slice(c-3,c)}${a}`;return`${g.slice(0,c)}${a}`}function nn(g,a,c){Re(a,"offset"),(g[a]===void 0||g[a+c]===void 0)&&Mt(a,g.length-(c+1))}function Rt(g,a,c,d,w,k){if(g>c||g<a){let I=typeof a=="bigint"?"n":"",ae;throw k>3?a===0||a===BigInt(0)?ae=`>= 0${I} and < 2${I} ** ${(k+1)*8}${I}`:ae=`>= -(2${I} ** ${(k+1)*8-1}${I}) and < 2 ** ${(k+1)*8-1}${I}`:ae=`>= ${a}${I} and <= ${c}${I}`,new Pt.ERR_OUT_OF_RANGE("value",ae,g)}nn(d,w,k)}function Re(g,a){if(typeof g!="number")throw new Pt.ERR_INVALID_ARG_TYPE(a,"number",g)}function Mt(g,a,c){throw Math.floor(g)!==g?(Re(g,c),new Pt.ERR_OUT_OF_RANGE(c||"offset","an integer",g)):a<0?new Pt.ERR_BUFFER_OUT_OF_BOUNDS:new Pt.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${a}`,g)}let Kt=/[^+/0-9A-Za-z-_]/g;function Ft(g){if(g=g.split("=")[0],g=g.trim().replace(Kt,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Jt(g,a){a=a||1/0;let c,d=g.length,w=null,k=[];for(let I=0;I<d;++I){if(c=g.charCodeAt(I),c>55295&&c<57344){if(!w){if(c>56319){(a-=3)>-1&&k.push(239,191,189);continue}else if(I+1===d){(a-=3)>-1&&k.push(239,191,189);continue}w=c;continue}if(c<56320){(a-=3)>-1&&k.push(239,191,189),w=c;continue}c=(w-55296<<10|c-56320)+65536}else w&&(a-=3)>-1&&k.push(239,191,189);if(w=null,c<128){if((a-=1)<0)break;k.push(c)}else if(c<2048){if((a-=2)<0)break;k.push(c>>6|192,c&63|128)}else if(c<65536){if((a-=3)<0)break;k.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((a-=4)<0)break;k.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return k}function Ct(g){let a=[];for(let c=0;c<g.length;++c)a.push(g.charCodeAt(c)&255);return a}function rn(g,a){let c,d,w,k=[];for(let I=0;I<g.length&&!((a-=2)<0);++I)c=g.charCodeAt(I),d=c>>8,w=c%256,k.push(w),k.push(d);return k}function Ze(g){return n.toByteArray(Ft(g))}function At(g,a,c,d){let w;for(w=0;w<d&&!(w+c>=a.length||w>=g.length);++w)a[w+c]=g[w];return w}function Je(g,a){return g instanceof a||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===a.name}function yt(g){return g!==g}let N=function(){let g="0123456789abcdef",a=new Array(256);for(let c=0;c<16;++c){let d=c*16;for(let w=0;w<16;++w)a[d+w]=g[c]+g[w]}return a}();function z(g){return typeof BigInt>"u"?ue:g}function ue(){throw new Error("BigInt not supported")}return fr}var di,cf,ro,uf,fr,lf,pr,K,cb,ub,df=lr(()=>{E();D();x();R();S();di={},cf=!1;ro={},uf=!1;fr={},lf=!1;pr=nm();pr.Buffer;pr.SlowBuffer;pr.INSPECT_MAX_BYTES;pr.kMaxLength;K=pr.Buffer,cb=pr.INSPECT_MAX_BYTES,ub=pr.kMaxLength});var R=lr(()=>{df()});var Ir=Z(Nt=>{"use strict";E();D();x();R();S();Object.defineProperty(Nt,"__esModule",{value:!0});Nt.stringArray=Nt.array=Nt.func=Nt.error=Nt.number=Nt.string=Nt.boolean=void 0;function rm(n){return n===!0||n===!1}Nt.boolean=rm;function ff(n){return typeof n=="string"||n instanceof String}Nt.string=ff;function im(n){return typeof n=="number"||n instanceof Number}Nt.number=im;function om(n){return n instanceof Error}Nt.error=om;function sm(n){return typeof n=="function"}Nt.func=sm;function pf(n){return Array.isArray(n)}Nt.array=pf;function am(n){return pf(n)&&n.every(e=>ff(e))}Nt.stringArray=am});var ea=Z(pe=>{"use strict";E();D();x();R();S();Object.defineProperty(pe,"__esModule",{value:!0});pe.Message=pe.NotificationType9=pe.NotificationType8=pe.NotificationType7=pe.NotificationType6=pe.NotificationType5=pe.NotificationType4=pe.NotificationType3=pe.NotificationType2=pe.NotificationType1=pe.NotificationType0=pe.NotificationType=pe.RequestType9=pe.RequestType8=pe.RequestType7=pe.RequestType6=pe.RequestType5=pe.RequestType4=pe.RequestType3=pe.RequestType2=pe.RequestType1=pe.RequestType=pe.RequestType0=pe.AbstractMessageSignature=pe.ParameterStructures=pe.ResponseError=pe.ErrorCodes=void 0;var hr=Ir(),hf;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(hf=pe.ErrorCodes||(pe.ErrorCodes={}));var fi=class extends Error{constructor(e,t,r){super(t),this.code=hr.number(e)?e:hf.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,fi.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};pe.ResponseError=fi;var Tt=class{constructor(e){this.kind=e}static is(e){return e===Tt.auto||e===Tt.byName||e===Tt.byPosition}toString(){return this.kind}};pe.ParameterStructures=Tt;Tt.auto=new Tt("auto");Tt.byPosition=new Tt("byPosition");Tt.byName=new Tt("byName");var ot=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Tt.auto}};pe.AbstractMessageSignature=ot;var Ps=class extends ot{constructor(e){super(e,0)}};pe.RequestType0=Ps;var Fs=class extends ot{constructor(e,t=Tt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};pe.RequestType=Fs;var qs=class extends ot{constructor(e,t=Tt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};pe.RequestType1=qs;var Qs=class extends ot{constructor(e){super(e,2)}};pe.RequestType2=Qs;var Is=class extends ot{constructor(e){super(e,3)}};pe.RequestType3=Is;var Os=class extends ot{constructor(e){super(e,4)}};pe.RequestType4=Os;var Ms=class extends ot{constructor(e){super(e,5)}};pe.RequestType5=Ms;var Ls=class extends ot{constructor(e){super(e,6)}};pe.RequestType6=Ls;var Ns=class extends ot{constructor(e){super(e,7)}};pe.RequestType7=Ns;var Us=class extends ot{constructor(e){super(e,8)}};pe.RequestType8=Us;var js=class extends ot{constructor(e){super(e,9)}};pe.RequestType9=js;var Hs=class extends ot{constructor(e,t=Tt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};pe.NotificationType=Hs;var Ks=class extends ot{constructor(e){super(e,0)}};pe.NotificationType0=Ks;var Ws=class extends ot{constructor(e,t=Tt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};pe.NotificationType1=Ws;var $s=class extends ot{constructor(e){super(e,2)}};pe.NotificationType2=$s;var Gs=class extends ot{constructor(e){super(e,3)}};pe.NotificationType3=Gs;var zs=class extends ot{constructor(e){super(e,4)}};pe.NotificationType4=zs;var Js=class extends ot{constructor(e){super(e,5)}};pe.NotificationType5=Js;var Vs=class extends ot{constructor(e){super(e,6)}};pe.NotificationType6=Vs;var Zs=class extends ot{constructor(e){super(e,7)}};pe.NotificationType7=Zs;var Xs=class extends ot{constructor(e){super(e,8)}};pe.NotificationType8=Xs;var Ys=class extends ot{constructor(e){super(e,9)}};pe.NotificationType9=Ys;var cm;(function(n){function e(i){let s=i;return s&&hr.string(s.method)&&(hr.string(s.id)||hr.number(s.id))}n.isRequest=e;function t(i){let s=i;return s&&hr.string(s.method)&&i.id===void 0}n.isNotification=t;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(hr.string(s.id)||hr.number(s.id)||s.id===null)}n.isResponse=r})(cm=pe.Message||(pe.Message={}))});var na=Z(Un=>{"use strict";E();D();x();R();S();var gf;Object.defineProperty(Un,"__esModule",{value:!0});Un.LRUCache=Un.LinkedMap=Un.Touch=void 0;var Wt;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(Wt=Un.Touch||(Un.Touch={}));var io=class{constructor(){this[gf]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=Wt.None){let r=this._map.get(e);if(r)return t!==Wt.None&&this.touch(r,t),r.value}set(e,t,r=Wt.None){let i=this._map.get(e);if(i)i.value=t,r!==Wt.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case Wt.None:this.addItemLast(i);break;case Wt.First:this.addItemFirst(i);break;case Wt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}[(gf=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Wt.First&&t!==Wt.Last)){if(t===Wt.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Wt.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};Un.LinkedMap=io;var ta=class extends io{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Wt.AsNew){return super.get(e,t)}peek(e){return super.get(e,Wt.None)}set(e,t){return super.set(e,t,Wt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Un.LRUCache=ta});var mf=Z(pi=>{"use strict";E();D();x();R();S();Object.defineProperty(pi,"__esModule",{value:!0});pi.Disposable=void 0;var um;(function(n){function e(t){return{dispose:t}}n.create=e})(um=pi.Disposable||(pi.Disposable={}))});var tr=Z(oa=>{"use strict";E();D();x();R();S();Object.defineProperty(oa,"__esModule",{value:!0});var ra;function ia(){if(ra===void 0)throw new Error("No runtime abstraction layer installed");return ra}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");ra=t}n.install=e})(ia||(ia={}));oa.default=ia});var Mr=Z(gr=>{"use strict";E();D();x();R();S();Object.defineProperty(gr,"__esModule",{value:!0});gr.Emitter=gr.Event=void 0;var lm=tr(),dm;(function(n){let e={dispose(){}};n.None=function(){return e}})(dm=gr.Event||(gr.Event={}));var sa=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{t.push(r[s].apply(i[s],e))}catch(u){(0,lm.default)().console.error(u)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Or=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new sa),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=Or._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};gr.Emitter=Or;Or._noop=function(){}});var so=Z(mr=>{"use strict";E();D();x();R();S();Object.defineProperty(mr,"__esModule",{value:!0});mr.CancellationTokenSource=mr.CancellationToken=void 0;var fm=tr(),pm=Ir(),aa=Mr(),ca;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:aa.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:aa.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||pm.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(ca=mr.CancellationToken||(mr.CancellationToken={}));var hm=Object.freeze(function(n,e){let t=(0,fm.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),oo=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?hm:(this._emitter||(this._emitter=new aa.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},ua=class{get token(){return this._token||(this._token=new oo),this._token}cancel(){this._token?this._token.cancel():this._token=ca.Cancelled}dispose(){this._token?this._token instanceof oo&&this._token.dispose():this._token=ca.None}};mr.CancellationTokenSource=ua});var yf=Z(Lr=>{"use strict";E();D();x();R();S();Object.defineProperty(Lr,"__esModule",{value:!0});Lr.SharedArrayReceiverStrategy=Lr.SharedArraySenderStrategy=void 0;var gm=so(),hi;(function(n){n.Continue=0,n.Cancelled=1})(hi||(hi={}));var la=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=hi.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,hi.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Lr.SharedArraySenderStrategy=la;var da=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===hi.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},fa=class{constructor(e){this.token=new da(e)}cancel(){}dispose(){}},pa=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new gm.CancellationTokenSource:new fa(t)}};Lr.SharedArrayReceiverStrategy=pa});var ga=Z(ao=>{"use strict";E();D();x();R();S();Object.defineProperty(ao,"__esModule",{value:!0});ao.Semaphore=void 0;var mm=tr(),ha=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,mm.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};ao.Semaphore=ha});var vf=Z(jn=>{"use strict";E();D();x();R();S();Object.defineProperty(jn,"__esModule",{value:!0});jn.ReadableStreamMessageReader=jn.AbstractMessageReader=jn.MessageReader=void 0;var ya=tr(),Nr=Ir(),ma=Mr(),ym=ga(),vm;(function(n){function e(t){let r=t;return r&&Nr.func(r.listen)&&Nr.func(r.dispose)&&Nr.func(r.onError)&&Nr.func(r.onClose)&&Nr.func(r.onPartialMessage)}n.is=e})(vm=jn.MessageReader||(jn.MessageReader={}));var co=class{constructor(){this.errorEmitter=new ma.Emitter,this.closeEmitter=new ma.Emitter,this.partialMessageEmitter=new ma.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Nr.string(e.message)?e.message:"unknown"}`)}};jn.AbstractMessageReader=co;var va;(function(n){function e(t){let r,i,s,o=new Map,u,p=new Map;if(t===void 0||typeof t=="string")r=t??"utf-8";else{if(r=t.charset??"utf-8",t.contentDecoder!==void 0&&(s=t.contentDecoder,o.set(s.name,s)),t.contentDecoders!==void 0)for(let h of t.contentDecoders)o.set(h.name,h);if(t.contentTypeDecoder!==void 0&&(u=t.contentTypeDecoder,p.set(u.name,u)),t.contentTypeDecoders!==void 0)for(let h of t.contentTypeDecoders)p.set(h.name,h)}return u===void 0&&(u=(0,ya.default)().applicationJson.decoder,p.set(u.name,u)),{charset:r,contentDecoder:s,contentDecoders:o,contentTypeDecoder:u,contentTypeDecoders:p}}n.fromOptions=e})(va||(va={}));var wa=class extends co{constructor(e,t){super(),this.readable=e,this.options=va.fromOptions(t),this.buffer=(0,ya.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new ym.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=s}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,ya.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};jn.ReadableStreamMessageReader=wa});var _f=Z(Hn=>{"use strict";E();D();x();R();S();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.WriteableStreamMessageWriter=Hn.AbstractMessageWriter=Hn.MessageWriter=void 0;var wf=tr(),gi=Ir(),wm=ga(),Cf=Mr(),Cm="Content-Length: ",Af=`\r
`,Am;(function(n){function e(t){let r=t;return r&&gi.func(r.dispose)&&gi.func(r.onClose)&&gi.func(r.onError)&&gi.func(r.write)}n.is=e})(Am=Hn.MessageWriter||(Hn.MessageWriter={}));var uo=class{constructor(){this.errorEmitter=new Cf.Emitter,this.closeEmitter=new Cf.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${gi.string(e.message)?e.message:"unknown"}`)}};Hn.AbstractMessageWriter=uo;var Ca;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,wf.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,wf.default)().applicationJson.encoder}}n.fromOptions=e})(Ca||(Ca={}));var Aa=class extends uo{constructor(e,t){super(),this.writable=e,this.options=Ca.fromOptions(t),this.errorCount=0,this.writeSemaphore=new wm.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Cm,r.byteLength.toString(),Af),i.push(Af),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};Hn.WriteableStreamMessageWriter=Aa});var bf=Z(lo=>{"use strict";E();D();x();R();S();Object.defineProperty(lo,"__esModule",{value:!0});lo.AbstractMessageBuffer=void 0;var _m=13,bm=10,Em=`\r
`,_a=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,r=0,i=0,s=0;e:for(;r<this._chunks.length;){let h=this._chunks[r];i=0;t:for(;i<h.length;){switch(h[i]){case _m:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case bm:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}s+=h.byteLength,r++}if(t!==4)return;let o=this._read(s+i),u=new Map,p=this.toString(o,"ascii").split(Em);if(p.length<2)return u;for(let h=0;h<p.length-2;h++){let C=p[h],T=C.indexOf(":");if(T===-1)throw new Error("Message header must separate key and value using :");let A=C.substr(0,T),B=C.substr(T+1).trim();u.set(e?A.toLowerCase():A,B)}return u}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);t.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};lo.AbstractMessageBuffer=_a});var kf=Z(fe=>{"use strict";E();D();x();R();S();Object.defineProperty(fe,"__esModule",{value:!0});fe.createMessageConnection=fe.ConnectionOptions=fe.MessageStrategy=fe.CancellationStrategy=fe.CancellationSenderStrategy=fe.CancellationReceiverStrategy=fe.RequestCancellationReceiverStrategy=fe.IdCancellationReceiverStrategy=fe.ConnectionStrategy=fe.ConnectionError=fe.ConnectionErrors=fe.LogTraceNotification=fe.SetTraceNotification=fe.TraceFormat=fe.TraceValues=fe.Trace=fe.NullLogger=fe.ProgressType=fe.ProgressToken=void 0;var Ef=tr(),ut=Ir(),Ae=ea(),Df=na(),mi=Mr(),ba=so(),vi;(function(n){n.type=new Ae.NotificationType("$/cancelRequest")})(vi||(vi={}));var xf;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(xf=fe.ProgressToken||(fe.ProgressToken={}));var yi;(function(n){n.type=new Ae.NotificationType("$/progress")})(yi||(yi={}));var Ea=class{constructor(){}};fe.ProgressType=Ea;var Da;(function(n){function e(t){return ut.func(t)}n.is=e})(Da||(Da={}));fe.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Ge;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(Ge=fe.Trace||(fe.Trace={}));var Dm;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(Dm=fe.TraceValues||(fe.TraceValues={}));(function(n){function e(r){if(!ut.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(Ge=fe.Trace||(fe.Trace={}));var vn;(function(n){n.Text="text",n.JSON="json"})(vn=fe.TraceFormat||(fe.TraceFormat={}));(function(n){function e(t){return ut.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(vn=fe.TraceFormat||(fe.TraceFormat={}));var Sf;(function(n){n.type=new Ae.NotificationType("$/setTrace")})(Sf=fe.SetTraceNotification||(fe.SetTraceNotification={}));var xa;(function(n){n.type=new Ae.NotificationType("$/logTrace")})(xa=fe.LogTraceNotification||(fe.LogTraceNotification={}));var fo;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(fo=fe.ConnectionErrors||(fe.ConnectionErrors={}));var nr=class extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,nr.prototype)}};fe.ConnectionError=nr;var Rf;(function(n){function e(t){let r=t;return r&&ut.func(r.cancelUndispatched)}n.is=e})(Rf=fe.ConnectionStrategy||(fe.ConnectionStrategy={}));var Ta;(function(n){function e(t){let r=t;return r&&(r.kind===void 0||r.kind==="id")&&ut.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ut.func(r.dispose))}n.is=e})(Ta=fe.IdCancellationReceiverStrategy||(fe.IdCancellationReceiverStrategy={}));var Tf;(function(n){function e(t){let r=t;return r&&r.kind==="request"&&ut.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ut.func(r.dispose))}n.is=e})(Tf=fe.RequestCancellationReceiverStrategy||(fe.RequestCancellationReceiverStrategy={}));var Sa;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new ba.CancellationTokenSource}});function e(t){return Ta.is(t)||Tf.is(t)}n.is=e})(Sa=fe.CancellationReceiverStrategy||(fe.CancellationReceiverStrategy={}));var Ra;(function(n){n.Message=Object.freeze({sendCancellation(t,r){return t.sendNotification(vi.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&ut.func(r.sendCancellation)&&ut.func(r.cleanup)}n.is=e})(Ra=fe.CancellationSenderStrategy||(fe.CancellationSenderStrategy={}));var ka;(function(n){n.Message=Object.freeze({receiver:Sa.Message,sender:Ra.Message});function e(t){let r=t;return r&&Sa.is(r.receiver)&&Ra.is(r.sender)}n.is=e})(ka=fe.CancellationStrategy||(fe.CancellationStrategy={}));var Ba;(function(n){function e(t){let r=t;return r&&ut.func(r.handleMessage)}n.is=e})(Ba=fe.MessageStrategy||(fe.MessageStrategy={}));var xm;(function(n){function e(t){let r=t;return r&&(ka.is(r.cancellationStrategy)||Rf.is(r.connectionStrategy)||Ba.is(r.messageStrategy))}n.is=e})(xm=fe.ConnectionOptions||(fe.ConnectionOptions={}));var wn;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(wn||(wn={}));function Sm(n,e,t,r){let i=t!==void 0?t:fe.NullLogger,s=0,o=0,u=0,p="2.0",h,C=new Map,T,A=new Map,B=new Map,_,M=new Df.LinkedMap,U=new Map,Y=new Set,le=new Map,ie=Ge.Off,ye=vn.Text,te,de=wn.New,re=new mi.Emitter,he=new mi.Emitter,be=new mi.Emitter,nt=new mi.Emitter,rt=new mi.Emitter,at=r&&r.cancellationStrategy?r.cancellationStrategy:ka.Message;function kt(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function X(d){return d===null?"res-unknown-"+(++u).toString():"res-"+d.toString()}function Oe(){return"not-"+(++o).toString()}function ht(d,w){Ae.Message.isRequest(w)?d.set(kt(w.id),w):Ae.Message.isResponse(w)?d.set(X(w.id),w):d.set(Oe(),w)}function ct(d){}function ze(){return de===wn.Listening}function je(){return de===wn.Closed}function Pe(){return de===wn.Disposed}function et(){(de===wn.New||de===wn.Listening)&&(de=wn.Closed,he.fire(void 0))}function wt(d){re.fire([d,void 0,void 0])}function mn(d){re.fire(d)}n.onClose(et),n.onError(wt),e.onClose(et),e.onError(mn);function dn(){_||M.size===0||(_=(0,Ef.default)().timer.setImmediate(()=>{_=void 0,Bt()}))}function St(d){Ae.Message.isRequest(d)?en(d):Ae.Message.isNotification(d)?nn(d):Ae.Message.isResponse(d)?tn(d):Rt(d)}function Bt(){if(M.size===0)return;let d=M.shift();try{let w=r?.messageStrategy;Ba.is(w)?w.handleMessage(d,St):St(d)}finally{dn()}}let Pt=d=>{try{if(Ae.Message.isNotification(d)&&d.method===vi.type.method){let w=d.params.id,k=kt(w),I=M.get(k);if(Ae.Message.isRequest(I)){let me=r?.connectionStrategy,ve=me&&me.cancelUndispatched?me.cancelUndispatched(I,ct):void 0;if(ve&&(ve.error!==void 0||ve.result!==void 0)){M.delete(k),le.delete(w),ve.id=I.id,Ft(ve,d.method,Date.now()),e.write(ve).catch(()=>i.error("Sending response for canceled message failed."));return}}let ae=le.get(w);if(ae!==void 0){ae.cancel(),Ct(d);return}else Y.add(w)}ht(M,d)}finally{dn()}};function en(d){if(Pe())return;function w(ce,Le,m){let L={jsonrpc:p,id:d.id};ce instanceof Ae.ResponseError?L.error=ce.toJson():L.result=ce===void 0?null:ce,Ft(L,Le,m),e.write(L).catch(()=>i.error("Sending response failed."))}function k(ce,Le,m){let L={jsonrpc:p,id:d.id,error:ce.toJson()};Ft(L,Le,m),e.write(L).catch(()=>i.error("Sending response failed."))}function I(ce,Le,m){ce===void 0&&(ce=null);let L={jsonrpc:p,id:d.id,result:ce};Ft(L,Le,m),e.write(L).catch(()=>i.error("Sending response failed."))}Jt(d);let ae=C.get(d.method),me,ve;ae&&(me=ae.type,ve=ae.handler);let Ce=Date.now();if(ve||h){let ce=d.id??String(Date.now()),Le=Ta.is(at.receiver)?at.receiver.createCancellationTokenSource(ce):at.receiver.createCancellationTokenSource(d);d.id!==null&&Y.has(d.id)&&Le.cancel(),d.id!==null&&le.set(ce,Le);try{let m;if(ve)if(d.params===void 0){if(me!==void 0&&me.numberOfParams!==0){k(new Ae.ResponseError(Ae.ErrorCodes.InvalidParams,`Request ${d.method} defines ${me.numberOfParams} params but received none.`),d.method,Ce);return}m=ve(Le.token)}else if(Array.isArray(d.params)){if(me!==void 0&&me.parameterStructures===Ae.ParameterStructures.byName){k(new Ae.ResponseError(Ae.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,Ce);return}m=ve(...d.params,Le.token)}else{if(me!==void 0&&me.parameterStructures===Ae.ParameterStructures.byPosition){k(new Ae.ResponseError(Ae.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,Ce);return}m=ve(d.params,Le.token)}else h&&(m=h(d.method,d.params,Le.token));let L=m;m?L.then?L.then(oe=>{le.delete(ce),w(oe,d.method,Ce)},oe=>{le.delete(ce),oe instanceof Ae.ResponseError?k(oe,d.method,Ce):oe&&ut.string(oe.message)?k(new Ae.ResponseError(Ae.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${oe.message}`),d.method,Ce):k(new Ae.ResponseError(Ae.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,Ce)}):(le.delete(ce),w(m,d.method,Ce)):(le.delete(ce),I(m,d.method,Ce))}catch(m){le.delete(ce),m instanceof Ae.ResponseError?w(m,d.method,Ce):m&&ut.string(m.message)?k(new Ae.ResponseError(Ae.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${m.message}`),d.method,Ce):k(new Ae.ResponseError(Ae.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,Ce)}}else k(new Ae.ResponseError(Ae.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,Ce)}function tn(d){if(!Pe())if(d.id===null)d.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let w=d.id,k=U.get(w);if(rn(d,k),k!==void 0){U.delete(w);try{if(d.error){let I=d.error;k.reject(new Ae.ResponseError(I.code,I.message,I.data))}else if(d.result!==void 0)k.resolve(d.result);else throw new Error("Should never happen.")}catch(I){I.message?i.error(`Response handler '${k.method}' failed with message: ${I.message}`):i.error(`Response handler '${k.method}' failed unexpectedly.`)}}}}function nn(d){if(Pe())return;let w,k;if(d.method===vi.type.method){let I=d.params.id;Y.delete(I),Ct(d);return}else{let I=A.get(d.method);I&&(k=I.handler,w=I.type)}if(k||T)try{if(Ct(d),k)if(d.params===void 0)w!==void 0&&w.numberOfParams!==0&&w.parameterStructures!==Ae.ParameterStructures.byName&&i.error(`Notification ${d.method} defines ${w.numberOfParams} params but received none.`),k();else if(Array.isArray(d.params)){let I=d.params;d.method===yi.type.method&&I.length===2&&xf.is(I[0])?k({token:I[0],value:I[1]}):(w!==void 0&&(w.parameterStructures===Ae.ParameterStructures.byName&&i.error(`Notification ${d.method} defines parameters by name but received parameters by position`),w.numberOfParams!==d.params.length&&i.error(`Notification ${d.method} defines ${w.numberOfParams} params but received ${I.length} arguments`)),k(...I))}else w!==void 0&&w.parameterStructures===Ae.ParameterStructures.byPosition&&i.error(`Notification ${d.method} defines parameters by position but received parameters by name`),k(d.params);else T&&T(d.method,d.params)}catch(I){I.message?i.error(`Notification handler '${d.method}' failed with message: ${I.message}`):i.error(`Notification handler '${d.method}' failed unexpectedly.`)}else be.fire(d)}function Rt(d){if(!d){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);let w=d;if(ut.string(w.id)||ut.number(w.id)){let k=w.id,I=U.get(k);I&&I.reject(new Error("The received response has neither a result nor an error property."))}}function Re(d){if(d!=null)switch(ie){case Ge.Verbose:return JSON.stringify(d,null,4);case Ge.Compact:return JSON.stringify(d);default:return}}function Mt(d){if(!(ie===Ge.Off||!te))if(ye===vn.Text){let w;(ie===Ge.Verbose||ie===Ge.Compact)&&d.params&&(w=`Params: ${Re(d.params)}

`),te.log(`Sending request '${d.method} - (${d.id})'.`,w)}else Ze("send-request",d)}function Kt(d){if(!(ie===Ge.Off||!te))if(ye===vn.Text){let w;(ie===Ge.Verbose||ie===Ge.Compact)&&(d.params?w=`Params: ${Re(d.params)}

`:w=`No parameters provided.

`),te.log(`Sending notification '${d.method}'.`,w)}else Ze("send-notification",d)}function Ft(d,w,k){if(!(ie===Ge.Off||!te))if(ye===vn.Text){let I;(ie===Ge.Verbose||ie===Ge.Compact)&&(d.error&&d.error.data?I=`Error data: ${Re(d.error.data)}

`:d.result?I=`Result: ${Re(d.result)}

`:d.error===void 0&&(I=`No result returned.

`)),te.log(`Sending response '${w} - (${d.id})'. Processing request took ${Date.now()-k}ms`,I)}else Ze("send-response",d)}function Jt(d){if(!(ie===Ge.Off||!te))if(ye===vn.Text){let w;(ie===Ge.Verbose||ie===Ge.Compact)&&d.params&&(w=`Params: ${Re(d.params)}

`),te.log(`Received request '${d.method} - (${d.id})'.`,w)}else Ze("receive-request",d)}function Ct(d){if(!(ie===Ge.Off||!te||d.method===xa.type.method))if(ye===vn.Text){let w;(ie===Ge.Verbose||ie===Ge.Compact)&&(d.params?w=`Params: ${Re(d.params)}

`:w=`No parameters provided.

`),te.log(`Received notification '${d.method}'.`,w)}else Ze("receive-notification",d)}function rn(d,w){if(!(ie===Ge.Off||!te))if(ye===vn.Text){let k;if((ie===Ge.Verbose||ie===Ge.Compact)&&(d.error&&d.error.data?k=`Error data: ${Re(d.error.data)}

`:d.result?k=`Result: ${Re(d.result)}

`:d.error===void 0&&(k=`No result returned.

`)),w){let I=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";te.log(`Received response '${w.method} - (${d.id})' in ${Date.now()-w.timerStart}ms.${I}`,k)}else te.log(`Received response ${d.id} without active response promise.`,k)}else Ze("receive-response",d)}function Ze(d,w){if(!te||ie===Ge.Off)return;let k={isLSPMessage:!0,type:d,message:w,timestamp:Date.now()};te.log(k)}function At(){if(je())throw new nr(fo.Closed,"Connection is closed.");if(Pe())throw new nr(fo.Disposed,"Connection is disposed.")}function Je(){if(ze())throw new nr(fo.AlreadyListening,"Connection is already listening")}function yt(){if(!ze())throw new Error("Call listen() first.")}function N(d){return d===void 0?null:d}function z(d){if(d!==null)return d}function ue(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function g(d,w){switch(d){case Ae.ParameterStructures.auto:return ue(w)?z(w):[N(w)];case Ae.ParameterStructures.byName:if(!ue(w))throw new Error("Received parameters by name but param is not an object literal.");return z(w);case Ae.ParameterStructures.byPosition:return[N(w)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function a(d,w){let k,I=d.numberOfParams;switch(I){case 0:k=void 0;break;case 1:k=g(d.parameterStructures,w[0]);break;default:k=[];for(let ae=0;ae<w.length&&ae<I;ae++)k.push(N(w[ae]));if(w.length<I)for(let ae=w.length;ae<I;ae++)k.push(null);break}return k}let c={sendNotification:(d,...w)=>{At();let k,I;if(ut.string(d)){k=d;let me=w[0],ve=0,Ce=Ae.ParameterStructures.auto;Ae.ParameterStructures.is(me)&&(ve=1,Ce=me);let ce=w.length,Le=ce-ve;switch(Le){case 0:I=void 0;break;case 1:I=g(Ce,w[ve]);break;default:if(Ce===Ae.ParameterStructures.byName)throw new Error(`Received ${Le} parameters for 'by Name' notification parameter structure.`);I=w.slice(ve,ce).map(m=>N(m));break}}else{let me=w;k=d.method,I=a(d,me)}let ae={jsonrpc:p,method:k,params:I};return Kt(ae),e.write(ae).catch(me=>{throw i.error("Sending notification failed."),me})},onNotification:(d,w)=>{At();let k;return ut.func(d)?T=d:w&&(ut.string(d)?(k=d,A.set(d,{type:void 0,handler:w})):(k=d.method,A.set(d.method,{type:d,handler:w}))),{dispose:()=>{k!==void 0?A.delete(k):T=void 0}}},onProgress:(d,w,k)=>{if(B.has(w))throw new Error(`Progress handler for token ${w} already registered`);return B.set(w,k),{dispose:()=>{B.delete(w)}}},sendProgress:(d,w,k)=>c.sendNotification(yi.type,{token:w,value:k}),onUnhandledProgress:nt.event,sendRequest:(d,...w)=>{At(),yt();let k,I,ae;if(ut.string(d)){k=d;let ce=w[0],Le=w[w.length-1],m=0,L=Ae.ParameterStructures.auto;Ae.ParameterStructures.is(ce)&&(m=1,L=ce);let oe=w.length;ba.CancellationToken.is(Le)&&(oe=oe-1,ae=Le);let Te=oe-m;switch(Te){case 0:I=void 0;break;case 1:I=g(L,w[m]);break;default:if(L===Ae.ParameterStructures.byName)throw new Error(`Received ${Te} parameters for 'by Name' request parameter structure.`);I=w.slice(m,oe).map(q=>N(q));break}}else{let ce=w;k=d.method,I=a(d,ce);let Le=d.numberOfParams;ae=ba.CancellationToken.is(ce[Le])?ce[Le]:void 0}let me=s++,ve;ae&&(ve=ae.onCancellationRequested(()=>{let ce=at.sender.sendCancellation(c,me);return ce===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${me}`),Promise.resolve()):ce.catch(()=>{i.log(`Sending cancellation messages for id ${me} failed`)})}));let Ce={jsonrpc:p,id:me,method:k,params:I};return Mt(Ce),typeof at.sender.enableCancellation=="function"&&at.sender.enableCancellation(Ce),new Promise(async(ce,Le)=>{let m=Te=>{ce(Te),at.sender.cleanup(me),ve?.dispose()},L=Te=>{Le(Te),at.sender.cleanup(me),ve?.dispose()},oe={method:k,timerStart:Date.now(),resolve:m,reject:L};try{await e.write(Ce),U.set(me,oe)}catch(Te){throw i.error("Sending request failed."),oe.reject(new Ae.ResponseError(Ae.ErrorCodes.MessageWriteError,Te.message?Te.message:"Unknown reason")),Te}})},onRequest:(d,w)=>{At();let k=null;return Da.is(d)?(k=void 0,h=d):ut.string(d)?(k=null,w!==void 0&&(k=d,C.set(d,{handler:w,type:void 0}))):w!==void 0&&(k=d.method,C.set(d.method,{type:d,handler:w})),{dispose:()=>{k!==null&&(k!==void 0?C.delete(k):h=void 0)}}},hasPendingResponse:()=>U.size>0,trace:async(d,w,k)=>{let I=!1,ae=vn.Text;k!==void 0&&(ut.boolean(k)?I=k:(I=k.sendNotification||!1,ae=k.traceFormat||vn.Text)),ie=d,ye=ae,ie===Ge.Off?te=void 0:te=w,I&&!je()&&!Pe()&&await c.sendNotification(Sf.type,{value:Ge.toString(d)})},onError:re.event,onClose:he.event,onUnhandledNotification:be.event,onDispose:rt.event,end:()=>{e.end()},dispose:()=>{if(Pe())return;de=wn.Disposed,rt.fire(void 0);let d=new Ae.ResponseError(Ae.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let w of U.values())w.reject(d);U=new Map,le=new Map,Y=new Set,M=new Df.LinkedMap,ut.func(e.dispose)&&e.dispose(),ut.func(n.dispose)&&n.dispose()},listen:()=>{At(),Je(),de=wn.Listening,n.listen(Pt)},inspect:()=>{(0,Ef.default)().console.log("inspect")}};return c.onNotification(xa.type,d=>{if(ie===Ge.Off||!te)return;let w=ie===Ge.Verbose||ie===Ge.Compact;te.log(d.message,w?d.verbose:void 0)}),c.onNotification(yi.type,d=>{let w=B.get(d.token);w?w(d.value):nt.fire(d)}),c}fe.createMessageConnection=Sm});var po=Z(G=>{"use strict";E();D();x();R();S();Object.defineProperty(G,"__esModule",{value:!0});G.ProgressType=G.ProgressToken=G.createMessageConnection=G.NullLogger=G.ConnectionOptions=G.ConnectionStrategy=G.AbstractMessageBuffer=G.WriteableStreamMessageWriter=G.AbstractMessageWriter=G.MessageWriter=G.ReadableStreamMessageReader=G.AbstractMessageReader=G.MessageReader=G.SharedArrayReceiverStrategy=G.SharedArraySenderStrategy=G.CancellationToken=G.CancellationTokenSource=G.Emitter=G.Event=G.Disposable=G.LRUCache=G.Touch=G.LinkedMap=G.ParameterStructures=G.NotificationType9=G.NotificationType8=G.NotificationType7=G.NotificationType6=G.NotificationType5=G.NotificationType4=G.NotificationType3=G.NotificationType2=G.NotificationType1=G.NotificationType0=G.NotificationType=G.ErrorCodes=G.ResponseError=G.RequestType9=G.RequestType8=G.RequestType7=G.RequestType6=G.RequestType5=G.RequestType4=G.RequestType3=G.RequestType2=G.RequestType1=G.RequestType0=G.RequestType=G.Message=G.RAL=void 0;G.MessageStrategy=G.CancellationStrategy=G.CancellationSenderStrategy=G.CancellationReceiverStrategy=G.ConnectionError=G.ConnectionErrors=G.LogTraceNotification=G.SetTraceNotification=G.TraceFormat=G.TraceValues=G.Trace=void 0;var tt=ea();Object.defineProperty(G,"Message",{enumerable:!0,get:function(){return tt.Message}});Object.defineProperty(G,"RequestType",{enumerable:!0,get:function(){return tt.RequestType}});Object.defineProperty(G,"RequestType0",{enumerable:!0,get:function(){return tt.RequestType0}});Object.defineProperty(G,"RequestType1",{enumerable:!0,get:function(){return tt.RequestType1}});Object.defineProperty(G,"RequestType2",{enumerable:!0,get:function(){return tt.RequestType2}});Object.defineProperty(G,"RequestType3",{enumerable:!0,get:function(){return tt.RequestType3}});Object.defineProperty(G,"RequestType4",{enumerable:!0,get:function(){return tt.RequestType4}});Object.defineProperty(G,"RequestType5",{enumerable:!0,get:function(){return tt.RequestType5}});Object.defineProperty(G,"RequestType6",{enumerable:!0,get:function(){return tt.RequestType6}});Object.defineProperty(G,"RequestType7",{enumerable:!0,get:function(){return tt.RequestType7}});Object.defineProperty(G,"RequestType8",{enumerable:!0,get:function(){return tt.RequestType8}});Object.defineProperty(G,"RequestType9",{enumerable:!0,get:function(){return tt.RequestType9}});Object.defineProperty(G,"ResponseError",{enumerable:!0,get:function(){return tt.ResponseError}});Object.defineProperty(G,"ErrorCodes",{enumerable:!0,get:function(){return tt.ErrorCodes}});Object.defineProperty(G,"NotificationType",{enumerable:!0,get:function(){return tt.NotificationType}});Object.defineProperty(G,"NotificationType0",{enumerable:!0,get:function(){return tt.NotificationType0}});Object.defineProperty(G,"NotificationType1",{enumerable:!0,get:function(){return tt.NotificationType1}});Object.defineProperty(G,"NotificationType2",{enumerable:!0,get:function(){return tt.NotificationType2}});Object.defineProperty(G,"NotificationType3",{enumerable:!0,get:function(){return tt.NotificationType3}});Object.defineProperty(G,"NotificationType4",{enumerable:!0,get:function(){return tt.NotificationType4}});Object.defineProperty(G,"NotificationType5",{enumerable:!0,get:function(){return tt.NotificationType5}});Object.defineProperty(G,"NotificationType6",{enumerable:!0,get:function(){return tt.NotificationType6}});Object.defineProperty(G,"NotificationType7",{enumerable:!0,get:function(){return tt.NotificationType7}});Object.defineProperty(G,"NotificationType8",{enumerable:!0,get:function(){return tt.NotificationType8}});Object.defineProperty(G,"NotificationType9",{enumerable:!0,get:function(){return tt.NotificationType9}});Object.defineProperty(G,"ParameterStructures",{enumerable:!0,get:function(){return tt.ParameterStructures}});var Pa=na();Object.defineProperty(G,"LinkedMap",{enumerable:!0,get:function(){return Pa.LinkedMap}});Object.defineProperty(G,"LRUCache",{enumerable:!0,get:function(){return Pa.LRUCache}});Object.defineProperty(G,"Touch",{enumerable:!0,get:function(){return Pa.Touch}});var Rm=mf();Object.defineProperty(G,"Disposable",{enumerable:!0,get:function(){return Rm.Disposable}});var Bf=Mr();Object.defineProperty(G,"Event",{enumerable:!0,get:function(){return Bf.Event}});Object.defineProperty(G,"Emitter",{enumerable:!0,get:function(){return Bf.Emitter}});var Pf=so();Object.defineProperty(G,"CancellationTokenSource",{enumerable:!0,get:function(){return Pf.CancellationTokenSource}});Object.defineProperty(G,"CancellationToken",{enumerable:!0,get:function(){return Pf.CancellationToken}});var Ff=yf();Object.defineProperty(G,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Ff.SharedArraySenderStrategy}});Object.defineProperty(G,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Ff.SharedArrayReceiverStrategy}});var Fa=vf();Object.defineProperty(G,"MessageReader",{enumerable:!0,get:function(){return Fa.MessageReader}});Object.defineProperty(G,"AbstractMessageReader",{enumerable:!0,get:function(){return Fa.AbstractMessageReader}});Object.defineProperty(G,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Fa.ReadableStreamMessageReader}});var qa=_f();Object.defineProperty(G,"MessageWriter",{enumerable:!0,get:function(){return qa.MessageWriter}});Object.defineProperty(G,"AbstractMessageWriter",{enumerable:!0,get:function(){return qa.AbstractMessageWriter}});Object.defineProperty(G,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return qa.WriteableStreamMessageWriter}});var Tm=bf();Object.defineProperty(G,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Tm.AbstractMessageBuffer}});var Qt=kf();Object.defineProperty(G,"ConnectionStrategy",{enumerable:!0,get:function(){return Qt.ConnectionStrategy}});Object.defineProperty(G,"ConnectionOptions",{enumerable:!0,get:function(){return Qt.ConnectionOptions}});Object.defineProperty(G,"NullLogger",{enumerable:!0,get:function(){return Qt.NullLogger}});Object.defineProperty(G,"createMessageConnection",{enumerable:!0,get:function(){return Qt.createMessageConnection}});Object.defineProperty(G,"ProgressToken",{enumerable:!0,get:function(){return Qt.ProgressToken}});Object.defineProperty(G,"ProgressType",{enumerable:!0,get:function(){return Qt.ProgressType}});Object.defineProperty(G,"Trace",{enumerable:!0,get:function(){return Qt.Trace}});Object.defineProperty(G,"TraceValues",{enumerable:!0,get:function(){return Qt.TraceValues}});Object.defineProperty(G,"TraceFormat",{enumerable:!0,get:function(){return Qt.TraceFormat}});Object.defineProperty(G,"SetTraceNotification",{enumerable:!0,get:function(){return Qt.SetTraceNotification}});Object.defineProperty(G,"LogTraceNotification",{enumerable:!0,get:function(){return Qt.LogTraceNotification}});Object.defineProperty(G,"ConnectionErrors",{enumerable:!0,get:function(){return Qt.ConnectionErrors}});Object.defineProperty(G,"ConnectionError",{enumerable:!0,get:function(){return Qt.ConnectionError}});Object.defineProperty(G,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Qt.CancellationReceiverStrategy}});Object.defineProperty(G,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Qt.CancellationSenderStrategy}});Object.defineProperty(G,"CancellationStrategy",{enumerable:!0,get:function(){return Qt.CancellationStrategy}});Object.defineProperty(G,"MessageStrategy",{enumerable:!0,get:function(){return Qt.MessageStrategy}});var km=tr();G.RAL=km.default});var Qf=Z(Ma=>{"use strict";E();D();x();R();S();Object.defineProperty(Ma,"__esModule",{value:!0});var Bn=po(),Ur=class extends Bn.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Ur.emptyBuffer}fromString(e,t){return new TextEncoder().encode(e)}toString(e,t){return t==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}};Ur.emptyBuffer=new Uint8Array(0);var Qa=class{constructor(e){this.socket=e,this._onData=new Bn.Emitter,this._messageListener=t=>{t.data.arrayBuffer().then(i=>{this._onData.fire(new Uint8Array(i))},()=>{(0,Bn.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),Bn.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),Bn.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),Bn.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}},Ia=class{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),Bn.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),Bn.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),Bn.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,t){if(typeof e=="string"){if(t!==void 0&&t!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}},Bm=new TextEncoder,qf=Object.freeze({messageBuffer:Object.freeze({create:n=>new Ur(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${e.charset}`);return Promise.resolve(Bm.encode(JSON.stringify(n,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{if(!(n instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(n)))}})}),stream:Object.freeze({asReadableStream:n=>new Qa(n),asWritableStream:n=>new Ia(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let r=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(r)}},setImmediate(n,...e){let t=setTimeout(n,0,...e);return{dispose:()=>clearTimeout(t)}},setInterval(n,e,...t){let r=setInterval(n,e,...t);return{dispose:()=>clearInterval(r)}}})});function Oa(){return qf}(function(n){function e(){Bn.RAL.install(qf)}n.install=e})(Oa||(Oa={}));Ma.default=Oa});var yr=Z(sn=>{"use strict";E();D();x();R();S();var Pm=sn&&sn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Fm=sn&&sn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Pm(e,n,t)};Object.defineProperty(sn,"__esModule",{value:!0});sn.createMessageConnection=sn.BrowserMessageWriter=sn.BrowserMessageReader=void 0;var qm=Qf();qm.default.install();var jr=po();Fm(po(),sn);var La=class extends jr.AbstractMessageReader{constructor(e){super(),this._onData=new jr.Emitter,this._messageListener=t=>{this._onData.fire(t.data)},e.addEventListener("error",t=>this.fireError(t)),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}};sn.BrowserMessageReader=La;var Na=class extends jr.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};sn.BrowserMessageWriter=Na;function Qm(n,e,t,r){return t===void 0&&(t=jr.NullLogger),jr.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,jr.createMessageConnection)(n,e,t,r)}sn.createMessageConnection=Qm});var Ua=Z((sD,If)=>{"use strict";E();D();x();R();S();If.exports=yr()});var go=Z((Of,ho)=>{E();D();x();R();S();(function(n){if(typeof ho=="object"&&typeof ho.exports=="object"){var e=n(we,Of);e!==void 0&&(ho.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var t;(function(y){function P(F){return typeof F=="string"}y.is=P})(t=e.DocumentUri||(e.DocumentUri={}));var r;(function(y){function P(F){return typeof F=="string"}y.is=P})(r=e.URI||(e.URI={}));var i;(function(y){y.MIN_VALUE=-2147483648,y.MAX_VALUE=2147483647;function P(F){return typeof F=="number"&&y.MIN_VALUE<=F&&F<=y.MAX_VALUE}y.is=P})(i=e.integer||(e.integer={}));var s;(function(y){y.MIN_VALUE=0,y.MAX_VALUE=2147483647;function P(F){return typeof F=="number"&&y.MIN_VALUE<=F&&F<=y.MAX_VALUE}y.is=P})(s=e.uinteger||(e.uinteger={}));var o;(function(y){function P(b,f){return b===Number.MAX_VALUE&&(b=s.MAX_VALUE),f===Number.MAX_VALUE&&(f=s.MAX_VALUE),{line:b,character:f}}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&q.uinteger(f.line)&&q.uinteger(f.character)}y.is=F})(o=e.Position||(e.Position={}));var u;(function(y){function P(b,f,O,J){if(q.uinteger(b)&&q.uinteger(f)&&q.uinteger(O)&&q.uinteger(J))return{start:o.create(b,f),end:o.create(O,J)};if(o.is(b)&&o.is(f))return{start:b,end:f};throw new Error("Range#create called with invalid arguments[".concat(b,", ").concat(f,", ").concat(O,", ").concat(J,"]"))}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&o.is(f.start)&&o.is(f.end)}y.is=F})(u=e.Range||(e.Range={}));var p;(function(y){function P(b,f){return{uri:b,range:f}}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&u.is(f.range)&&(q.string(f.uri)||q.undefined(f.uri))}y.is=F})(p=e.Location||(e.Location={}));var h;(function(y){function P(b,f,O,J){return{targetUri:b,targetRange:f,targetSelectionRange:O,originSelectionRange:J}}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&u.is(f.targetRange)&&q.string(f.targetUri)&&u.is(f.targetSelectionRange)&&(u.is(f.originSelectionRange)||q.undefined(f.originSelectionRange))}y.is=F})(h=e.LocationLink||(e.LocationLink={}));var C;(function(y){function P(b,f,O,J){return{red:b,green:f,blue:O,alpha:J}}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&q.numberRange(f.red,0,1)&&q.numberRange(f.green,0,1)&&q.numberRange(f.blue,0,1)&&q.numberRange(f.alpha,0,1)}y.is=F})(C=e.Color||(e.Color={}));var T;(function(y){function P(b,f){return{range:b,color:f}}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&u.is(f.range)&&C.is(f.color)}y.is=F})(T=e.ColorInformation||(e.ColorInformation={}));var A;(function(y){function P(b,f,O){return{label:b,textEdit:f,additionalTextEdits:O}}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&q.string(f.label)&&(q.undefined(f.textEdit)||te.is(f))&&(q.undefined(f.additionalTextEdits)||q.typedArray(f.additionalTextEdits,te.is))}y.is=F})(A=e.ColorPresentation||(e.ColorPresentation={}));var B;(function(y){y.Comment="comment",y.Imports="imports",y.Region="region"})(B=e.FoldingRangeKind||(e.FoldingRangeKind={}));var _;(function(y){function P(b,f,O,J,Ee,it){var Ve={startLine:b,endLine:f};return q.defined(O)&&(Ve.startCharacter=O),q.defined(J)&&(Ve.endCharacter=J),q.defined(Ee)&&(Ve.kind=Ee),q.defined(it)&&(Ve.collapsedText=it),Ve}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&q.uinteger(f.startLine)&&q.uinteger(f.startLine)&&(q.undefined(f.startCharacter)||q.uinteger(f.startCharacter))&&(q.undefined(f.endCharacter)||q.uinteger(f.endCharacter))&&(q.undefined(f.kind)||q.string(f.kind))}y.is=F})(_=e.FoldingRange||(e.FoldingRange={}));var M;(function(y){function P(b,f){return{location:b,message:f}}y.create=P;function F(b){var f=b;return q.defined(f)&&p.is(f.location)&&q.string(f.message)}y.is=F})(M=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var U;(function(y){y.Error=1,y.Warning=2,y.Information=3,y.Hint=4})(U=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var Y;(function(y){y.Unnecessary=1,y.Deprecated=2})(Y=e.DiagnosticTag||(e.DiagnosticTag={}));var le;(function(y){function P(F){var b=F;return q.objectLiteral(b)&&q.string(b.href)}y.is=P})(le=e.CodeDescription||(e.CodeDescription={}));var ie;(function(y){function P(b,f,O,J,Ee,it){var Ve={range:b,message:f};return q.defined(O)&&(Ve.severity=O),q.defined(J)&&(Ve.code=J),q.defined(Ee)&&(Ve.source=Ee),q.defined(it)&&(Ve.relatedInformation=it),Ve}y.create=P;function F(b){var f,O=b;return q.defined(O)&&u.is(O.range)&&q.string(O.message)&&(q.number(O.severity)||q.undefined(O.severity))&&(q.integer(O.code)||q.string(O.code)||q.undefined(O.code))&&(q.undefined(O.codeDescription)||q.string((f=O.codeDescription)===null||f===void 0?void 0:f.href))&&(q.string(O.source)||q.undefined(O.source))&&(q.undefined(O.relatedInformation)||q.typedArray(O.relatedInformation,M.is))}y.is=F})(ie=e.Diagnostic||(e.Diagnostic={}));var ye;(function(y){function P(b,f){for(var O=[],J=2;J<arguments.length;J++)O[J-2]=arguments[J];var Ee={title:b,command:f};return q.defined(O)&&O.length>0&&(Ee.arguments=O),Ee}y.create=P;function F(b){var f=b;return q.defined(f)&&q.string(f.title)&&q.string(f.command)}y.is=F})(ye=e.Command||(e.Command={}));var te;(function(y){function P(O,J){return{range:O,newText:J}}y.replace=P;function F(O,J){return{range:{start:O,end:O},newText:J}}y.insert=F;function b(O){return{range:O,newText:""}}y.del=b;function f(O){var J=O;return q.objectLiteral(J)&&q.string(J.newText)&&u.is(J.range)}y.is=f})(te=e.TextEdit||(e.TextEdit={}));var de;(function(y){function P(b,f,O){var J={label:b};return f!==void 0&&(J.needsConfirmation=f),O!==void 0&&(J.description=O),J}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&q.string(f.label)&&(q.boolean(f.needsConfirmation)||f.needsConfirmation===void 0)&&(q.string(f.description)||f.description===void 0)}y.is=F})(de=e.ChangeAnnotation||(e.ChangeAnnotation={}));var re;(function(y){function P(F){var b=F;return q.string(b)}y.is=P})(re=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var he;(function(y){function P(O,J,Ee){return{range:O,newText:J,annotationId:Ee}}y.replace=P;function F(O,J,Ee){return{range:{start:O,end:O},newText:J,annotationId:Ee}}y.insert=F;function b(O,J){return{range:O,newText:"",annotationId:J}}y.del=b;function f(O){var J=O;return te.is(J)&&(de.is(J.annotationId)||re.is(J.annotationId))}y.is=f})(he=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var be;(function(y){function P(b,f){return{textDocument:b,edits:f}}y.create=P;function F(b){var f=b;return q.defined(f)&&je.is(f.textDocument)&&Array.isArray(f.edits)}y.is=F})(be=e.TextDocumentEdit||(e.TextDocumentEdit={}));var nt;(function(y){function P(b,f,O){var J={kind:"create",uri:b};return f!==void 0&&(f.overwrite!==void 0||f.ignoreIfExists!==void 0)&&(J.options=f),O!==void 0&&(J.annotationId=O),J}y.create=P;function F(b){var f=b;return f&&f.kind==="create"&&q.string(f.uri)&&(f.options===void 0||(f.options.overwrite===void 0||q.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||q.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||re.is(f.annotationId))}y.is=F})(nt=e.CreateFile||(e.CreateFile={}));var rt;(function(y){function P(b,f,O,J){var Ee={kind:"rename",oldUri:b,newUri:f};return O!==void 0&&(O.overwrite!==void 0||O.ignoreIfExists!==void 0)&&(Ee.options=O),J!==void 0&&(Ee.annotationId=J),Ee}y.create=P;function F(b){var f=b;return f&&f.kind==="rename"&&q.string(f.oldUri)&&q.string(f.newUri)&&(f.options===void 0||(f.options.overwrite===void 0||q.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||q.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||re.is(f.annotationId))}y.is=F})(rt=e.RenameFile||(e.RenameFile={}));var at;(function(y){function P(b,f,O){var J={kind:"delete",uri:b};return f!==void 0&&(f.recursive!==void 0||f.ignoreIfNotExists!==void 0)&&(J.options=f),O!==void 0&&(J.annotationId=O),J}y.create=P;function F(b){var f=b;return f&&f.kind==="delete"&&q.string(f.uri)&&(f.options===void 0||(f.options.recursive===void 0||q.boolean(f.options.recursive))&&(f.options.ignoreIfNotExists===void 0||q.boolean(f.options.ignoreIfNotExists)))&&(f.annotationId===void 0||re.is(f.annotationId))}y.is=F})(at=e.DeleteFile||(e.DeleteFile={}));var kt;(function(y){function P(F){var b=F;return b&&(b.changes!==void 0||b.documentChanges!==void 0)&&(b.documentChanges===void 0||b.documentChanges.every(function(f){return q.string(f.kind)?nt.is(f)||rt.is(f)||at.is(f):be.is(f)}))}y.is=P})(kt=e.WorkspaceEdit||(e.WorkspaceEdit={}));var X=function(){function y(P,F){this.edits=P,this.changeAnnotations=F}return y.prototype.insert=function(P,F,b){var f,O;if(b===void 0?f=te.insert(P,F):re.is(b)?(O=b,f=he.insert(P,F,b)):(this.assertChangeAnnotations(this.changeAnnotations),O=this.changeAnnotations.manage(b),f=he.insert(P,F,O)),this.edits.push(f),O!==void 0)return O},y.prototype.replace=function(P,F,b){var f,O;if(b===void 0?f=te.replace(P,F):re.is(b)?(O=b,f=he.replace(P,F,b)):(this.assertChangeAnnotations(this.changeAnnotations),O=this.changeAnnotations.manage(b),f=he.replace(P,F,O)),this.edits.push(f),O!==void 0)return O},y.prototype.delete=function(P,F){var b,f;if(F===void 0?b=te.del(P):re.is(F)?(f=F,b=he.del(P,F)):(this.assertChangeAnnotations(this.changeAnnotations),f=this.changeAnnotations.manage(F),b=he.del(P,f)),this.edits.push(b),f!==void 0)return f},y.prototype.add=function(P){this.edits.push(P)},y.prototype.all=function(){return this.edits},y.prototype.clear=function(){this.edits.splice(0,this.edits.length)},y.prototype.assertChangeAnnotations=function(P){if(P===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},y}(),Oe=function(){function y(P){this._annotations=P===void 0?Object.create(null):P,this._counter=0,this._size=0}return y.prototype.all=function(){return this._annotations},Object.defineProperty(y.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),y.prototype.manage=function(P,F){var b;if(re.is(P)?b=P:(b=this.nextId(),F=P),this._annotations[b]!==void 0)throw new Error("Id ".concat(b," is already in use."));if(F===void 0)throw new Error("No annotation provided for id ".concat(b));return this._annotations[b]=F,this._size++,b},y.prototype.nextId=function(){return this._counter++,this._counter.toString()},y}(),ht=function(){function y(P){var F=this;this._textEditChanges=Object.create(null),P!==void 0?(this._workspaceEdit=P,P.documentChanges?(this._changeAnnotations=new Oe(P.changeAnnotations),P.changeAnnotations=this._changeAnnotations.all(),P.documentChanges.forEach(function(b){if(be.is(b)){var f=new X(b.edits,F._changeAnnotations);F._textEditChanges[b.textDocument.uri]=f}})):P.changes&&Object.keys(P.changes).forEach(function(b){var f=new X(P.changes[b]);F._textEditChanges[b]=f})):this._workspaceEdit={}}return Object.defineProperty(y.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),y.prototype.getTextEditChange=function(P){if(je.is(P)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var F={uri:P.uri,version:P.version},b=this._textEditChanges[F.uri];if(!b){var f=[],O={textDocument:F,edits:f};this._workspaceEdit.documentChanges.push(O),b=new X(f,this._changeAnnotations),this._textEditChanges[F.uri]=b}return b}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var b=this._textEditChanges[P];if(!b){var f=[];this._workspaceEdit.changes[P]=f,b=new X(f),this._textEditChanges[P]=b}return b}},y.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Oe,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},y.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},y.prototype.createFile=function(P,F,b){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;de.is(F)||re.is(F)?f=F:b=F;var O,J;if(f===void 0?O=nt.create(P,b):(J=re.is(f)?f:this._changeAnnotations.manage(f),O=nt.create(P,b,J)),this._workspaceEdit.documentChanges.push(O),J!==void 0)return J},y.prototype.renameFile=function(P,F,b,f){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O;de.is(b)||re.is(b)?O=b:f=b;var J,Ee;if(O===void 0?J=rt.create(P,F,f):(Ee=re.is(O)?O:this._changeAnnotations.manage(O),J=rt.create(P,F,f,Ee)),this._workspaceEdit.documentChanges.push(J),Ee!==void 0)return Ee},y.prototype.deleteFile=function(P,F,b){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;de.is(F)||re.is(F)?f=F:b=F;var O,J;if(f===void 0?O=at.create(P,b):(J=re.is(f)?f:this._changeAnnotations.manage(f),O=at.create(P,b,J)),this._workspaceEdit.documentChanges.push(O),J!==void 0)return J},y}();e.WorkspaceChange=ht;var ct;(function(y){function P(b){return{uri:b}}y.create=P;function F(b){var f=b;return q.defined(f)&&q.string(f.uri)}y.is=F})(ct=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var ze;(function(y){function P(b,f){return{uri:b,version:f}}y.create=P;function F(b){var f=b;return q.defined(f)&&q.string(f.uri)&&q.integer(f.version)}y.is=F})(ze=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var je;(function(y){function P(b,f){return{uri:b,version:f}}y.create=P;function F(b){var f=b;return q.defined(f)&&q.string(f.uri)&&(f.version===null||q.integer(f.version))}y.is=F})(je=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Pe;(function(y){function P(b,f,O,J){return{uri:b,languageId:f,version:O,text:J}}y.create=P;function F(b){var f=b;return q.defined(f)&&q.string(f.uri)&&q.string(f.languageId)&&q.integer(f.version)&&q.string(f.text)}y.is=F})(Pe=e.TextDocumentItem||(e.TextDocumentItem={}));var et;(function(y){y.PlainText="plaintext",y.Markdown="markdown";function P(F){var b=F;return b===y.PlainText||b===y.Markdown}y.is=P})(et=e.MarkupKind||(e.MarkupKind={}));var wt;(function(y){function P(F){var b=F;return q.objectLiteral(F)&&et.is(b.kind)&&q.string(b.value)}y.is=P})(wt=e.MarkupContent||(e.MarkupContent={}));var mn;(function(y){y.Text=1,y.Method=2,y.Function=3,y.Constructor=4,y.Field=5,y.Variable=6,y.Class=7,y.Interface=8,y.Module=9,y.Property=10,y.Unit=11,y.Value=12,y.Enum=13,y.Keyword=14,y.Snippet=15,y.Color=16,y.File=17,y.Reference=18,y.Folder=19,y.EnumMember=20,y.Constant=21,y.Struct=22,y.Event=23,y.Operator=24,y.TypeParameter=25})(mn=e.CompletionItemKind||(e.CompletionItemKind={}));var dn;(function(y){y.PlainText=1,y.Snippet=2})(dn=e.InsertTextFormat||(e.InsertTextFormat={}));var St;(function(y){y.Deprecated=1})(St=e.CompletionItemTag||(e.CompletionItemTag={}));var Bt;(function(y){function P(b,f,O){return{newText:b,insert:f,replace:O}}y.create=P;function F(b){var f=b;return f&&q.string(f.newText)&&u.is(f.insert)&&u.is(f.replace)}y.is=F})(Bt=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Pt;(function(y){y.asIs=1,y.adjustIndentation=2})(Pt=e.InsertTextMode||(e.InsertTextMode={}));var en;(function(y){function P(F){var b=F;return b&&(q.string(b.detail)||b.detail===void 0)&&(q.string(b.description)||b.description===void 0)}y.is=P})(en=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var tn;(function(y){function P(F){return{label:F}}y.create=P})(tn=e.CompletionItem||(e.CompletionItem={}));var nn;(function(y){function P(F,b){return{items:F||[],isIncomplete:!!b}}y.create=P})(nn=e.CompletionList||(e.CompletionList={}));var Rt;(function(y){function P(b){return b.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}y.fromPlainText=P;function F(b){var f=b;return q.string(f)||q.objectLiteral(f)&&q.string(f.language)&&q.string(f.value)}y.is=F})(Rt=e.MarkedString||(e.MarkedString={}));var Re;(function(y){function P(F){var b=F;return!!b&&q.objectLiteral(b)&&(wt.is(b.contents)||Rt.is(b.contents)||q.typedArray(b.contents,Rt.is))&&(F.range===void 0||u.is(F.range))}y.is=P})(Re=e.Hover||(e.Hover={}));var Mt;(function(y){function P(F,b){return b?{label:F,documentation:b}:{label:F}}y.create=P})(Mt=e.ParameterInformation||(e.ParameterInformation={}));var Kt;(function(y){function P(F,b){for(var f=[],O=2;O<arguments.length;O++)f[O-2]=arguments[O];var J={label:F};return q.defined(b)&&(J.documentation=b),q.defined(f)?J.parameters=f:J.parameters=[],J}y.create=P})(Kt=e.SignatureInformation||(e.SignatureInformation={}));var Ft;(function(y){y.Text=1,y.Read=2,y.Write=3})(Ft=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var Jt;(function(y){function P(F,b){var f={range:F};return q.number(b)&&(f.kind=b),f}y.create=P})(Jt=e.DocumentHighlight||(e.DocumentHighlight={}));var Ct;(function(y){y.File=1,y.Module=2,y.Namespace=3,y.Package=4,y.Class=5,y.Method=6,y.Property=7,y.Field=8,y.Constructor=9,y.Enum=10,y.Interface=11,y.Function=12,y.Variable=13,y.Constant=14,y.String=15,y.Number=16,y.Boolean=17,y.Array=18,y.Object=19,y.Key=20,y.Null=21,y.EnumMember=22,y.Struct=23,y.Event=24,y.Operator=25,y.TypeParameter=26})(Ct=e.SymbolKind||(e.SymbolKind={}));var rn;(function(y){y.Deprecated=1})(rn=e.SymbolTag||(e.SymbolTag={}));var Ze;(function(y){function P(F,b,f,O,J){var Ee={name:F,kind:b,location:{uri:O,range:f}};return J&&(Ee.containerName=J),Ee}y.create=P})(Ze=e.SymbolInformation||(e.SymbolInformation={}));var At;(function(y){function P(F,b,f,O){return O!==void 0?{name:F,kind:b,location:{uri:f,range:O}}:{name:F,kind:b,location:{uri:f}}}y.create=P})(At=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var Je;(function(y){function P(b,f,O,J,Ee,it){var Ve={name:b,detail:f,kind:O,range:J,selectionRange:Ee};return it!==void 0&&(Ve.children=it),Ve}y.create=P;function F(b){var f=b;return f&&q.string(f.name)&&q.number(f.kind)&&u.is(f.range)&&u.is(f.selectionRange)&&(f.detail===void 0||q.string(f.detail))&&(f.deprecated===void 0||q.boolean(f.deprecated))&&(f.children===void 0||Array.isArray(f.children))&&(f.tags===void 0||Array.isArray(f.tags))}y.is=F})(Je=e.DocumentSymbol||(e.DocumentSymbol={}));var yt;(function(y){y.Empty="",y.QuickFix="quickfix",y.Refactor="refactor",y.RefactorExtract="refactor.extract",y.RefactorInline="refactor.inline",y.RefactorRewrite="refactor.rewrite",y.Source="source",y.SourceOrganizeImports="source.organizeImports",y.SourceFixAll="source.fixAll"})(yt=e.CodeActionKind||(e.CodeActionKind={}));var N;(function(y){y.Invoked=1,y.Automatic=2})(N=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var z;(function(y){function P(b,f,O){var J={diagnostics:b};return f!=null&&(J.only=f),O!=null&&(J.triggerKind=O),J}y.create=P;function F(b){var f=b;return q.defined(f)&&q.typedArray(f.diagnostics,ie.is)&&(f.only===void 0||q.typedArray(f.only,q.string))&&(f.triggerKind===void 0||f.triggerKind===N.Invoked||f.triggerKind===N.Automatic)}y.is=F})(z=e.CodeActionContext||(e.CodeActionContext={}));var ue;(function(y){function P(b,f,O){var J={title:b},Ee=!0;return typeof f=="string"?(Ee=!1,J.kind=f):ye.is(f)?J.command=f:J.edit=f,Ee&&O!==void 0&&(J.kind=O),J}y.create=P;function F(b){var f=b;return f&&q.string(f.title)&&(f.diagnostics===void 0||q.typedArray(f.diagnostics,ie.is))&&(f.kind===void 0||q.string(f.kind))&&(f.edit!==void 0||f.command!==void 0)&&(f.command===void 0||ye.is(f.command))&&(f.isPreferred===void 0||q.boolean(f.isPreferred))&&(f.edit===void 0||kt.is(f.edit))}y.is=F})(ue=e.CodeAction||(e.CodeAction={}));var g;(function(y){function P(b,f){var O={range:b};return q.defined(f)&&(O.data=f),O}y.create=P;function F(b){var f=b;return q.defined(f)&&u.is(f.range)&&(q.undefined(f.command)||ye.is(f.command))}y.is=F})(g=e.CodeLens||(e.CodeLens={}));var a;(function(y){function P(b,f){return{tabSize:b,insertSpaces:f}}y.create=P;function F(b){var f=b;return q.defined(f)&&q.uinteger(f.tabSize)&&q.boolean(f.insertSpaces)}y.is=F})(a=e.FormattingOptions||(e.FormattingOptions={}));var c;(function(y){function P(b,f,O){return{range:b,target:f,data:O}}y.create=P;function F(b){var f=b;return q.defined(f)&&u.is(f.range)&&(q.undefined(f.target)||q.string(f.target))}y.is=F})(c=e.DocumentLink||(e.DocumentLink={}));var d;(function(y){function P(b,f){return{range:b,parent:f}}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&u.is(f.range)&&(f.parent===void 0||y.is(f.parent))}y.is=F})(d=e.SelectionRange||(e.SelectionRange={}));var w;(function(y){y.namespace="namespace",y.type="type",y.class="class",y.enum="enum",y.interface="interface",y.struct="struct",y.typeParameter="typeParameter",y.parameter="parameter",y.variable="variable",y.property="property",y.enumMember="enumMember",y.event="event",y.function="function",y.method="method",y.macro="macro",y.keyword="keyword",y.modifier="modifier",y.comment="comment",y.string="string",y.number="number",y.regexp="regexp",y.operator="operator",y.decorator="decorator"})(w=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var k;(function(y){y.declaration="declaration",y.definition="definition",y.readonly="readonly",y.static="static",y.deprecated="deprecated",y.abstract="abstract",y.async="async",y.modification="modification",y.documentation="documentation",y.defaultLibrary="defaultLibrary"})(k=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var I;(function(y){function P(F){var b=F;return q.objectLiteral(b)&&(b.resultId===void 0||typeof b.resultId=="string")&&Array.isArray(b.data)&&(b.data.length===0||typeof b.data[0]=="number")}y.is=P})(I=e.SemanticTokens||(e.SemanticTokens={}));var ae;(function(y){function P(b,f){return{range:b,text:f}}y.create=P;function F(b){var f=b;return f!=null&&u.is(f.range)&&q.string(f.text)}y.is=F})(ae=e.InlineValueText||(e.InlineValueText={}));var me;(function(y){function P(b,f,O){return{range:b,variableName:f,caseSensitiveLookup:O}}y.create=P;function F(b){var f=b;return f!=null&&u.is(f.range)&&q.boolean(f.caseSensitiveLookup)&&(q.string(f.variableName)||f.variableName===void 0)}y.is=F})(me=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var ve;(function(y){function P(b,f){return{range:b,expression:f}}y.create=P;function F(b){var f=b;return f!=null&&u.is(f.range)&&(q.string(f.expression)||f.expression===void 0)}y.is=F})(ve=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var Ce;(function(y){function P(b,f){return{frameId:b,stoppedLocation:f}}y.create=P;function F(b){var f=b;return q.defined(f)&&u.is(b.stoppedLocation)}y.is=F})(Ce=e.InlineValueContext||(e.InlineValueContext={}));var ce;(function(y){y.Type=1,y.Parameter=2;function P(F){return F===1||F===2}y.is=P})(ce=e.InlayHintKind||(e.InlayHintKind={}));var Le;(function(y){function P(b){return{value:b}}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&(f.tooltip===void 0||q.string(f.tooltip)||wt.is(f.tooltip))&&(f.location===void 0||p.is(f.location))&&(f.command===void 0||ye.is(f.command))}y.is=F})(Le=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var m;(function(y){function P(b,f,O){var J={position:b,label:f};return O!==void 0&&(J.kind=O),J}y.create=P;function F(b){var f=b;return q.objectLiteral(f)&&o.is(f.position)&&(q.string(f.label)||q.typedArray(f.label,Le.is))&&(f.kind===void 0||ce.is(f.kind))&&f.textEdits===void 0||q.typedArray(f.textEdits,te.is)&&(f.tooltip===void 0||q.string(f.tooltip)||wt.is(f.tooltip))&&(f.paddingLeft===void 0||q.boolean(f.paddingLeft))&&(f.paddingRight===void 0||q.boolean(f.paddingRight))}y.is=F})(m=e.InlayHint||(e.InlayHint={}));var L;(function(y){function P(F){var b=F;return q.objectLiteral(b)&&r.is(b.uri)&&q.string(b.name)}y.is=P})(L=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var oe;(function(y){function P(O,J,Ee,it){return new Te(O,J,Ee,it)}y.create=P;function F(O){var J=O;return!!(q.defined(J)&&q.string(J.uri)&&(q.undefined(J.languageId)||q.string(J.languageId))&&q.uinteger(J.lineCount)&&q.func(J.getText)&&q.func(J.positionAt)&&q.func(J.offsetAt))}y.is=F;function b(O,J){for(var Ee=O.getText(),it=f(J,function(Yn,Fr){var ui=Yn.range.start.line-Fr.range.start.line;return ui===0?Yn.range.start.character-Fr.range.start.character:ui}),Ve=Ee.length,on=it.length-1;on>=0;on--){var Vt=it[on],yn=O.offsetAt(Vt.range.start),qe=O.offsetAt(Vt.range.end);if(qe<=Ve)Ee=Ee.substring(0,yn)+Vt.newText+Ee.substring(qe,Ee.length);else throw new Error("Overlapping edit");Ve=yn}return Ee}y.applyEdits=b;function f(O,J){if(O.length<=1)return O;var Ee=O.length/2|0,it=O.slice(0,Ee),Ve=O.slice(Ee);f(it,J),f(Ve,J);for(var on=0,Vt=0,yn=0;on<it.length&&Vt<Ve.length;){var qe=J(it[on],Ve[Vt]);qe<=0?O[yn++]=it[on++]:O[yn++]=Ve[Vt++]}for(;on<it.length;)O[yn++]=it[on++];for(;Vt<Ve.length;)O[yn++]=Ve[Vt++];return O}})(oe=e.TextDocument||(e.TextDocument={}));var Te=function(){function y(P,F,b,f){this._uri=P,this._languageId=F,this._version=b,this._content=f,this._lineOffsets=void 0}return Object.defineProperty(y.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),y.prototype.getText=function(P){if(P){var F=this.offsetAt(P.start),b=this.offsetAt(P.end);return this._content.substring(F,b)}return this._content},y.prototype.update=function(P,F){this._content=P.text,this._version=F,this._lineOffsets=void 0},y.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var P=[],F=this._content,b=!0,f=0;f<F.length;f++){b&&(P.push(f),b=!1);var O=F.charAt(f);b=O==="\r"||O===`
`,O==="\r"&&f+1<F.length&&F.charAt(f+1)===`
`&&f++}b&&F.length>0&&P.push(F.length),this._lineOffsets=P}return this._lineOffsets},y.prototype.positionAt=function(P){P=Math.max(Math.min(P,this._content.length),0);var F=this.getLineOffsets(),b=0,f=F.length;if(f===0)return o.create(0,P);for(;b<f;){var O=Math.floor((b+f)/2);F[O]>P?f=O:b=O+1}var J=b-1;return o.create(J,P-F[J])},y.prototype.offsetAt=function(P){var F=this.getLineOffsets();if(P.line>=F.length)return this._content.length;if(P.line<0)return 0;var b=F[P.line],f=P.line+1<F.length?F[P.line+1]:this._content.length;return Math.max(Math.min(b+P.character,f),b)},Object.defineProperty(y.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),y}(),q;(function(y){var P=Object.prototype.toString;function F(qe){return typeof qe<"u"}y.defined=F;function b(qe){return typeof qe>"u"}y.undefined=b;function f(qe){return qe===!0||qe===!1}y.boolean=f;function O(qe){return P.call(qe)==="[object String]"}y.string=O;function J(qe){return P.call(qe)==="[object Number]"}y.number=J;function Ee(qe,Yn,Fr){return P.call(qe)==="[object Number]"&&Yn<=qe&&qe<=Fr}y.numberRange=Ee;function it(qe){return P.call(qe)==="[object Number]"&&-2147483648<=qe&&qe<=2147483647}y.integer=it;function Ve(qe){return P.call(qe)==="[object Number]"&&0<=qe&&qe<=2147483647}y.uinteger=Ve;function on(qe){return P.call(qe)==="[object Function]"}y.func=on;function Vt(qe){return qe!==null&&typeof qe=="object"}y.objectLiteral=Vt;function yn(qe,Yn){return Array.isArray(qe)&&qe.every(Yn)}y.typedArray=yn})(q||(q={}))})});var lt=Z($t=>{"use strict";E();D();x();R();S();Object.defineProperty($t,"__esModule",{value:!0});$t.ProtocolNotificationType=$t.ProtocolNotificationType0=$t.ProtocolRequestType=$t.ProtocolRequestType0=$t.RegistrationType=$t.MessageDirection=void 0;var Hr=yr(),Im;(function(n){n.clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both"})(Im=$t.MessageDirection||($t.MessageDirection={}));var ja=class{constructor(e){this.method=e}};$t.RegistrationType=ja;var Ha=class extends Hr.RequestType0{constructor(e){super(e)}};$t.ProtocolRequestType0=Ha;var Ka=class extends Hr.RequestType{constructor(e){super(e,Hr.ParameterStructures.byName)}};$t.ProtocolRequestType=Ka;var Wa=class extends Hr.NotificationType0{constructor(e){super(e)}};$t.ProtocolNotificationType0=Wa;var $a=class extends Hr.NotificationType{constructor(e){super(e,Hr.ParameterStructures.byName)}};$t.ProtocolNotificationType=$a});var mo=Z(_t=>{"use strict";E();D();x();R();S();Object.defineProperty(_t,"__esModule",{value:!0});_t.objectLiteral=_t.typedArray=_t.stringArray=_t.array=_t.func=_t.error=_t.number=_t.string=_t.boolean=void 0;function Om(n){return n===!0||n===!1}_t.boolean=Om;function Mf(n){return typeof n=="string"||n instanceof String}_t.string=Mf;function Mm(n){return typeof n=="number"||n instanceof Number}_t.number=Mm;function Lm(n){return n instanceof Error}_t.error=Lm;function Nm(n){return typeof n=="function"}_t.func=Nm;function Lf(n){return Array.isArray(n)}_t.array=Lf;function Um(n){return Lf(n)&&n.every(e=>Mf(e))}_t.stringArray=Um;function jm(n,e){return Array.isArray(n)&&n.every(e)}_t.typedArray=jm;function Hm(n){return n!==null&&typeof n=="object"}_t.objectLiteral=Hm});var Uf=Z(wi=>{"use strict";E();D();x();R();S();Object.defineProperty(wi,"__esModule",{value:!0});wi.ImplementationRequest=void 0;var Nf=lt(),Km;(function(n){n.method="textDocument/implementation",n.messageDirection=Nf.MessageDirection.clientToServer,n.type=new Nf.ProtocolRequestType(n.method)})(Km=wi.ImplementationRequest||(wi.ImplementationRequest={}))});var Hf=Z(Ci=>{"use strict";E();D();x();R();S();Object.defineProperty(Ci,"__esModule",{value:!0});Ci.TypeDefinitionRequest=void 0;var jf=lt(),Wm;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=jf.MessageDirection.clientToServer,n.type=new jf.ProtocolRequestType(n.method)})(Wm=Ci.TypeDefinitionRequest||(Ci.TypeDefinitionRequest={}))});var Kf=Z(rr=>{"use strict";E();D();x();R();S();Object.defineProperty(rr,"__esModule",{value:!0});rr.DidChangeWorkspaceFoldersNotification=rr.WorkspaceFoldersRequest=void 0;var yo=lt(),$m;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=yo.MessageDirection.serverToClient,n.type=new yo.ProtocolRequestType0(n.method)})($m=rr.WorkspaceFoldersRequest||(rr.WorkspaceFoldersRequest={}));var Gm;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=yo.MessageDirection.clientToServer,n.type=new yo.ProtocolNotificationType(n.method)})(Gm=rr.DidChangeWorkspaceFoldersNotification||(rr.DidChangeWorkspaceFoldersNotification={}))});var $f=Z(Ai=>{"use strict";E();D();x();R();S();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.ConfigurationRequest=void 0;var Wf=lt(),zm;(function(n){n.method="workspace/configuration",n.messageDirection=Wf.MessageDirection.serverToClient,n.type=new Wf.ProtocolRequestType(n.method)})(zm=Ai.ConfigurationRequest||(Ai.ConfigurationRequest={}))});var Gf=Z(ir=>{"use strict";E();D();x();R();S();Object.defineProperty(ir,"__esModule",{value:!0});ir.ColorPresentationRequest=ir.DocumentColorRequest=void 0;var vo=lt(),Jm;(function(n){n.method="textDocument/documentColor",n.messageDirection=vo.MessageDirection.clientToServer,n.type=new vo.ProtocolRequestType(n.method)})(Jm=ir.DocumentColorRequest||(ir.DocumentColorRequest={}));var Vm;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=vo.MessageDirection.clientToServer,n.type=new vo.ProtocolRequestType(n.method)})(Vm=ir.ColorPresentationRequest||(ir.ColorPresentationRequest={}))});var Jf=Z(_i=>{"use strict";E();D();x();R();S();Object.defineProperty(_i,"__esModule",{value:!0});_i.FoldingRangeRequest=void 0;var zf=lt(),Zm;(function(n){n.method="textDocument/foldingRange",n.messageDirection=zf.MessageDirection.clientToServer,n.type=new zf.ProtocolRequestType(n.method)})(Zm=_i.FoldingRangeRequest||(_i.FoldingRangeRequest={}))});var Zf=Z(bi=>{"use strict";E();D();x();R();S();Object.defineProperty(bi,"__esModule",{value:!0});bi.DeclarationRequest=void 0;var Vf=lt(),Xm;(function(n){n.method="textDocument/declaration",n.messageDirection=Vf.MessageDirection.clientToServer,n.type=new Vf.ProtocolRequestType(n.method)})(Xm=bi.DeclarationRequest||(bi.DeclarationRequest={}))});var Yf=Z(Ei=>{"use strict";E();D();x();R();S();Object.defineProperty(Ei,"__esModule",{value:!0});Ei.SelectionRangeRequest=void 0;var Xf=lt(),Ym;(function(n){n.method="textDocument/selectionRange",n.messageDirection=Xf.MessageDirection.clientToServer,n.type=new Xf.ProtocolRequestType(n.method)})(Ym=Ei.SelectionRangeRequest||(Ei.SelectionRangeRequest={}))});var ep=Z(Cn=>{"use strict";E();D();x();R();S();Object.defineProperty(Cn,"__esModule",{value:!0});Cn.WorkDoneProgressCancelNotification=Cn.WorkDoneProgressCreateRequest=Cn.WorkDoneProgress=void 0;var ey=yr(),wo=lt(),ty;(function(n){n.type=new ey.ProgressType;function e(t){return t===n.type}n.is=e})(ty=Cn.WorkDoneProgress||(Cn.WorkDoneProgress={}));var ny;(function(n){n.method="window/workDoneProgress/create",n.messageDirection=wo.MessageDirection.serverToClient,n.type=new wo.ProtocolRequestType(n.method)})(ny=Cn.WorkDoneProgressCreateRequest||(Cn.WorkDoneProgressCreateRequest={}));var ry;(function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=wo.MessageDirection.clientToServer,n.type=new wo.ProtocolNotificationType(n.method)})(ry=Cn.WorkDoneProgressCancelNotification||(Cn.WorkDoneProgressCancelNotification={}))});var tp=Z(An=>{"use strict";E();D();x();R();S();Object.defineProperty(An,"__esModule",{value:!0});An.CallHierarchyOutgoingCallsRequest=An.CallHierarchyIncomingCallsRequest=An.CallHierarchyPrepareRequest=void 0;var Kr=lt(),iy;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=Kr.MessageDirection.clientToServer,n.type=new Kr.ProtocolRequestType(n.method)})(iy=An.CallHierarchyPrepareRequest||(An.CallHierarchyPrepareRequest={}));var oy;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=Kr.MessageDirection.clientToServer,n.type=new Kr.ProtocolRequestType(n.method)})(oy=An.CallHierarchyIncomingCallsRequest||(An.CallHierarchyIncomingCallsRequest={}));var sy;(function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=Kr.MessageDirection.clientToServer,n.type=new Kr.ProtocolRequestType(n.method)})(sy=An.CallHierarchyOutgoingCallsRequest||(An.CallHierarchyOutgoingCallsRequest={}))});var np=Z(bt=>{"use strict";E();D();x();R();S();Object.defineProperty(bt,"__esModule",{value:!0});bt.SemanticTokensRefreshRequest=bt.SemanticTokensRangeRequest=bt.SemanticTokensDeltaRequest=bt.SemanticTokensRequest=bt.SemanticTokensRegistrationType=bt.TokenFormat=void 0;var Kn=lt(),ay;(function(n){n.Relative="relative"})(ay=bt.TokenFormat||(bt.TokenFormat={}));var Co;(function(n){n.method="textDocument/semanticTokens",n.type=new Kn.RegistrationType(n.method)})(Co=bt.SemanticTokensRegistrationType||(bt.SemanticTokensRegistrationType={}));var cy;(function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=Kn.MessageDirection.clientToServer,n.type=new Kn.ProtocolRequestType(n.method),n.registrationMethod=Co.method})(cy=bt.SemanticTokensRequest||(bt.SemanticTokensRequest={}));var uy;(function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=Kn.MessageDirection.clientToServer,n.type=new Kn.ProtocolRequestType(n.method),n.registrationMethod=Co.method})(uy=bt.SemanticTokensDeltaRequest||(bt.SemanticTokensDeltaRequest={}));var ly;(function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=Kn.MessageDirection.clientToServer,n.type=new Kn.ProtocolRequestType(n.method),n.registrationMethod=Co.method})(ly=bt.SemanticTokensRangeRequest||(bt.SemanticTokensRangeRequest={}));var dy;(function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=Kn.MessageDirection.serverToClient,n.type=new Kn.ProtocolRequestType0(n.method)})(dy=bt.SemanticTokensRefreshRequest||(bt.SemanticTokensRefreshRequest={}))});var ip=Z(Di=>{"use strict";E();D();x();R();S();Object.defineProperty(Di,"__esModule",{value:!0});Di.ShowDocumentRequest=void 0;var rp=lt(),fy;(function(n){n.method="window/showDocument",n.messageDirection=rp.MessageDirection.serverToClient,n.type=new rp.ProtocolRequestType(n.method)})(fy=Di.ShowDocumentRequest||(Di.ShowDocumentRequest={}))});var sp=Z(xi=>{"use strict";E();D();x();R();S();Object.defineProperty(xi,"__esModule",{value:!0});xi.LinkedEditingRangeRequest=void 0;var op=lt(),py;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=op.MessageDirection.clientToServer,n.type=new op.ProtocolRequestType(n.method)})(py=xi.LinkedEditingRangeRequest||(xi.LinkedEditingRangeRequest={}))});var ap=Z(dt=>{"use strict";E();D();x();R();S();Object.defineProperty(dt,"__esModule",{value:!0});dt.WillDeleteFilesRequest=dt.DidDeleteFilesNotification=dt.DidRenameFilesNotification=dt.WillRenameFilesRequest=dt.DidCreateFilesNotification=dt.WillCreateFilesRequest=dt.FileOperationPatternKind=void 0;var fn=lt(),hy;(function(n){n.file="file",n.folder="folder"})(hy=dt.FileOperationPatternKind||(dt.FileOperationPatternKind={}));var gy;(function(n){n.method="workspace/willCreateFiles",n.messageDirection=fn.MessageDirection.clientToServer,n.type=new fn.ProtocolRequestType(n.method)})(gy=dt.WillCreateFilesRequest||(dt.WillCreateFilesRequest={}));var my;(function(n){n.method="workspace/didCreateFiles",n.messageDirection=fn.MessageDirection.clientToServer,n.type=new fn.ProtocolNotificationType(n.method)})(my=dt.DidCreateFilesNotification||(dt.DidCreateFilesNotification={}));var yy;(function(n){n.method="workspace/willRenameFiles",n.messageDirection=fn.MessageDirection.clientToServer,n.type=new fn.ProtocolRequestType(n.method)})(yy=dt.WillRenameFilesRequest||(dt.WillRenameFilesRequest={}));var vy;(function(n){n.method="workspace/didRenameFiles",n.messageDirection=fn.MessageDirection.clientToServer,n.type=new fn.ProtocolNotificationType(n.method)})(vy=dt.DidRenameFilesNotification||(dt.DidRenameFilesNotification={}));var wy;(function(n){n.method="workspace/didDeleteFiles",n.messageDirection=fn.MessageDirection.clientToServer,n.type=new fn.ProtocolNotificationType(n.method)})(wy=dt.DidDeleteFilesNotification||(dt.DidDeleteFilesNotification={}));var Cy;(function(n){n.method="workspace/willDeleteFiles",n.messageDirection=fn.MessageDirection.clientToServer,n.type=new fn.ProtocolRequestType(n.method)})(Cy=dt.WillDeleteFilesRequest||(dt.WillDeleteFilesRequest={}))});var up=Z(_n=>{"use strict";E();D();x();R();S();Object.defineProperty(_n,"__esModule",{value:!0});_n.MonikerRequest=_n.MonikerKind=_n.UniquenessLevel=void 0;var cp=lt(),Ay;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(Ay=_n.UniquenessLevel||(_n.UniquenessLevel={}));var _y;(function(n){n.$import="import",n.$export="export",n.local="local"})(_y=_n.MonikerKind||(_n.MonikerKind={}));var by;(function(n){n.method="textDocument/moniker",n.messageDirection=cp.MessageDirection.clientToServer,n.type=new cp.ProtocolRequestType(n.method)})(by=_n.MonikerRequest||(_n.MonikerRequest={}))});var lp=Z(bn=>{"use strict";E();D();x();R();S();Object.defineProperty(bn,"__esModule",{value:!0});bn.TypeHierarchySubtypesRequest=bn.TypeHierarchySupertypesRequest=bn.TypeHierarchyPrepareRequest=void 0;var Wr=lt(),Ey;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=Wr.MessageDirection.clientToServer,n.type=new Wr.ProtocolRequestType(n.method)})(Ey=bn.TypeHierarchyPrepareRequest||(bn.TypeHierarchyPrepareRequest={}));var Dy;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=Wr.MessageDirection.clientToServer,n.type=new Wr.ProtocolRequestType(n.method)})(Dy=bn.TypeHierarchySupertypesRequest||(bn.TypeHierarchySupertypesRequest={}));var xy;(function(n){n.method="typeHierarchy/subtypes",n.messageDirection=Wr.MessageDirection.clientToServer,n.type=new Wr.ProtocolRequestType(n.method)})(xy=bn.TypeHierarchySubtypesRequest||(bn.TypeHierarchySubtypesRequest={}))});var dp=Z(or=>{"use strict";E();D();x();R();S();Object.defineProperty(or,"__esModule",{value:!0});or.InlineValueRefreshRequest=or.InlineValueRequest=void 0;var Ao=lt(),Sy;(function(n){n.method="textDocument/inlineValue",n.messageDirection=Ao.MessageDirection.clientToServer,n.type=new Ao.ProtocolRequestType(n.method)})(Sy=or.InlineValueRequest||(or.InlineValueRequest={}));var Ry;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=Ao.MessageDirection.serverToClient,n.type=new Ao.ProtocolRequestType0(n.method)})(Ry=or.InlineValueRefreshRequest||(or.InlineValueRefreshRequest={}))});var fp=Z(En=>{"use strict";E();D();x();R();S();Object.defineProperty(En,"__esModule",{value:!0});En.InlayHintRefreshRequest=En.InlayHintResolveRequest=En.InlayHintRequest=void 0;var $r=lt(),Ty;(function(n){n.method="textDocument/inlayHint",n.messageDirection=$r.MessageDirection.clientToServer,n.type=new $r.ProtocolRequestType(n.method)})(Ty=En.InlayHintRequest||(En.InlayHintRequest={}));var ky;(function(n){n.method="inlayHint/resolve",n.messageDirection=$r.MessageDirection.clientToServer,n.type=new $r.ProtocolRequestType(n.method)})(ky=En.InlayHintResolveRequest||(En.InlayHintResolveRequest={}));var By;(function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=$r.MessageDirection.serverToClient,n.type=new $r.ProtocolRequestType0(n.method)})(By=En.InlayHintRefreshRequest||(En.InlayHintRefreshRequest={}))});var hp=Z(It=>{"use strict";E();D();x();R();S();Object.defineProperty(It,"__esModule",{value:!0});It.DiagnosticRefreshRequest=It.WorkspaceDiagnosticRequest=It.DocumentDiagnosticRequest=It.DocumentDiagnosticReportKind=It.DiagnosticServerCancellationData=void 0;var pp=yr(),Py=mo(),Gr=lt(),Fy;(function(n){function e(t){let r=t;return r&&Py.boolean(r.retriggerRequest)}n.is=e})(Fy=It.DiagnosticServerCancellationData||(It.DiagnosticServerCancellationData={}));var qy;(function(n){n.Full="full",n.Unchanged="unchanged"})(qy=It.DocumentDiagnosticReportKind||(It.DocumentDiagnosticReportKind={}));var Qy;(function(n){n.method="textDocument/diagnostic",n.messageDirection=Gr.MessageDirection.clientToServer,n.type=new Gr.ProtocolRequestType(n.method),n.partialResult=new pp.ProgressType})(Qy=It.DocumentDiagnosticRequest||(It.DocumentDiagnosticRequest={}));var Iy;(function(n){n.method="workspace/diagnostic",n.messageDirection=Gr.MessageDirection.clientToServer,n.type=new Gr.ProtocolRequestType(n.method),n.partialResult=new pp.ProgressType})(Iy=It.WorkspaceDiagnosticRequest||(It.WorkspaceDiagnosticRequest={}));var Oy;(function(n){n.method="workspace/diagnostic/refresh",n.messageDirection=Gr.MessageDirection.serverToClient,n.type=new Gr.ProtocolRequestType0(n.method)})(Oy=It.DiagnosticRefreshRequest||(It.DiagnosticRefreshRequest={}))});var yp=Z(Ne=>{"use strict";E();D();x();R();S();Object.defineProperty(Ne,"__esModule",{value:!0});Ne.DidCloseNotebookDocumentNotification=Ne.DidSaveNotebookDocumentNotification=Ne.DidChangeNotebookDocumentNotification=Ne.NotebookCellArrayChange=Ne.DidOpenNotebookDocumentNotification=Ne.NotebookDocumentSyncRegistrationType=Ne.NotebookDocument=Ne.NotebookCell=Ne.ExecutionSummary=Ne.NotebookCellKind=void 0;var Si=go(),Dn=mo(),Pn=lt(),gp;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(gp=Ne.NotebookCellKind||(Ne.NotebookCellKind={}));var mp;(function(n){function e(i,s){let o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}n.create=e;function t(i){let s=i;return Dn.objectLiteral(s)&&Si.uinteger.is(s.executionOrder)&&(s.success===void 0||Dn.boolean(s.success))}n.is=t;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}n.equals=r})(mp=Ne.ExecutionSummary||(Ne.ExecutionSummary={}));var Ga;(function(n){function e(s,o){return{kind:s,document:o}}n.create=e;function t(s){let o=s;return Dn.objectLiteral(o)&&gp.is(o.kind)&&Si.DocumentUri.is(o.document)&&(o.metadata===void 0||Dn.objectLiteral(o.metadata))}n.is=t;function r(s,o){let u=new Set;return s.document!==o.document&&u.add("document"),s.kind!==o.kind&&u.add("kind"),s.executionSummary!==o.executionSummary&&u.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&u.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!mp.equals(s.executionSummary,o.executionSummary)&&u.add("executionSummary"),u}n.diff=r;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let u=Array.isArray(s),p=Array.isArray(o);if(u!==p)return!1;if(u&&p){if(s.length!==o.length)return!1;for(let h=0;h<s.length;h++)if(!i(s[h],o[h]))return!1}if(Dn.objectLiteral(s)&&Dn.objectLiteral(o)){let h=Object.keys(s),C=Object.keys(o);if(h.length!==C.length||(h.sort(),C.sort(),!i(h,C)))return!1;for(let T=0;T<h.length;T++){let A=h[T];if(!i(s[A],o[A]))return!1}}return!0}})(Ga=Ne.NotebookCell||(Ne.NotebookCell={}));var My;(function(n){function e(r,i,s,o){return{uri:r,notebookType:i,version:s,cells:o}}n.create=e;function t(r){let i=r;return Dn.objectLiteral(i)&&Dn.string(i.uri)&&Si.integer.is(i.version)&&Dn.typedArray(i.cells,Ga.is)}n.is=t})(My=Ne.NotebookDocument||(Ne.NotebookDocument={}));var Ri;(function(n){n.method="notebookDocument/sync",n.messageDirection=Pn.MessageDirection.clientToServer,n.type=new Pn.RegistrationType(n.method)})(Ri=Ne.NotebookDocumentSyncRegistrationType||(Ne.NotebookDocumentSyncRegistrationType={}));var Ly;(function(n){n.method="notebookDocument/didOpen",n.messageDirection=Pn.MessageDirection.clientToServer,n.type=new Pn.ProtocolNotificationType(n.method),n.registrationMethod=Ri.method})(Ly=Ne.DidOpenNotebookDocumentNotification||(Ne.DidOpenNotebookDocumentNotification={}));var Ny;(function(n){function e(r){let i=r;return Dn.objectLiteral(i)&&Si.uinteger.is(i.start)&&Si.uinteger.is(i.deleteCount)&&(i.cells===void 0||Dn.typedArray(i.cells,Ga.is))}n.is=e;function t(r,i,s){let o={start:r,deleteCount:i};return s!==void 0&&(o.cells=s),o}n.create=t})(Ny=Ne.NotebookCellArrayChange||(Ne.NotebookCellArrayChange={}));var Uy;(function(n){n.method="notebookDocument/didChange",n.messageDirection=Pn.MessageDirection.clientToServer,n.type=new Pn.ProtocolNotificationType(n.method),n.registrationMethod=Ri.method})(Uy=Ne.DidChangeNotebookDocumentNotification||(Ne.DidChangeNotebookDocumentNotification={}));var jy;(function(n){n.method="notebookDocument/didSave",n.messageDirection=Pn.MessageDirection.clientToServer,n.type=new Pn.ProtocolNotificationType(n.method),n.registrationMethod=Ri.method})(jy=Ne.DidSaveNotebookDocumentNotification||(Ne.DidSaveNotebookDocumentNotification={}));var Hy;(function(n){n.method="notebookDocument/didClose",n.messageDirection=Pn.MessageDirection.clientToServer,n.type=new Pn.ProtocolNotificationType(n.method),n.registrationMethod=Ri.method})(Hy=Ne.DidCloseNotebookDocumentNotification||(Ne.DidCloseNotebookDocumentNotification={}))});var xp=Z(v=>{"use strict";E();D();x();R();S();Object.defineProperty(v,"__esModule",{value:!0});v.WorkspaceSymbolRequest=v.CodeActionResolveRequest=v.CodeActionRequest=v.DocumentSymbolRequest=v.DocumentHighlightRequest=v.ReferencesRequest=v.DefinitionRequest=v.SignatureHelpRequest=v.SignatureHelpTriggerKind=v.HoverRequest=v.CompletionResolveRequest=v.CompletionRequest=v.CompletionTriggerKind=v.PublishDiagnosticsNotification=v.WatchKind=v.RelativePattern=v.FileChangeType=v.DidChangeWatchedFilesNotification=v.WillSaveTextDocumentWaitUntilRequest=v.WillSaveTextDocumentNotification=v.TextDocumentSaveReason=v.DidSaveTextDocumentNotification=v.DidCloseTextDocumentNotification=v.DidChangeTextDocumentNotification=v.TextDocumentContentChangeEvent=v.DidOpenTextDocumentNotification=v.TextDocumentSyncKind=v.TelemetryEventNotification=v.LogMessageNotification=v.ShowMessageRequest=v.ShowMessageNotification=v.MessageType=v.DidChangeConfigurationNotification=v.ExitNotification=v.ShutdownRequest=v.InitializedNotification=v.InitializeErrorCodes=v.InitializeRequest=v.WorkDoneProgressOptions=v.TextDocumentRegistrationOptions=v.StaticRegistrationOptions=v.PositionEncodingKind=v.FailureHandlingKind=v.ResourceOperationKind=v.UnregistrationRequest=v.RegistrationRequest=v.DocumentSelector=v.NotebookCellTextDocumentFilter=v.NotebookDocumentFilter=v.TextDocumentFilter=void 0;v.TypeHierarchySubtypesRequest=v.TypeHierarchyPrepareRequest=v.MonikerRequest=v.MonikerKind=v.UniquenessLevel=v.WillDeleteFilesRequest=v.DidDeleteFilesNotification=v.WillRenameFilesRequest=v.DidRenameFilesNotification=v.WillCreateFilesRequest=v.DidCreateFilesNotification=v.FileOperationPatternKind=v.LinkedEditingRangeRequest=v.ShowDocumentRequest=v.SemanticTokensRegistrationType=v.SemanticTokensRefreshRequest=v.SemanticTokensRangeRequest=v.SemanticTokensDeltaRequest=v.SemanticTokensRequest=v.TokenFormat=v.CallHierarchyPrepareRequest=v.CallHierarchyOutgoingCallsRequest=v.CallHierarchyIncomingCallsRequest=v.WorkDoneProgressCancelNotification=v.WorkDoneProgressCreateRequest=v.WorkDoneProgress=v.SelectionRangeRequest=v.DeclarationRequest=v.FoldingRangeRequest=v.ColorPresentationRequest=v.DocumentColorRequest=v.ConfigurationRequest=v.DidChangeWorkspaceFoldersNotification=v.WorkspaceFoldersRequest=v.TypeDefinitionRequest=v.ImplementationRequest=v.ApplyWorkspaceEditRequest=v.ExecuteCommandRequest=v.PrepareRenameRequest=v.RenameRequest=v.PrepareSupportDefaultBehavior=v.DocumentOnTypeFormattingRequest=v.DocumentRangeFormattingRequest=v.DocumentFormattingRequest=v.DocumentLinkResolveRequest=v.DocumentLinkRequest=v.CodeLensRefreshRequest=v.CodeLensResolveRequest=v.CodeLensRequest=v.WorkspaceSymbolResolveRequest=void 0;v.DidCloseNotebookDocumentNotification=v.DidSaveNotebookDocumentNotification=v.DidChangeNotebookDocumentNotification=v.NotebookCellArrayChange=v.DidOpenNotebookDocumentNotification=v.NotebookDocumentSyncRegistrationType=v.NotebookDocument=v.NotebookCell=v.ExecutionSummary=v.NotebookCellKind=v.DiagnosticRefreshRequest=v.WorkspaceDiagnosticRequest=v.DocumentDiagnosticRequest=v.DocumentDiagnosticReportKind=v.DiagnosticServerCancellationData=v.InlayHintRefreshRequest=v.InlayHintResolveRequest=v.InlayHintRequest=v.InlineValueRefreshRequest=v.InlineValueRequest=v.TypeHierarchySupertypesRequest=void 0;var ne=lt(),vp=go(),Ot=mo(),Ky=Uf();Object.defineProperty(v,"ImplementationRequest",{enumerable:!0,get:function(){return Ky.ImplementationRequest}});var Wy=Hf();Object.defineProperty(v,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Wy.TypeDefinitionRequest}});var wp=Kf();Object.defineProperty(v,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return wp.WorkspaceFoldersRequest}});Object.defineProperty(v,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return wp.DidChangeWorkspaceFoldersNotification}});var $y=$f();Object.defineProperty(v,"ConfigurationRequest",{enumerable:!0,get:function(){return $y.ConfigurationRequest}});var Cp=Gf();Object.defineProperty(v,"DocumentColorRequest",{enumerable:!0,get:function(){return Cp.DocumentColorRequest}});Object.defineProperty(v,"ColorPresentationRequest",{enumerable:!0,get:function(){return Cp.ColorPresentationRequest}});var Gy=Jf();Object.defineProperty(v,"FoldingRangeRequest",{enumerable:!0,get:function(){return Gy.FoldingRangeRequest}});var zy=Zf();Object.defineProperty(v,"DeclarationRequest",{enumerable:!0,get:function(){return zy.DeclarationRequest}});var Jy=Yf();Object.defineProperty(v,"SelectionRangeRequest",{enumerable:!0,get:function(){return Jy.SelectionRangeRequest}});var za=ep();Object.defineProperty(v,"WorkDoneProgress",{enumerable:!0,get:function(){return za.WorkDoneProgress}});Object.defineProperty(v,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return za.WorkDoneProgressCreateRequest}});Object.defineProperty(v,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return za.WorkDoneProgressCancelNotification}});var Ja=tp();Object.defineProperty(v,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ja.CallHierarchyIncomingCallsRequest}});Object.defineProperty(v,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ja.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(v,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ja.CallHierarchyPrepareRequest}});var zr=np();Object.defineProperty(v,"TokenFormat",{enumerable:!0,get:function(){return zr.TokenFormat}});Object.defineProperty(v,"SemanticTokensRequest",{enumerable:!0,get:function(){return zr.SemanticTokensRequest}});Object.defineProperty(v,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return zr.SemanticTokensDeltaRequest}});Object.defineProperty(v,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return zr.SemanticTokensRangeRequest}});Object.defineProperty(v,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return zr.SemanticTokensRefreshRequest}});Object.defineProperty(v,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return zr.SemanticTokensRegistrationType}});var Vy=ip();Object.defineProperty(v,"ShowDocumentRequest",{enumerable:!0,get:function(){return Vy.ShowDocumentRequest}});var Zy=sp();Object.defineProperty(v,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Zy.LinkedEditingRangeRequest}});var vr=ap();Object.defineProperty(v,"FileOperationPatternKind",{enumerable:!0,get:function(){return vr.FileOperationPatternKind}});Object.defineProperty(v,"DidCreateFilesNotification",{enumerable:!0,get:function(){return vr.DidCreateFilesNotification}});Object.defineProperty(v,"WillCreateFilesRequest",{enumerable:!0,get:function(){return vr.WillCreateFilesRequest}});Object.defineProperty(v,"DidRenameFilesNotification",{enumerable:!0,get:function(){return vr.DidRenameFilesNotification}});Object.defineProperty(v,"WillRenameFilesRequest",{enumerable:!0,get:function(){return vr.WillRenameFilesRequest}});Object.defineProperty(v,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return vr.DidDeleteFilesNotification}});Object.defineProperty(v,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return vr.WillDeleteFilesRequest}});var Va=up();Object.defineProperty(v,"UniquenessLevel",{enumerable:!0,get:function(){return Va.UniquenessLevel}});Object.defineProperty(v,"MonikerKind",{enumerable:!0,get:function(){return Va.MonikerKind}});Object.defineProperty(v,"MonikerRequest",{enumerable:!0,get:function(){return Va.MonikerRequest}});var Za=lp();Object.defineProperty(v,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Za.TypeHierarchyPrepareRequest}});Object.defineProperty(v,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Za.TypeHierarchySubtypesRequest}});Object.defineProperty(v,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Za.TypeHierarchySupertypesRequest}});var Ap=dp();Object.defineProperty(v,"InlineValueRequest",{enumerable:!0,get:function(){return Ap.InlineValueRequest}});Object.defineProperty(v,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Ap.InlineValueRefreshRequest}});var Xa=fp();Object.defineProperty(v,"InlayHintRequest",{enumerable:!0,get:function(){return Xa.InlayHintRequest}});Object.defineProperty(v,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Xa.InlayHintResolveRequest}});Object.defineProperty(v,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Xa.InlayHintRefreshRequest}});var Ti=hp();Object.defineProperty(v,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Ti.DiagnosticServerCancellationData}});Object.defineProperty(v,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Ti.DocumentDiagnosticReportKind}});Object.defineProperty(v,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Ti.DocumentDiagnosticRequest}});Object.defineProperty(v,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Ti.WorkspaceDiagnosticRequest}});Object.defineProperty(v,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Ti.DiagnosticRefreshRequest}});var Fn=yp();Object.defineProperty(v,"NotebookCellKind",{enumerable:!0,get:function(){return Fn.NotebookCellKind}});Object.defineProperty(v,"ExecutionSummary",{enumerable:!0,get:function(){return Fn.ExecutionSummary}});Object.defineProperty(v,"NotebookCell",{enumerable:!0,get:function(){return Fn.NotebookCell}});Object.defineProperty(v,"NotebookDocument",{enumerable:!0,get:function(){return Fn.NotebookDocument}});Object.defineProperty(v,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Fn.NotebookDocumentSyncRegistrationType}});Object.defineProperty(v,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Fn.DidOpenNotebookDocumentNotification}});Object.defineProperty(v,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Fn.NotebookCellArrayChange}});Object.defineProperty(v,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Fn.DidChangeNotebookDocumentNotification}});Object.defineProperty(v,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Fn.DidSaveNotebookDocumentNotification}});Object.defineProperty(v,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Fn.DidCloseNotebookDocumentNotification}});var _p;(function(n){function e(t){let r=t;return Ot.string(r.language)||Ot.string(r.scheme)||Ot.string(r.pattern)}n.is=e})(_p=v.TextDocumentFilter||(v.TextDocumentFilter={}));var bp;(function(n){function e(t){let r=t;return Ot.objectLiteral(r)&&(Ot.string(r.notebookType)||Ot.string(r.scheme)||Ot.string(r.pattern))}n.is=e})(bp=v.NotebookDocumentFilter||(v.NotebookDocumentFilter={}));var Ep;(function(n){function e(t){let r=t;return Ot.objectLiteral(r)&&(Ot.string(r.notebook)||bp.is(r.notebook))&&(r.language===void 0||Ot.string(r.language))}n.is=e})(Ep=v.NotebookCellTextDocumentFilter||(v.NotebookCellTextDocumentFilter={}));var Dp;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!Ot.string(r)&&!_p.is(r)&&!Ep.is(r))return!1;return!0}n.is=e})(Dp=v.DocumentSelector||(v.DocumentSelector={}));var Xy;(function(n){n.method="client/registerCapability",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolRequestType(n.method)})(Xy=v.RegistrationRequest||(v.RegistrationRequest={}));var Yy;(function(n){n.method="client/unregisterCapability",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolRequestType(n.method)})(Yy=v.UnregistrationRequest||(v.UnregistrationRequest={}));var ev;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(ev=v.ResourceOperationKind||(v.ResourceOperationKind={}));var tv;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(tv=v.FailureHandlingKind||(v.FailureHandlingKind={}));var nv;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(nv=v.PositionEncodingKind||(v.PositionEncodingKind={}));var rv;(function(n){function e(t){let r=t;return r&&Ot.string(r.id)&&r.id.length>0}n.hasId=e})(rv=v.StaticRegistrationOptions||(v.StaticRegistrationOptions={}));var iv;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||Dp.is(r.documentSelector))}n.is=e})(iv=v.TextDocumentRegistrationOptions||(v.TextDocumentRegistrationOptions={}));var ov;(function(n){function e(r){let i=r;return Ot.objectLiteral(i)&&(i.workDoneProgress===void 0||Ot.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&Ot.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(ov=v.WorkDoneProgressOptions||(v.WorkDoneProgressOptions={}));var sv;(function(n){n.method="initialize",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(sv=v.InitializeRequest||(v.InitializeRequest={}));var av;(function(n){n.unknownProtocolVersion=1})(av=v.InitializeErrorCodes||(v.InitializeErrorCodes={}));var cv;(function(n){n.method="initialized",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType(n.method)})(cv=v.InitializedNotification||(v.InitializedNotification={}));var uv;(function(n){n.method="shutdown",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType0(n.method)})(uv=v.ShutdownRequest||(v.ShutdownRequest={}));var lv;(function(n){n.method="exit",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType0(n.method)})(lv=v.ExitNotification||(v.ExitNotification={}));var dv;(function(n){n.method="workspace/didChangeConfiguration",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType(n.method)})(dv=v.DidChangeConfigurationNotification||(v.DidChangeConfigurationNotification={}));var fv;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4})(fv=v.MessageType||(v.MessageType={}));var pv;(function(n){n.method="window/showMessage",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolNotificationType(n.method)})(pv=v.ShowMessageNotification||(v.ShowMessageNotification={}));var hv;(function(n){n.method="window/showMessageRequest",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolRequestType(n.method)})(hv=v.ShowMessageRequest||(v.ShowMessageRequest={}));var gv;(function(n){n.method="window/logMessage",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolNotificationType(n.method)})(gv=v.LogMessageNotification||(v.LogMessageNotification={}));var mv;(function(n){n.method="telemetry/event",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolNotificationType(n.method)})(mv=v.TelemetryEventNotification||(v.TelemetryEventNotification={}));var yv;(function(n){n.None=0,n.Full=1,n.Incremental=2})(yv=v.TextDocumentSyncKind||(v.TextDocumentSyncKind={}));var vv;(function(n){n.method="textDocument/didOpen",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType(n.method)})(vv=v.DidOpenTextDocumentNotification||(v.DidOpenTextDocumentNotification={}));var wv;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})(wv=v.TextDocumentContentChangeEvent||(v.TextDocumentContentChangeEvent={}));var Cv;(function(n){n.method="textDocument/didChange",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType(n.method)})(Cv=v.DidChangeTextDocumentNotification||(v.DidChangeTextDocumentNotification={}));var Av;(function(n){n.method="textDocument/didClose",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType(n.method)})(Av=v.DidCloseTextDocumentNotification||(v.DidCloseTextDocumentNotification={}));var _v;(function(n){n.method="textDocument/didSave",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType(n.method)})(_v=v.DidSaveTextDocumentNotification||(v.DidSaveTextDocumentNotification={}));var bv;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(bv=v.TextDocumentSaveReason||(v.TextDocumentSaveReason={}));var Ev;(function(n){n.method="textDocument/willSave",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType(n.method)})(Ev=v.WillSaveTextDocumentNotification||(v.WillSaveTextDocumentNotification={}));var Dv;(function(n){n.method="textDocument/willSaveWaitUntil",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Dv=v.WillSaveTextDocumentWaitUntilRequest||(v.WillSaveTextDocumentWaitUntilRequest={}));var xv;(function(n){n.method="workspace/didChangeWatchedFiles",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolNotificationType(n.method)})(xv=v.DidChangeWatchedFilesNotification||(v.DidChangeWatchedFilesNotification={}));var Sv;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(Sv=v.FileChangeType||(v.FileChangeType={}));var Rv;(function(n){function e(t){let r=t;return Ot.objectLiteral(r)&&(vp.URI.is(r.baseUri)||vp.WorkspaceFolder.is(r.baseUri))&&Ot.string(r.pattern)}n.is=e})(Rv=v.RelativePattern||(v.RelativePattern={}));var Tv;(function(n){n.Create=1,n.Change=2,n.Delete=4})(Tv=v.WatchKind||(v.WatchKind={}));var kv;(function(n){n.method="textDocument/publishDiagnostics",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolNotificationType(n.method)})(kv=v.PublishDiagnosticsNotification||(v.PublishDiagnosticsNotification={}));var Bv;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(Bv=v.CompletionTriggerKind||(v.CompletionTriggerKind={}));var Pv;(function(n){n.method="textDocument/completion",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Pv=v.CompletionRequest||(v.CompletionRequest={}));var Fv;(function(n){n.method="completionItem/resolve",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Fv=v.CompletionResolveRequest||(v.CompletionResolveRequest={}));var qv;(function(n){n.method="textDocument/hover",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(qv=v.HoverRequest||(v.HoverRequest={}));var Qv;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(Qv=v.SignatureHelpTriggerKind||(v.SignatureHelpTriggerKind={}));var Iv;(function(n){n.method="textDocument/signatureHelp",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Iv=v.SignatureHelpRequest||(v.SignatureHelpRequest={}));var Ov;(function(n){n.method="textDocument/definition",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Ov=v.DefinitionRequest||(v.DefinitionRequest={}));var Mv;(function(n){n.method="textDocument/references",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Mv=v.ReferencesRequest||(v.ReferencesRequest={}));var Lv;(function(n){n.method="textDocument/documentHighlight",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Lv=v.DocumentHighlightRequest||(v.DocumentHighlightRequest={}));var Nv;(function(n){n.method="textDocument/documentSymbol",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Nv=v.DocumentSymbolRequest||(v.DocumentSymbolRequest={}));var Uv;(function(n){n.method="textDocument/codeAction",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Uv=v.CodeActionRequest||(v.CodeActionRequest={}));var jv;(function(n){n.method="codeAction/resolve",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(jv=v.CodeActionResolveRequest||(v.CodeActionResolveRequest={}));var Hv;(function(n){n.method="workspace/symbol",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Hv=v.WorkspaceSymbolRequest||(v.WorkspaceSymbolRequest={}));var Kv;(function(n){n.method="workspaceSymbol/resolve",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Kv=v.WorkspaceSymbolResolveRequest||(v.WorkspaceSymbolResolveRequest={}));var Wv;(function(n){n.method="textDocument/codeLens",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Wv=v.CodeLensRequest||(v.CodeLensRequest={}));var $v;(function(n){n.method="codeLens/resolve",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})($v=v.CodeLensResolveRequest||(v.CodeLensResolveRequest={}));var Gv;(function(n){n.method="workspace/codeLens/refresh",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolRequestType0(n.method)})(Gv=v.CodeLensRefreshRequest||(v.CodeLensRefreshRequest={}));var zv;(function(n){n.method="textDocument/documentLink",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(zv=v.DocumentLinkRequest||(v.DocumentLinkRequest={}));var Jv;(function(n){n.method="documentLink/resolve",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Jv=v.DocumentLinkResolveRequest||(v.DocumentLinkResolveRequest={}));var Vv;(function(n){n.method="textDocument/formatting",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Vv=v.DocumentFormattingRequest||(v.DocumentFormattingRequest={}));var Zv;(function(n){n.method="textDocument/rangeFormatting",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Zv=v.DocumentRangeFormattingRequest||(v.DocumentRangeFormattingRequest={}));var Xv;(function(n){n.method="textDocument/onTypeFormatting",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(Xv=v.DocumentOnTypeFormattingRequest||(v.DocumentOnTypeFormattingRequest={}));var Yv;(function(n){n.Identifier=1})(Yv=v.PrepareSupportDefaultBehavior||(v.PrepareSupportDefaultBehavior={}));var ew;(function(n){n.method="textDocument/rename",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(ew=v.RenameRequest||(v.RenameRequest={}));var tw;(function(n){n.method="textDocument/prepareRename",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(tw=v.PrepareRenameRequest||(v.PrepareRenameRequest={}));var nw;(function(n){n.method="workspace/executeCommand",n.messageDirection=ne.MessageDirection.clientToServer,n.type=new ne.ProtocolRequestType(n.method)})(nw=v.ExecuteCommandRequest||(v.ExecuteCommandRequest={}));var rw;(function(n){n.method="workspace/applyEdit",n.messageDirection=ne.MessageDirection.serverToClient,n.type=new ne.ProtocolRequestType("workspace/applyEdit")})(rw=v.ApplyWorkspaceEditRequest||(v.ApplyWorkspaceEditRequest={}))});var Rp=Z(_o=>{"use strict";E();D();x();R();S();Object.defineProperty(_o,"__esModule",{value:!0});_o.createProtocolConnection=void 0;var Sp=yr();function iw(n,e,t,r){return Sp.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Sp.createMessageConnection)(n,e,t,r)}_o.createProtocolConnection=iw});var Tp=Z(Gt=>{"use strict";E();D();x();R();S();var ow=Gt&&Gt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),bo=Gt&&Gt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ow(e,n,t)};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.LSPErrorCodes=Gt.createProtocolConnection=void 0;bo(yr(),Gt);bo(go(),Gt);bo(lt(),Gt);bo(xp(),Gt);var sw=Rp();Object.defineProperty(Gt,"createProtocolConnection",{enumerable:!0,get:function(){return sw.createProtocolConnection}});var aw;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(aw=Gt.LSPErrorCodes||(Gt.LSPErrorCodes={}))});var De=Z(qn=>{"use strict";E();D();x();R();S();var cw=qn&&qn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),kp=qn&&qn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&cw(e,n,t)};Object.defineProperty(qn,"__esModule",{value:!0});qn.createProtocolConnection=void 0;var uw=Ua();kp(Ua(),qn);kp(Tp(),qn);function lw(n,e,t,r){return(0,uw.createMessageConnection)(n,e,t,r)}qn.createProtocolConnection=lw});var xn=Z(gt=>{"use strict";E();D();x();R();S();Object.defineProperty(gt,"__esModule",{value:!0});gt.asPromise=gt.thenable=gt.typedArray=gt.stringArray=gt.array=gt.func=gt.error=gt.number=gt.string=gt.boolean=void 0;function dw(n){return n===!0||n===!1}gt.boolean=dw;function Bp(n){return typeof n=="string"||n instanceof String}gt.string=Bp;function fw(n){return typeof n=="number"||n instanceof Number}gt.number=fw;function pw(n){return n instanceof Error}gt.error=pw;function Pp(n){return typeof n=="function"}gt.func=Pp;function Fp(n){return Array.isArray(n)}gt.array=Fp;function hw(n){return Fp(n)&&n.every(e=>Bp(e))}gt.stringArray=hw;function gw(n,e){return Array.isArray(n)&&n.every(e)}gt.typedArray=gw;function qp(n){return n&&Pp(n.then)}gt.thenable=qp;function mw(n){return n instanceof Promise?n:qp(n)?new Promise((e,t)=>{n.then(r=>e(r),r=>t(r))}):Promise.resolve(n)}gt.asPromise=mw});var ft=Z(pn=>{"use strict";E();D();x();R();S();Object.defineProperty(pn,"__esModule",{value:!0});pn.generateUuid=pn.parse=pn.isUUID=pn.v4=pn.empty=void 0;var ki=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Be=class extends ki{constructor(){super([Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),"-",Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),"-","4",Be._randomHex(),Be._randomHex(),Be._randomHex(),"-",Be._oneOf(Be._timeHighBits),Be._randomHex(),Be._randomHex(),Be._randomHex(),"-",Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex(),Be._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Be._oneOf(Be._chars)}};Be._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Be._timeHighBits=["8","9","a","b"];pn.empty=new ki("00000000-0000-0000-0000-000000000000");function Qp(){return new Be}pn.v4=Qp;var yw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ip(n){return yw.test(n)}pn.isUUID=Ip;function vw(n){if(!Ip(n))throw new Error("invalid uuid");return new ki(n)}pn.parse=vw;function ww(){return Qp().asHex()}pn.generateUuid=ww});var Me=Z(Et=>{"use strict";E();D();x();R();S();Object.defineProperty(Et,"__esModule",{value:!0});Et.WorkspaceFeature=Et.TextDocumentLanguageFeature=Et.TextDocumentEventFeature=Et.DynamicDocumentFeature=Et.DynamicFeature=Et.StaticFeature=Et.ensure=Et.LSPCancellationError=void 0;var wr=we("vscode"),Ya=De(),zt=xn(),Op=ft(),ec=class extends wr.CancellationError{constructor(e){super(),this.data=e}};Et.LSPCancellationError=ec;function Cw(n,e){return n[e]===void 0&&(n[e]={}),n[e]}Et.ensure=Cw;var Aw;(function(n){function e(t){let r=t;return r!=null&&zt.func(r.fillClientCapabilities)&&zt.func(r.initialize)&&zt.func(r.getState)&&zt.func(r.dispose)&&(r.fillInitializeParams===void 0||zt.func(r.fillInitializeParams))}n.is=e})(Aw=Et.StaticFeature||(Et.StaticFeature={}));var _w;(function(n){function e(t){let r=t;return r!=null&&zt.func(r.fillClientCapabilities)&&zt.func(r.initialize)&&zt.func(r.getState)&&zt.func(r.dispose)&&(r.fillInitializeParams===void 0||zt.func(r.fillInitializeParams))&&zt.func(r.register)&&zt.func(r.unregister)&&r.registrationType!==void 0}n.is=e})(_w=Et.DynamicFeature||(Et.DynamicFeature={}));var Bi=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let i of e){t++;for(let s of wr.workspace.textDocuments)if(wr.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=t>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};Et.DynamicDocumentFeature=Bi;var tc=class extends Bi{constructor(e,t,r,i,s,o,u){super(e),this._event=t,this._type=r,this._middleware=i,this._createParams=s,this._textDocument=o,this._selectorFilter=u,this._selectors=new Map,this._onNotificationSent=new wr.EventEmitter}static textDocumentFilter(e,t){for(let r of e)if(wr.languages.match(r,t)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(r),this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>t(i)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(wr.languages.match(t,e)>0)return{send:r=>this.callback(r)}}};Et.TextDocumentEventFeature=tc;var nc=class extends Bi{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(Ya.TextDocumentRegistrationOptions.is(t)){let r=Ya.StaticRegistrationOptions.hasId(t)?t.id:Op.generateUuid(),i=t.documentSelector??e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(zt.boolean(t)&&t===!0||Ya.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=zt.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[Op.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return zt.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&&wr.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};Et.TextDocumentLanguageFeature=nc;var rc=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};Et.WorkspaceFeature=rc});var Lp=Z((kR,Mp)=>{E();D();x();R();S();var bw=typeof H=="object"&&H&&H.platform==="win32";Mp.exports=bw?{sep:"\\"}:{sep:"/"}});var Kp=Z((IR,Hp)=>{"use strict";E();D();x();R();S();Hp.exports=Up;function Up(n,e,t){n instanceof RegExp&&(n=Np(n,t)),e instanceof RegExp&&(e=Np(e,t));var r=jp(n,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function Np(n,e){var t=e.match(n);return t?t[0]:null}Up.range=jp;function jp(n,e,t){var r,i,s,o,u,p=t.indexOf(n),h=t.indexOf(e,p+1),C=p;if(p>=0&&h>0){if(n===e)return[p,h];for(r=[],s=t.length;C>=0&&!u;)C==p?(r.push(C),p=t.indexOf(n,C+1)):r.length==1?u=[r.pop(),h]:(i=r.pop(),i<s&&(s=i,o=h),h=t.indexOf(e,C+1)),C=p<h&&p>=0?p:h;r.length&&(u=[s,o])}return u}});var Xp=Z((jR,Zp)=>{E();D();x();R();S();var Wp=Kp();Zp.exports=xw;var $p="\0SLASH"+Math.random()+"\0",Gp="\0OPEN"+Math.random()+"\0",oc="\0CLOSE"+Math.random()+"\0",zp="\0COMMA"+Math.random()+"\0",Jp="\0PERIOD"+Math.random()+"\0";function ic(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function Ew(n){return n.split("\\\\").join($p).split("\\{").join(Gp).split("\\}").join(oc).split("\\,").join(zp).split("\\.").join(Jp)}function Dw(n){return n.split($p).join("\\").split(Gp).join("{").split(oc).join("}").split(zp).join(",").split(Jp).join(".")}function Vp(n){if(!n)return[""];var e=[],t=Wp("{","}",n);if(!t)return n.split(",");var r=t.pre,i=t.body,s=t.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var u=Vp(s);return s.length&&(o[o.length-1]+=u.shift(),o.push.apply(o,u)),e.push.apply(e,o),e}function xw(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),Pi(Ew(n),!0).map(Dw)):[]}function Sw(n){return"{"+n+"}"}function Rw(n){return/^-?0\d/.test(n)}function Tw(n,e){return n<=e}function kw(n,e){return n>=e}function Pi(n,e){var t=[],r=Wp("{","}",n);if(!r)return[n];var i=r.pre,s=r.post.length?Pi(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var u=i+"{"+r.body+"}"+s[o];t.push(u)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),C=p||h,T=r.body.indexOf(",")>=0;if(!C&&!T)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+oc+r.post,Pi(n)):[n];var A;if(C)A=r.body.split(/\.\./);else if(A=Vp(r.body),A.length===1&&(A=Pi(A[0],!1).map(Sw),A.length===1))return s.map(function(nt){return r.pre+A[0]+nt});var B;if(C){var _=ic(A[0]),M=ic(A[1]),U=Math.max(A[0].length,A[1].length),Y=A.length==3?Math.abs(ic(A[2])):1,le=Tw,ie=M<_;ie&&(Y*=-1,le=kw);var ye=A.some(Rw);B=[];for(var te=_;le(te,M);te+=Y){var de;if(h)de=String.fromCharCode(te),de==="\\"&&(de="");else if(de=String(te),ye){var re=U-de.length;if(re>0){var he=new Array(re+1).join("0");te<0?de="-"+he+de.slice(1):de=he+de}}B.push(de)}}else{B=[];for(var be=0;be<A.length;be++)B.push.apply(B,Pi(A[be],!1))}for(var be=0;be<B.length;be++)for(var o=0;o<s.length;o++){var u=i+B[be]+s[o];(!e||C||u)&&t.push(u)}}return t}});var Do=Z((JR,lc)=>{E();D();x();R();S();var an=lc.exports=(n,e,t={})=>(Eo(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Jr(e,t).match(n));lc.exports=an;var cc=Lp();an.sep=cc.sep;var Sn=Symbol("globstar **");an.GLOBSTAR=Sn;var Bw=Xp(),Yp={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},uc="[^/]",sc=uc+"*?",Pw="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Fw="(?:(?!(?:\\/|^)\\.).)*?",nh=n=>n.split("").reduce((e,t)=>(e[t]=!0,e),{}),eh=nh("().*{}+?[]^$\\!"),qw=nh("[.("),th=/\/+/;an.filter=(n,e={})=>(t,r,i)=>an(t,n,e);var sr=(n,e={})=>{let t={};return Object.keys(n).forEach(r=>t[r]=n[r]),Object.keys(e).forEach(r=>t[r]=e[r]),t};an.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return an;let e=an,t=(r,i,s)=>e(r,i,sr(n,s));return t.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,sr(n,s))}},t.Minimatch.defaults=r=>e.defaults(sr(n,r)).Minimatch,t.filter=(r,i)=>e.filter(r,sr(n,i)),t.defaults=r=>e.defaults(sr(n,r)),t.makeRe=(r,i)=>e.makeRe(r,sr(n,i)),t.braceExpand=(r,i)=>e.braceExpand(r,sr(n,i)),t.match=(r,i,s)=>e.match(r,i,sr(n,s)),t};an.braceExpand=(n,e)=>rh(n,e);var rh=(n,e={})=>(Eo(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Bw(n)),Qw=1024*64,Eo=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>Qw)throw new TypeError("pattern is too long")},ac=Symbol("subparse");an.makeRe=(n,e)=>new Jr(n,e||{}).makeRe();an.match=(n,e,t={})=>{let r=new Jr(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};var Iw=n=>n.replace(/\\(.)/g,"$1"),Ow=n=>n.replace(/\\([^-\]])/g,"$1"),Mw=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Lw=n=>n.replace(/[[\]\\]/g,"\\$&"),Jr=class{constructor(e,t){Eo(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(th)),this.debug(this.pattern,r),r=r.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,u=e.length,p=t.length;s<u&&o<p;s++,o++){this.debug("matchOne loop");var h=t[o],C=e[s];if(this.debug(t,h,C),h===!1)return!1;if(h===Sn){this.debug("GLOBSTAR",[t,h,C]);var T=s,A=o+1;if(A===p){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;T<u;){var B=e[T];if(this.debug(`
globstar while`,e,T,t,A,B),this.matchOne(e.slice(T),t.slice(A),r))return this.debug("globstar found match!",T,u,B),!0;if(B==="."||B===".."||!i.dot&&B.charAt(0)==="."){this.debug("dot detected!",e,T,t,A);break}this.debug("globstar swallow a segment, and continue"),T++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,T,t,A),T===u))}var _;if(typeof h=="string"?(_=C===h,this.debug("string match",h,C,_)):(_=C.match(h),this.debug("pattern match",h,C,_)),!_)return!1}if(s===u&&o===p)return!0;if(s===u)return r;if(o===p)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return rh(this.pattern,this.options)}parse(e,t){Eo(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Sn;if(e==="")return"";let i="",s=!1,o=!1,u=[],p=[],h,C=!1,T=-1,A=-1,B,_,M,U=e.charAt(0)===".",Y=r.dot||U,le=()=>U?"":Y?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",ie=re=>re.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",ye=()=>{if(h){switch(h){case"*":i+=sc,s=!0;break;case"?":i+=uc,s=!0;break;default:i+="\\"+h;break}this.debug("clearStateChar %j %j",h,i),h=!1}};for(let re=0,he;re<e.length&&(he=e.charAt(re));re++){if(this.debug("%s	%s %s %j",e,re,i,he),o){if(he==="/")return!1;eh[he]&&(i+="\\"),i+=he,o=!1;continue}switch(he){case"/":return!1;case"\\":if(C&&e.charAt(re+1)==="-"){i+=he;continue}ye(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,re,i,he),C){this.debug("  in class"),he==="!"&&re===A+1&&(he="^"),i+=he;continue}this.debug("call clearStateChar %j",h),ye(),h=he,r.noext&&ye();continue;case"(":{if(C){i+="(";continue}if(!h){i+="\\(";continue}let be={type:h,start:re-1,reStart:i.length,open:Yp[h].open,close:Yp[h].close};this.debug(this.pattern,"	",be),u.push(be),i+=be.open,be.start===0&&be.type!=="!"&&(U=!0,i+=ie(e.slice(re+1))),this.debug("plType %j %j",h,i),h=!1;continue}case")":{let be=u[u.length-1];if(C||!be){i+="\\)";continue}u.pop(),ye(),s=!0,_=be,i+=_.close,_.type==="!"&&p.push(Object.assign(_,{reEnd:i.length}));continue}case"|":{let be=u[u.length-1];if(C||!be){i+="\\|";continue}ye(),i+="|",be.start===0&&be.type!=="!"&&(U=!0,i+=ie(e.slice(re+1)));continue}case"[":if(ye(),C){i+="\\"+he;continue}C=!0,A=re,T=i.length,i+=he;continue;case"]":if(re===A+1||!C){i+="\\"+he;continue}B=e.substring(A+1,re);try{RegExp("["+Lw(Ow(B))+"]"),i+=he}catch{i=i.substring(0,T)+"(?:$.)"}s=!0,C=!1;continue;default:ye(),eh[he]&&!(he==="^"&&C)&&(i+="\\"),i+=he;break}}for(C&&(B=e.slice(A+1),M=this.parse(B,ac),i=i.substring(0,T)+"\\["+M[0],s=s||M[1]),_=u.pop();_;_=u.pop()){let re;re=i.slice(_.reStart+_.open.length),this.debug("setting tail",i,_),re=re.replace(/((?:\\{2}){0,64})(\\?)\|/g,(be,nt,rt)=>(rt||(rt="\\"),nt+nt+rt+"|")),this.debug(`tail=%j
   %s`,re,re,_,i);let he=_.type==="*"?sc:_.type==="?"?uc:"\\"+_.type;s=!0,i=i.slice(0,_.reStart)+he+"\\("+re}ye(),o&&(i+="\\\\");let te=qw[i.charAt(0)];for(let re=p.length-1;re>-1;re--){let he=p[re],be=i.slice(0,he.reStart),nt=i.slice(he.reStart,he.reEnd-8),rt=i.slice(he.reEnd),at=i.slice(he.reEnd-8,he.reEnd)+rt,kt=be.split(")").length,X=be.split("(").length-kt,Oe=rt;for(let ct=0;ct<X;ct++)Oe=Oe.replace(/\)[+*?]?/,"");rt=Oe;let ht=rt===""&&t!==ac?"(?:$|\\/)":"";i=be+nt+rt+ht+at}if(i!==""&&s&&(i="(?=.)"+i),te&&(i=le()+i),t===ac)return[i,s];if(r.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return Iw(e);let de=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",de),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?sc:t.dot?Pw:Fw,i=t.nocase?"i":"",s=e.map(o=>(o=o.map(u=>typeof u=="string"?Mw(u):u===Sn?Sn:u._src).reduce((u,p)=>(u[u.length-1]===Sn&&p===Sn||u.push(p),u),[]),o.forEach((u,p)=>{u!==Sn||o[p-1]===Sn||(p===0?o.length>1?o[p+1]="(?:\\/|"+r+"\\/)?"+o[p+1]:o[p]=r:p===o.length-1?o[p-1]+="(?:\\/|"+r+")?":(o[p-1]+="(?:\\/|\\/"+r+"\\/)"+o[p+1],o[p+1]=Sn))}),o.filter(u=>u!==Sn).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;cc.sep!=="/"&&(e=e.split(cc.sep).join("/")),e=e.split(th),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let u=i[o],p=e;if(r.matchBase&&u.length===1&&(p=[s]),this.matchOne(p,u,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return an.defaults(e).Minimatch}};an.Minimatch=Jr});var vc=Z(Qn=>{"use strict";E();D();x();R();S();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.DiagnosticFeature=Qn.DiagnosticPullMode=Qn.vsdiag=void 0;var Nw=Do(),Ie=we("vscode"),mt=De(),Uw=ft(),dc=Me();function xo(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Rn;(function(n){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(Rn=Qn.vsdiag||(Qn.vsdiag={}));var fc;(function(n){n.onType="onType",n.onSave="onSave"})(fc=Qn.DiagnosticPullMode||(Qn.DiagnosticPullMode={}));var Ut;(function(n){n.active="open",n.reschedule="reschedule",n.outDated="drop"})(Ut||(Ut={}));var Cr=class{constructor(){this.open=new Set,this._onOpen=new Ie.EventEmitter,this._onClose=new Ie.EventEmitter,Cr.fillTabResources(this.open);let e=t=>{if(t.closed.length===0&&t.opened.length===0)return;let r=this.open,i=new Set;Cr.fillTabResources(i);let s=new Set,o=new Set(i);for(let u of r.values())i.has(u)?o.delete(u):s.add(u);if(this.open=i,s.size>0){let u=new Set;for(let p of s)u.add(Ie.Uri.parse(p));this._onClose.fire(u)}if(o.size>0){let u=new Set;for(let p of o)u.add(Ie.Uri.parse(p));this._onOpen.fire(u)}};Ie.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Ie.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Ie.Uri?Ie.window.activeTextEditor?.document.uri===e:Ie.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof Ie.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=new Set;return Cr.fillTabResources(new Set,e),e}static fillTabResources(e,t){let r=e??new Set;for(let i of Ie.window.tabGroups.all)for(let s of i.tabs){let o=s.input,u;o instanceof Ie.TabInputText?u=o.uri:o instanceof Ie.TabInputTextDiff&&(u=o.modified),u!==void 0&&!r.has(u.toString())&&(r.add(u.toString()),t!==void 0&&t.add(u))}}},xt;(function(n){n[n.document=1]="document",n[n.workspace=2]="workspace"})(xt||(xt={}));var Wn;(function(n){function e(t){return t instanceof Ie.Uri?t.toString():t.uri.toString()}n.asKey=e})(Wn||(Wn={}));var pc=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===xt.document?this.documentPullStates:this.workspacePullStates,[s,o,u]=t instanceof Ie.Uri?[t.toString(),t,r]:[t.uri.toString(),t.uri,t.version],p=i.get(s);return p===void 0&&(p={document:o,pulledVersion:u,resultId:void 0},i.set(s,p)),p}update(e,t,r,i){let s=e===xt.document?this.documentPullStates:this.workspacePullStates,[o,u,p,h]=t instanceof Ie.Uri?[t.toString(),t,r,i]:[t.uri.toString(),t.uri,t.version,r],C=s.get(o);C===void 0?(C={document:u,pulledVersion:p,resultId:h},s.set(o,C)):(C.pulledVersion=p,C.resultId=h)}unTrack(e,t){let r=Wn.asKey(t);(e===xt.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,t){let r=Wn.asKey(t);return(e===xt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){let r=Wn.asKey(t);return(e===xt.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&&(r=this.documentPullStates.get(t)),r.resultId!==void 0&&e.push({uri:t,value:r.resultId});return e}},hc=class{constructor(e,t,r){this.client=e,this.tabs=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Ie.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Ie.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new pc,this.workspaceErrorCounter=0}knows(e,t){let r=t instanceof Ie.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(r.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;let r=e instanceof Ie.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let r=e instanceof Ie.Uri,i=r?e:e.uri,s=i.toString();t=r?t:e.version;let o=this.openRequests.get(s),u=r?this.documentStates.track(xt.document,e,t):this.documentStates.track(xt.document,e);if(o===void 0){let p=new Ie.CancellationTokenSource;this.openRequests.set(s,{state:Ut.active,document:e,version:t,tokenSource:p});let h,C;try{h=await this.provider.provideDiagnostics(e,u.resultId,p.token)??{kind:Rn.DocumentDiagnosticReportKind.full,items:[]}}catch(T){if(T instanceof dc.LSPCancellationError&&mt.DiagnosticServerCancellationData.is(T.data)&&T.data.retriggerRequest===!1&&(C={state:Ut.outDated,document:e}),C===void 0&&T instanceof Ie.CancellationError)C={state:Ut.reschedule,document:e};else throw T}if(C=C??this.openRequests.get(s),C===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(xt.document,e);return}if(C.state===Ut.outDated)return;h!==void 0&&(h.kind===Rn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,h.items),u.pulledVersion=t,u.resultId=h.resultId),C.state===Ut.reschedule&&this.pull(e)}else o.state===Ut.active?(o.tokenSource.cancel(),this.openRequests.set(s,{state:Ut.reschedule,document:o.document})):o.state===Ut.outDated&&this.openRequests.set(s,{state:Ut.reschedule,document:o.document})}forgetDocument(e){let t=e instanceof Ie.Uri?e:e.uri,r=t.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:Ut.reschedule,document:e}):this.pull(e,()=>{this.forget(xt.document,e)}):(i!==void 0&&(i.state===Ut.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:Ut.outDated,document:e})),this.diagnostics.delete(t),this.forget(xt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,mt.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof dc.LSPCancellationError)&&!mt.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,mt.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Ie.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===Rn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(xt.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(xt.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=>{let s=(u,p,h)=>{let C={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(u instanceof Ie.Uri?u:u.uri)},previousResultId:p};return this.isDisposed===!0||!this.client.isRunning()?{kind:Rn.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(mt.DocumentDiagnosticRequest.type,C,h).then(async T=>T==null||this.isDisposed||h.isCancellationRequested?{kind:Rn.DocumentDiagnosticReportKind.full,items:[]}:T.kind===mt.DocumentDiagnosticReportKind.Full?{kind:Rn.DocumentDiagnosticReportKind.full,resultId:T.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(T.items,h)}:{kind:Rn.DocumentDiagnosticReportKind.unChanged,resultId:T.resultId},T=>this.client.handleFailedRequest(mt.DocumentDiagnosticRequest.type,h,T,{kind:Rn.DocumentDiagnosticReportKind.full,items:[]}))},o=this.client.middleware;return o.provideDiagnostics?o.provideDiagnostics(t,r,i,s):s(t,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,r,i)=>{let s=async h=>h.kind===mt.DocumentDiagnosticReportKind.Full?{kind:Rn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:await this.client.protocol2CodeConverter.asDiagnostics(h.items,r)}:{kind:Rn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},o=h=>{let C=[];for(let T of h)C.push({uri:this.client.code2ProtocolConverter.asUri(T.uri),value:T.value});return C},u=(h,C)=>{let T=(0,Uw.generateUuid)(),A=this.client.onProgress(mt.WorkspaceDiagnosticRequest.partialResult,T,async _=>{if(_==null){i(null);return}let M={items:[]};for(let U of _.items)try{M.items.push(await s(U))}catch(Y){this.client.error("Converting workspace diagnostics failed.",Y)}i(M)}),B={identifier:this.options.identifier,previousResultIds:o(h),partialResultToken:T};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(mt.WorkspaceDiagnosticRequest.type,B,C).then(async _=>{if(C.isCancellationRequested)return{items:[]};let M={items:[]};for(let U of _.items)M.items.push(await s(U));return A.dispose(),i(M),{items:[]}},_=>(A.dispose(),this.client.handleFailedRequest(mt.DocumentDiagnosticRequest.type,C,_,{items:[]})))},p=this.client.middleware;return p.provideWorkspaceDiagnostics?p.provideWorkspaceDiagnostics(t,r,i,u):u(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===Ut.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:Ut.outDated,document:t.document});this.diagnostics.dispose()}},gc=class{constructor(e){this.diagnosticRequestor=e,this.documents=new mt.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=Wn.asKey(e);this.documents.has(t)||(this.documents.set(t,e,mt.Touch.Last),this.trigger())}remove(e){let t=Wn.asKey(e);this.documents.delete(t),this.documents.size===0?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,mt.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=Wn.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,mt.Touch.Last),t===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?Wn.asKey(this.endDocument):void 0}},mc=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),o=[],u=_=>{let M=r.documentSelector;if(i.match!==void 0)return i.match(M,_);for(let U of M)if(mt.TextDocumentFilter.is(U)){if(typeof U=="string"||U.language!==void 0&&U.language!=="*"||U.scheme!==void 0&&U.scheme!=="*"&&U.scheme!==_.scheme)return!1;if(U.pattern!==void 0){let Y=new Nw.Minimatch(U.pattern,{noext:!0});if(!Y.makeRe()||!Y.match(_.fsPath))return!1}}return!0},p=_=>_ instanceof Ie.Uri?u(_):Ie.languages.match(s,_)>0&&t.isVisible(_),h=_=>_ instanceof Ie.Uri?this.activeTextDocument?.uri.toString()===_.toString():this.activeTextDocument===_;this.diagnosticRequestor=new hc(e,t,r),this.backgroundScheduler=new gc(this.diagnosticRequestor);let C=_=>{!p(_)||!r.interFileDependencies||h(_)||this.backgroundScheduler.add(_)};this.activeTextDocument=Ie.window.activeTextEditor?.document,Ie.window.onDidChangeActiveTextEditor(_=>{let M=this.activeTextDocument;this.activeTextDocument=_?.document,M!==void 0&&C(M),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let T=e.getFeature(mt.DidOpenTextDocumentNotification.method);o.push(T.onNotificationSent(_=>{let M=_.textDocument;this.diagnosticRequestor.knows(xt.document,M)||p(M)&&this.diagnosticRequestor.pull(M,()=>{C(M)})})),t.onOpen(_=>{for(let M of _){if(this.diagnosticRequestor.knows(xt.document,M))continue;let U=M.toString(),Y;for(let le of Ie.workspace.textDocuments)if(U===le.uri.toString()){Y=le;break}Y!==void 0&&p(Y)?this.diagnosticRequestor.pull(Y,()=>{C(Y)}):p(M)&&this.diagnosticRequestor.pull(M,()=>{C(M)})}});let A=new Set;for(let _ of Ie.workspace.textDocuments)p(_)&&(this.diagnosticRequestor.pull(_,()=>{C(_)}),A.add(_.uri.toString()));if(i.onTabs===!0)for(let _ of t.getTabResources())!A.has(_.toString())&&p(_)&&this.diagnosticRequestor.pull(_,()=>{C(_)});if(i.onChange===!0){let _=e.getFeature(mt.DidChangeTextDocumentNotification.method);o.push(_.onNotificationSent(async M=>{let U=M.textDocument;(i.filter===void 0||!i.filter(U,fc.onType))&&this.diagnosticRequestor.knows(xt.document,U)&&this.diagnosticRequestor.pull(U,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let _=e.getFeature(mt.DidSaveTextDocumentNotification.method);o.push(_.onNotificationSent(M=>{let U=M.textDocument;(i.filter===void 0||!i.filter(U,fc.onSave))&&this.diagnosticRequestor.knows(xt.document,U)&&this.diagnosticRequestor.pull(M.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let B=e.getFeature(mt.DidCloseTextDocumentNotification.method);o.push(B.onNotificationSent(_=>{this.cleanUpDocument(_.textDocument)})),t.onClose(_=>{for(let M of _)this.cleanUpDocument(M)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let _ of Ie.workspace.textDocuments)p(_)&&this.diagnosticRequestor.pull(_)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Ie.Disposable.from(...o,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(xt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},yc=class extends dc.TextDocumentLanguageFeature{constructor(e){super(e,mt.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=xo(xo(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,xo(xo(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(mt.DiagnosticRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(t,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new Cr);let t=new mc(this._client,this.tabs,e);return[t.disposable,t]}};Qn.DiagnosticFeature=yc});var So=Z(jt=>{"use strict";E();D();x();R();S();Object.defineProperty(jt,"__esModule",{value:!0});jt.forEach=jt.mapAsync=jt.map=jt.clearTestMode=jt.setTestMode=jt.Semaphore=jt.Delayer=void 0;var qi=De(),wc=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,qi.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};jt.Delayer=wc;var Cc=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,qi.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};jt.Semaphore=Cc;var Ac=!1;function jw(){Ac=!0}jt.setTestMode=jw;function Hw(){Ac=!1}jt.clearTestMode=Hw;var ih=15,Fi=class{constructor(e=ih){this.yieldAfter=Ac===!0?Math.max(e,2):Math.max(e,ih),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function Kw(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),s=new Fi(r?.yieldAfter);function o(p){s.start();for(let h=p;h<n.length;h++)if(i[h]=e(n[h]),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),h+1;return-1}let u=o(0);for(;u!==-1&&!(t!==void 0&&t.isCancellationRequested);)u=await new Promise(p=>{(0,qi.RAL)().timer.setImmediate(()=>{p(o(u))})});return i}jt.map=Kw;async function Ww(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),s=new Fi(r?.yieldAfter);async function o(p){s.start();for(let h=p;h<n.length;h++)if(i[h]=await e(n[h],t),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),h+1;return-1}let u=await o(0);for(;u!==-1&&!(t!==void 0&&t.isCancellationRequested);)u=await new Promise(p=>{(0,qi.RAL)().timer.setImmediate(()=>{p(o(u))})});return i}jt.mapAsync=Ww;async function $w(n,e,t,r){if(n.length===0)return;let i=new Fi(r?.yieldAfter);function s(u){i.start();for(let p=u;p<n.length;p++)if(e(n[p]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),p+1;return-1}let o=s(0);for(;o!==-1&&!(t!==void 0&&t.isCancellationRequested);)o=await new Promise(u=>{(0,qi.RAL)().timer.setImmediate(()=>{u(s(o))})})}jt.forEach=$w});var Ec=Z(bc=>{"use strict";E();D();x();R();S();Object.defineProperty(bc,"__esModule",{value:!0});var Gw=we("vscode"),_c=class extends Gw.CompletionItem{constructor(e){super(e)}};bc.default=_c});var Sc=Z(xc=>{"use strict";E();D();x();R();S();Object.defineProperty(xc,"__esModule",{value:!0});var zw=we("vscode"),Dc=class extends zw.CodeLens{constructor(e){super(e)}};xc.default=Dc});var kc=Z(Tc=>{"use strict";E();D();x();R();S();Object.defineProperty(Tc,"__esModule",{value:!0});var Jw=we("vscode"),Rc=class extends Jw.DocumentLink{constructor(e,t){super(e,t)}};Tc.default=Rc});var Fc=Z(Pc=>{"use strict";E();D();x();R();S();Object.defineProperty(Pc,"__esModule",{value:!0});var Vw=we("vscode"),Bc=class extends Vw.CodeAction{constructor(e,t){super(e),this.data=t}};Pc.default=Bc});var Ic=Z(Ar=>{"use strict";E();D();x();R();S();Object.defineProperty(Ar,"__esModule",{value:!0});Ar.ProtocolDiagnostic=Ar.DiagnosticCode=void 0;var Zw=we("vscode"),qc=xn(),Xw;(function(n){function e(t){let r=t;return r!=null&&(qc.number(r.value)||qc.string(r.value))&&qc.string(r.target)}n.is=e})(Xw=Ar.DiagnosticCode||(Ar.DiagnosticCode={}));var Qc=class extends Zw.Diagnostic{constructor(e,t,r,i){super(e,t,r),this.data=i,this.hasDiagnosticCode=!1}};Ar.ProtocolDiagnostic=Qc});var Lc=Z(Mc=>{"use strict";E();D();x();R();S();Object.defineProperty(Mc,"__esModule",{value:!0});var Yw=we("vscode"),Oc=class extends Yw.CallHierarchyItem{constructor(e,t,r,i,s,o,u){super(e,t,r,i,s,o),u!==void 0&&(this.data=u)}};Mc.default=Oc});var jc=Z(Uc=>{"use strict";E();D();x();R();S();Object.defineProperty(Uc,"__esModule",{value:!0});var eC=we("vscode"),Nc=class extends eC.TypeHierarchyItem{constructor(e,t,r,i,s,o,u){super(e,t,r,i,s,o),u!==void 0&&(this.data=u)}};Uc.default=Nc});var Wc=Z(Kc=>{"use strict";E();D();x();R();S();Object.defineProperty(Kc,"__esModule",{value:!0});var Ro=we("vscode"),Hc=class extends Ro.SymbolInformation{constructor(e,t,r,i,s){let o=!(i instanceof Ro.Uri);super(e,t,r,o?i:new Ro.Location(i,new Ro.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}};Kc.default=Hc});var zc=Z(Gc=>{"use strict";E();D();x();R();S();Object.defineProperty(Gc,"__esModule",{value:!0});var tC=we("vscode"),$c=class extends tC.InlayHint{constructor(e,t,r){super(e,t,r)}};Gc.default=$c});var ah=Z(To=>{"use strict";E();D();x();R();S();Object.defineProperty(To,"__esModule",{value:!0});To.createConverter=void 0;var Dt=we("vscode"),ke=De(),Vr=xn(),oh=So(),nC=Ec(),rC=Sc(),iC=kc(),oC=Fc(),sh=Ic(),sC=Lc(),aC=jc(),cC=Wc(),uC=zc(),Jc;(function(n){function e(t){let r=t;return r&&!!r.inserting&&!!r.replacing}n.is=e})(Jc||(Jc={}));function lC(n){let t=n||(m=>m.toString());function r(m){return t(m)}function i(m){return{uri:t(m.uri)}}function s(m){return{uri:t(m.uri),languageId:m.languageId,version:m.version,text:m.getText()}}function o(m){return{uri:t(m.uri),version:m.version}}function u(m){return{textDocument:s(m)}}function p(m){let L=m;return!!L.document&&!!L.contentChanges}function h(m){let L=m;return!!L.uri&&!!L.version}function C(m,L,oe){if(h(m))return{textDocument:{uri:t(m.uri),version:m.version},contentChanges:[{text:m.getText()}]};if(p(m)){let Te=L,q=oe;return{textDocument:{uri:t(Te),version:q},contentChanges:m.contentChanges.map(P=>{let F=P.range;return{range:{start:{line:F.start.line,character:F.start.character},end:{line:F.end.line,character:F.end.character}},rangeLength:P.rangeLength,text:P.text}})}}else throw Error("Unsupported text document change parameter")}function T(m){return{textDocument:i(m)}}function A(m,L=!1){let oe={textDocument:i(m)};return L&&(oe.text=m.getText()),oe}function B(m){switch(m){case Dt.TextDocumentSaveReason.Manual:return ke.TextDocumentSaveReason.Manual;case Dt.TextDocumentSaveReason.AfterDelay:return ke.TextDocumentSaveReason.AfterDelay;case Dt.TextDocumentSaveReason.FocusOut:return ke.TextDocumentSaveReason.FocusOut}return ke.TextDocumentSaveReason.Manual}function _(m){return{textDocument:i(m.document),reason:B(m.reason)}}function M(m){return{files:m.files.map(L=>({uri:t(L)}))}}function U(m){return{files:m.files.map(L=>({oldUri:t(L.oldUri),newUri:t(L.newUri)}))}}function Y(m){return{files:m.files.map(L=>({uri:t(L)}))}}function le(m){return{files:m.files.map(L=>({uri:t(L)}))}}function ie(m){return{files:m.files.map(L=>({oldUri:t(L.oldUri),newUri:t(L.newUri)}))}}function ye(m){return{files:m.files.map(L=>({uri:t(L)}))}}function te(m,L){return{textDocument:i(m),position:Oe(L)}}function de(m){switch(m){case Dt.CompletionTriggerKind.TriggerCharacter:return ke.CompletionTriggerKind.TriggerCharacter;case Dt.CompletionTriggerKind.TriggerForIncompleteCompletions:return ke.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ke.CompletionTriggerKind.Invoked}}function re(m,L,oe){return{textDocument:i(m),position:Oe(L),context:{triggerKind:de(oe.triggerKind),triggerCharacter:oe.triggerCharacter}}}function he(m){switch(m){case Dt.SignatureHelpTriggerKind.Invoke:return ke.SignatureHelpTriggerKind.Invoked;case Dt.SignatureHelpTriggerKind.TriggerCharacter:return ke.SignatureHelpTriggerKind.TriggerCharacter;case Dt.SignatureHelpTriggerKind.ContentChange:return ke.SignatureHelpTriggerKind.ContentChange}}function be(m){return{label:m.label}}function nt(m){return m.map(be)}function rt(m){return{label:m.label,parameters:nt(m.parameters)}}function at(m){return m.map(rt)}function kt(m){return m===void 0?m:{signatures:at(m.signatures),activeSignature:m.activeSignature,activeParameter:m.activeParameter}}function X(m,L,oe){return{textDocument:i(m),position:Oe(L),context:{isRetrigger:oe.isRetrigger,triggerCharacter:oe.triggerCharacter,triggerKind:he(oe.triggerKind),activeSignatureHelp:kt(oe.activeSignatureHelp)}}}function Oe(m){return{line:m.line,character:m.character}}function ht(m){return m==null?m:{line:m.line>ke.uinteger.MAX_VALUE?ke.uinteger.MAX_VALUE:m.line,character:m.character>ke.uinteger.MAX_VALUE?ke.uinteger.MAX_VALUE:m.character}}function ct(m,L){return oh.map(m,ht,L)}function ze(m){return m==null?m:{start:ht(m.start),end:ht(m.end)}}function je(m){return m==null?m:ke.Location.create(r(m.uri),ze(m.range))}function Pe(m){switch(m){case Dt.DiagnosticSeverity.Error:return ke.DiagnosticSeverity.Error;case Dt.DiagnosticSeverity.Warning:return ke.DiagnosticSeverity.Warning;case Dt.DiagnosticSeverity.Information:return ke.DiagnosticSeverity.Information;case Dt.DiagnosticSeverity.Hint:return ke.DiagnosticSeverity.Hint}}function et(m){if(!m)return;let L=[];for(let oe of m){let Te=wt(oe);Te!==void 0&&L.push(Te)}return L.length>0?L:void 0}function wt(m){switch(m){case Dt.DiagnosticTag.Unnecessary:return ke.DiagnosticTag.Unnecessary;case Dt.DiagnosticTag.Deprecated:return ke.DiagnosticTag.Deprecated;default:return}}function mn(m){return{message:m.message,location:je(m.location)}}function dn(m){return m.map(mn)}function St(m){if(m!=null)return Vr.number(m)||Vr.string(m)?m:{value:m.value,target:r(m.target)}}function Bt(m){let L=ke.Diagnostic.create(ze(m.range),m.message),oe=m instanceof sh.ProtocolDiagnostic?m:void 0;oe!==void 0&&oe.data!==void 0&&(L.data=oe.data);let Te=St(m.code);return sh.DiagnosticCode.is(Te)?oe!==void 0&&oe.hasDiagnosticCode?L.code=Te:(L.code=Te.value,L.codeDescription={href:Te.target}):L.code=Te,Vr.number(m.severity)&&(L.severity=Pe(m.severity)),Array.isArray(m.tags)&&(L.tags=et(m.tags)),m.relatedInformation&&(L.relatedInformation=dn(m.relatedInformation)),m.source&&(L.source=m.source),L}function Pt(m,L){return m==null?m:oh.map(m,Bt,L)}function en(m,L){switch(m){case"$string":return L;case ke.MarkupKind.PlainText:return{kind:m,value:L};case ke.MarkupKind.Markdown:return{kind:m,value:L.value};default:return`Unsupported Markup content received. Kind is: ${m}`}}function tn(m){switch(m){case Dt.CompletionItemTag.Deprecated:return ke.CompletionItemTag.Deprecated}}function nn(m){if(m===void 0)return m;let L=[];for(let oe of m){let Te=tn(oe);Te!==void 0&&L.push(Te)}return L}function Rt(m,L){return L!==void 0?L:m+1}function Re(m,L=!1){let oe,Te;Vr.string(m.label)?oe=m.label:(oe=m.label.label,L&&(m.label.detail!==void 0||m.label.description!==void 0)&&(Te={detail:m.label.detail,description:m.label.description}));let q={label:oe};Te!==void 0&&(q.labelDetails=Te);let y=m instanceof nC.default?m:void 0;m.detail&&(q.detail=m.detail),m.documentation&&(!y||y.documentationFormat==="$string"?q.documentation=m.documentation:q.documentation=en(y.documentationFormat,m.documentation)),m.filterText&&(q.filterText=m.filterText),Mt(q,m),Vr.number(m.kind)&&(q.kind=Rt(m.kind,y&&y.originalItemKind)),m.sortText&&(q.sortText=m.sortText),m.additionalTextEdits&&(q.additionalTextEdits=Jt(m.additionalTextEdits)),m.commitCharacters&&(q.commitCharacters=m.commitCharacters.slice()),m.command&&(q.command=g(m.command)),(m.preselect===!0||m.preselect===!1)&&(q.preselect=m.preselect);let P=nn(m.tags);if(y){if(y.data!==void 0&&(q.data=y.data),y.deprecated===!0||y.deprecated===!1){if(y.deprecated===!0&&P!==void 0&&P.length>0){let F=P.indexOf(Dt.CompletionItemTag.Deprecated);F!==-1&&P.splice(F,1)}q.deprecated=y.deprecated}y.insertTextMode!==void 0&&(q.insertTextMode=y.insertTextMode)}return P!==void 0&&P.length>0&&(q.tags=P),q.insertTextMode===void 0&&m.keepWhitespace===!0&&(q.insertTextMode=ke.InsertTextMode.adjustIndentation),q}function Mt(m,L){let oe=ke.InsertTextFormat.PlainText,Te,q;L.textEdit?(Te=L.textEdit.newText,q=L.textEdit.range):L.insertText instanceof Dt.SnippetString?(oe=ke.InsertTextFormat.Snippet,Te=L.insertText.value):Te=L.insertText,L.range&&(q=L.range),m.insertTextFormat=oe,L.fromEdit&&Te!==void 0&&q!==void 0?m.textEdit=Kt(Te,q):m.insertText=Te}function Kt(m,L){return Jc.is(L)?ke.InsertReplaceEdit.create(m,ze(L.inserting),ze(L.replacing)):{newText:m,range:ze(L)}}function Ft(m){return{range:ze(m.range),newText:m.newText}}function Jt(m){return m==null?m:m.map(Ft)}function Ct(m){return m<=Dt.SymbolKind.TypeParameter?m+1:ke.SymbolKind.Property}function rn(m){return m}function Ze(m){return m.map(rn)}function At(m,L,oe){return{textDocument:i(m),position:Oe(L),context:{includeDeclaration:oe.includeDeclaration}}}async function Je(m,L){let oe=ke.CodeAction.create(m.title);if(m instanceof oC.default&&m.data!==void 0&&(oe.data=m.data),m.kind!==void 0&&(oe.kind=z(m.kind)),m.diagnostics!==void 0&&(oe.diagnostics=await Pt(m.diagnostics,L)),m.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return m.command!==void 0&&(oe.command=g(m.command)),m.isPreferred!==void 0&&(oe.isPreferred=m.isPreferred),m.disabled!==void 0&&(oe.disabled={reason:m.disabled.reason}),oe}async function yt(m,L){if(m==null)return m;let oe;return m.only&&Vr.string(m.only.value)&&(oe=[m.only.value]),ke.CodeActionContext.create(await Pt(m.diagnostics,L),oe,N(m.triggerKind))}function N(m){switch(m){case Dt.CodeActionTriggerKind.Invoke:return ke.CodeActionTriggerKind.Invoked;case Dt.CodeActionTriggerKind.Automatic:return ke.CodeActionTriggerKind.Automatic;default:return}}function z(m){if(m!=null)return m.value}function ue(m){return m==null?m:ke.InlineValueContext.create(m.frameId,ze(m.stoppedLocation))}function g(m){let L=ke.Command.create(m.title,m.command);return m.arguments&&(L.arguments=m.arguments),L}function a(m){let L=ke.CodeLens.create(ze(m.range));return m.command&&(L.command=g(m.command)),m instanceof rC.default&&m.data&&(L.data=m.data),L}function c(m,L){let oe={tabSize:m.tabSize,insertSpaces:m.insertSpaces};return L.trimTrailingWhitespace&&(oe.trimTrailingWhitespace=!0),L.trimFinalNewlines&&(oe.trimFinalNewlines=!0),L.insertFinalNewline&&(oe.insertFinalNewline=!0),oe}function d(m){return{textDocument:i(m)}}function w(m){return{textDocument:i(m)}}function k(m){let L=ke.DocumentLink.create(ze(m.range));m.target&&(L.target=r(m.target)),m.tooltip!==void 0&&(L.tooltip=m.tooltip);let oe=m instanceof iC.default?m:void 0;return oe&&oe.data&&(L.data=oe.data),L}function I(m){return{textDocument:i(m)}}function ae(m){let L={name:m.name,kind:Ct(m.kind),uri:r(m.uri),range:ze(m.range),selectionRange:ze(m.selectionRange)};return m.detail!==void 0&&m.detail.length>0&&(L.detail=m.detail),m.tags!==void 0&&(L.tags=Ze(m.tags)),m instanceof sC.default&&m.data!==void 0&&(L.data=m.data),L}function me(m){let L={name:m.name,kind:Ct(m.kind),uri:r(m.uri),range:ze(m.range),selectionRange:ze(m.selectionRange)};return m.detail!==void 0&&m.detail.length>0&&(L.detail=m.detail),m.tags!==void 0&&(L.tags=Ze(m.tags)),m instanceof aC.default&&m.data!==void 0&&(L.data=m.data),L}function ve(m){let L=m instanceof cC.default?{name:m.name,kind:Ct(m.kind),location:m.hasRange?je(m.location):{uri:t(m.location.uri)},data:m.data}:{name:m.name,kind:Ct(m.kind),location:je(m.location)};return m.tags!==void 0&&(L.tags=Ze(m.tags)),m.containerName!==""&&(L.containerName=m.containerName),L}function Ce(m){let L=typeof m.label=="string"?m.label:m.label.map(ce),oe=ke.InlayHint.create(ht(m.position),L);return m.kind!==void 0&&(oe.kind=m.kind),m.textEdits!==void 0&&(oe.textEdits=Jt(m.textEdits)),m.tooltip!==void 0&&(oe.tooltip=Le(m.tooltip)),m.paddingLeft!==void 0&&(oe.paddingLeft=m.paddingLeft),m.paddingRight!==void 0&&(oe.paddingRight=m.paddingRight),m instanceof uC.default&&m.data!==void 0&&(oe.data=m.data),oe}function ce(m){let L=ke.InlayHintLabelPart.create(m.value);return m.location!==void 0&&(L.location=je(m.location)),m.command!==void 0&&(L.command=g(m.command)),m.tooltip!==void 0&&(L.tooltip=Le(m.tooltip)),L}function Le(m){return typeof m=="string"?m:{kind:ke.MarkupKind.Markdown,value:m.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:u,asChangeTextDocumentParams:C,asCloseTextDocumentParams:T,asSaveTextDocumentParams:A,asWillSaveTextDocumentParams:_,asDidCreateFilesParams:M,asDidRenameFilesParams:U,asDidDeleteFilesParams:Y,asWillCreateFilesParams:le,asWillRenameFilesParams:ie,asWillDeleteFilesParams:ye,asTextDocumentPositionParams:te,asCompletionParams:re,asSignatureHelpParams:X,asWorkerPosition:Oe,asRange:ze,asPosition:ht,asPositions:ct,asLocation:je,asDiagnosticSeverity:Pe,asDiagnosticTag:wt,asDiagnostic:Bt,asDiagnostics:Pt,asCompletionItem:Re,asTextEdit:Ft,asSymbolKind:Ct,asSymbolTag:rn,asSymbolTags:Ze,asReferenceParams:At,asCodeAction:Je,asCodeActionContext:yt,asInlineValueContext:ue,asCommand:g,asCodeLens:a,asFormattingOptions:c,asDocumentSymbolParams:d,asCodeLensParams:w,asDocumentLink:k,asDocumentLinkParams:I,asCallHierarchyItem:ae,asTypeHierarchyItem:me,asInlayHint:Ce,asWorkspaceSymbol:ve}}To.createConverter=lC});var lh=Z(Bo=>{"use strict";E();D();x();R();S();Object.defineProperty(Bo,"__esModule",{value:!0});Bo.createConverter=void 0;var se=we("vscode"),_e=De(),hn=xn(),He=So(),dC=Ec(),fC=Sc(),pC=kc(),hC=Fc(),ch=Ic(),gC=Lc(),mC=jc(),yC=Wc(),vC=zc(),uh=De(),ko;(function(n){function e(t){let r=t;return r&&hn.string(r.language)&&hn.string(r.value)}n.is=e})(ko||(ko={}));function wC(n,e,t){let i=n||(l=>se.Uri.parse(l));function s(l){return i(l)}function o(l){let Q=[];for(let V of l)if(typeof V=="string")Q.push(V);else if(uh.NotebookCellTextDocumentFilter.is(V))if(typeof V.notebook=="string")Q.push({notebookType:V.notebook,language:V.language});else{let ge=V.notebook.notebookType??"*";Q.push({notebookType:ge,scheme:V.notebook.scheme,pattern:V.notebook.pattern,language:V.language})}else uh.TextDocumentFilter.is(V)&&Q.push({language:V.language,scheme:V.scheme,pattern:V.pattern});return Q}async function u(l,Q){return He.map(l,h,Q)}function p(l){let Q=new Array(l.length);for(let V=0;V<l.length;V++)Q[V]=h(l[V]);return Q}function h(l){let Q=new ch.ProtocolDiagnostic(_(l.range),l.message,U(l.severity),l.data);if(l.code!==void 0){if(typeof l.code=="string"||typeof l.code=="number")_e.CodeDescription.is(l.codeDescription)?Q.code={value:l.code,target:s(l.codeDescription.href)}:Q.code=l.code;else if(ch.DiagnosticCode.is(l.code)){Q.hasDiagnosticCode=!0;let V=l.code;Q.code={value:V.value,target:s(V.target)}}}return l.source&&(Q.source=l.source),l.relatedInformation&&(Q.relatedInformation=C(l.relatedInformation)),Array.isArray(l.tags)&&(Q.tags=T(l.tags)),Q}function C(l){let Q=new Array(l.length);for(let V=0;V<l.length;V++){let ge=l[V];Q[V]=new se.DiagnosticRelatedInformation(wt(ge.location),ge.message)}return Q}function T(l){if(!l)return;let Q=[];for(let V of l){let ge=A(V);ge!==void 0&&Q.push(ge)}return Q.length>0?Q:void 0}function A(l){switch(l){case _e.DiagnosticTag.Unnecessary:return se.DiagnosticTag.Unnecessary;case _e.DiagnosticTag.Deprecated:return se.DiagnosticTag.Deprecated;default:return}}function B(l){return l?new se.Position(l.line,l.character):void 0}function _(l){return l?new se.Range(l.start.line,l.start.character,l.end.line,l.end.character):void 0}async function M(l,Q){return He.map(l,V=>new se.Range(V.start.line,V.start.character,V.end.line,V.end.character),Q)}function U(l){if(l==null)return se.DiagnosticSeverity.Error;switch(l){case _e.DiagnosticSeverity.Error:return se.DiagnosticSeverity.Error;case _e.DiagnosticSeverity.Warning:return se.DiagnosticSeverity.Warning;case _e.DiagnosticSeverity.Information:return se.DiagnosticSeverity.Information;case _e.DiagnosticSeverity.Hint:return se.DiagnosticSeverity.Hint}return se.DiagnosticSeverity.Error}function Y(l){if(hn.string(l))return ie(l);if(ko.is(l))return ie().appendCodeblock(l.value,l.language);if(Array.isArray(l)){let Q=[];for(let V of l){let ge=ie();ko.is(V)?ge.appendCodeblock(V.value,V.language):ge.appendMarkdown(V),Q.push(ge)}return Q}else return ie(l)}function le(l){if(hn.string(l))return l;switch(l.kind){case _e.MarkupKind.Markdown:return ie(l.value);case _e.MarkupKind.PlainText:return l.value;default:return`Unsupported Markup content received. Kind is: ${l.kind}`}}function ie(l){let Q;if(l===void 0||typeof l=="string")Q=new se.MarkdownString(l);else switch(l.kind){case _e.MarkupKind.Markdown:Q=new se.MarkdownString(l.value);break;case _e.MarkupKind.PlainText:Q=new se.MarkdownString,Q.appendText(l.value);break;default:Q=new se.MarkdownString,Q.appendText(`Unsupported Markup content received. Kind is: ${l.kind}`);break}return Q.isTrusted=e,Q.supportHtml=t,Q}function ye(l){if(l)return new se.Hover(Y(l.contents),_(l.range))}async function te(l,Q,V){if(!l)return;if(Array.isArray(l))return He.map(l,kn=>nt(kn,Q),V);let ge=l,{defaultRange:Zt,commitCharacters:qt}=de(ge,Q),$e=await He.map(ge.items,kn=>nt(kn,qt,Zt,ge.itemDefaults?.insertTextMode,ge.itemDefaults?.insertTextFormat,ge.itemDefaults?.data),V);return new se.CompletionList($e,ge.isIncomplete)}function de(l,Q){let V=l.itemDefaults?.editRange,ge=l.itemDefaults?.commitCharacters??Q;return _e.Range.is(V)?{defaultRange:_(V),commitCharacters:ge}:V!==void 0?{defaultRange:{inserting:_(V.insert),replacing:_(V.replace)},commitCharacters:ge}:{defaultRange:void 0,commitCharacters:ge}}function re(l){return _e.CompletionItemKind.Text<=l&&l<=_e.CompletionItemKind.TypeParameter?[l-1,void 0]:[se.CompletionItemKind.Text,l]}function he(l){switch(l){case _e.CompletionItemTag.Deprecated:return se.CompletionItemTag.Deprecated}}function be(l){if(l==null)return[];let Q=[];for(let V of l){let ge=he(V);ge!==void 0&&Q.push(ge)}return Q}function nt(l,Q,V,ge,Zt,qt){let $e=be(l.tags),kn=rt(l),Xe=new dC.default(kn);l.detail&&(Xe.detail=l.detail),l.documentation&&(Xe.documentation=le(l.documentation),Xe.documentationFormat=hn.string(l.documentation)?"$string":l.documentation.kind),l.filterText&&(Xe.filterText=l.filterText);let Yi=at(l,V,Zt);if(Yi&&(Xe.insertText=Yi.text,Xe.range=Yi.range,Xe.fromEdit=Yi.fromEdit),hn.number(l.kind)){let[Wg,jl]=re(l.kind);Xe.kind=Wg,jl&&(Xe.originalItemKind=jl)}l.sortText&&(Xe.sortText=l.sortText),l.additionalTextEdits&&(Xe.additionalTextEdits=ht(l.additionalTextEdits));let Nl=l.commitCharacters!==void 0?hn.stringArray(l.commitCharacters)?l.commitCharacters:void 0:Q;Nl&&(Xe.commitCharacters=Nl.slice()),l.command&&(Xe.command=Ze(l.command)),(l.deprecated===!0||l.deprecated===!1)&&(Xe.deprecated=l.deprecated,l.deprecated===!0&&$e.push(se.CompletionItemTag.Deprecated)),(l.preselect===!0||l.preselect===!1)&&(Xe.preselect=l.preselect);let Ul=l.data??qt;Ul!==void 0&&(Xe.data=Ul),$e.length>0&&(Xe.tags=$e);let Rs=l.insertTextMode??ge;return Rs!==void 0&&(Xe.insertTextMode=Rs,Rs===_e.InsertTextMode.asIs&&(Xe.keepWhitespace=!0)),Xe}function rt(l){return _e.CompletionItemLabelDetails.is(l.labelDetails)?{label:l.label,detail:l.labelDetails.detail,description:l.labelDetails.description}:l.label}function at(l,Q,V){let ge=l.insertTextFormat??V;if(l.textEdit!==void 0||Q!==void 0){let[Zt,qt]=l.textEdit!==void 0?kt(l.textEdit):[Q,l.textEditText??l.label];return ge===_e.InsertTextFormat.Snippet?{text:new se.SnippetString(qt),range:Zt,fromEdit:!0}:{text:qt,range:Zt,fromEdit:!0}}else return l.insertText?ge===_e.InsertTextFormat.Snippet?{text:new se.SnippetString(l.insertText),fromEdit:!1}:{text:l.insertText,fromEdit:!1}:void 0}function kt(l){return _e.InsertReplaceEdit.is(l)?[{inserting:_(l.insert),replacing:_(l.replace)},l.newText]:[_(l.range),l.newText]}function X(l){if(l)return new se.TextEdit(_(l.range),l.newText)}async function Oe(l,Q){if(l)return He.map(l,X,Q)}function ht(l){if(!l)return;let Q=new Array(l.length);for(let V=0;V<l.length;V++)Q[V]=X(l[V]);return Q}async function ct(l,Q){if(!l)return;let V=new se.SignatureHelp;return hn.number(l.activeSignature)?V.activeSignature=l.activeSignature:V.activeSignature=0,hn.number(l.activeParameter)?V.activeParameter=l.activeParameter:V.activeParameter=0,l.signatures&&(V.signatures=await ze(l.signatures,Q)),V}async function ze(l,Q){return He.mapAsync(l,je,Q)}async function je(l,Q){let V=new se.SignatureInformation(l.label);return l.documentation!==void 0&&(V.documentation=le(l.documentation)),l.parameters!==void 0&&(V.parameters=await Pe(l.parameters,Q)),l.activeParameter!==void 0&&(V.activeParameter=l.activeParameter),V}function Pe(l,Q){return He.map(l,et,Q)}function et(l){let Q=new se.ParameterInformation(l.label);return l.documentation&&(Q.documentation=le(l.documentation)),Q}function wt(l){return l?new se.Location(i(l.uri),_(l.range)):void 0}async function mn(l,Q){if(l)return Bt(l,Q)}async function dn(l,Q){if(l)return Bt(l,Q)}function St(l){if(!l)return;let Q={targetUri:i(l.targetUri),targetRange:_(l.targetRange),originSelectionRange:_(l.originSelectionRange),targetSelectionRange:_(l.targetSelectionRange)};if(!Q.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return Q}async function Bt(l,Q){if(l)if(hn.array(l)){if(l.length===0)return[];if(_e.LocationLink.is(l[0])){let V=l;return He.map(V,St,Q)}else{let V=l;return He.map(V,wt,Q)}}else return _e.LocationLink.is(l)?[St(l)]:wt(l)}async function Pt(l,Q){if(l)return He.map(l,wt,Q)}async function en(l,Q){if(l)return He.map(l,tn,Q)}function tn(l){let Q=new se.DocumentHighlight(_(l.range));return hn.number(l.kind)&&(Q.kind=nn(l.kind)),Q}function nn(l){switch(l){case _e.DocumentHighlightKind.Text:return se.DocumentHighlightKind.Text;case _e.DocumentHighlightKind.Read:return se.DocumentHighlightKind.Read;case _e.DocumentHighlightKind.Write:return se.DocumentHighlightKind.Write}return se.DocumentHighlightKind.Text}async function Rt(l,Q){if(l)return He.map(l,Ft,Q)}function Re(l){return l<=_e.SymbolKind.TypeParameter?l-1:se.SymbolKind.Property}function Mt(l){switch(l){case _e.SymbolTag.Deprecated:return se.SymbolTag.Deprecated;default:return}}function Kt(l){if(l==null)return;let Q=[];for(let V of l){let ge=Mt(V);ge!==void 0&&Q.push(ge)}return Q.length===0?void 0:Q}function Ft(l){let Q=l.data,V=l.location,ge=V.range===void 0||Q!==void 0?new yC.default(l.name,Re(l.kind),l.containerName??"",V.range===void 0?i(V.uri):new se.Location(i(l.location.uri),_(V.range)),Q):new se.SymbolInformation(l.name,Re(l.kind),l.containerName??"",new se.Location(i(l.location.uri),_(V.range)));return rn(ge,l),ge}async function Jt(l,Q){if(l!=null)return He.map(l,Ct,Q)}function Ct(l){let Q=new se.DocumentSymbol(l.name,l.detail||"",Re(l.kind),_(l.range),_(l.selectionRange));if(rn(Q,l),l.children!==void 0&&l.children.length>0){let V=[];for(let ge of l.children)V.push(Ct(ge));Q.children=V}return Q}function rn(l,Q){l.tags=Kt(Q.tags),Q.deprecated&&(l.tags?l.tags.includes(se.SymbolTag.Deprecated)||(l.tags=l.tags.concat(se.SymbolTag.Deprecated)):l.tags=[se.SymbolTag.Deprecated])}function Ze(l){let Q={title:l.title,command:l.command};return l.arguments&&(Q.arguments=l.arguments),Q}async function At(l,Q){if(l)return He.map(l,Ze,Q)}let Je=new Map;Je.set(_e.CodeActionKind.Empty,se.CodeActionKind.Empty),Je.set(_e.CodeActionKind.QuickFix,se.CodeActionKind.QuickFix),Je.set(_e.CodeActionKind.Refactor,se.CodeActionKind.Refactor),Je.set(_e.CodeActionKind.RefactorExtract,se.CodeActionKind.RefactorExtract),Je.set(_e.CodeActionKind.RefactorInline,se.CodeActionKind.RefactorInline),Je.set(_e.CodeActionKind.RefactorRewrite,se.CodeActionKind.RefactorRewrite),Je.set(_e.CodeActionKind.Source,se.CodeActionKind.Source),Je.set(_e.CodeActionKind.SourceOrganizeImports,se.CodeActionKind.SourceOrganizeImports);function yt(l){if(l==null)return;let Q=Je.get(l);if(Q)return Q;let V=l.split(".");Q=se.CodeActionKind.Empty;for(let ge of V)Q=Q.append(ge);return Q}function N(l){if(l!=null)return l.map(Q=>yt(Q))}async function z(l,Q){if(l==null)return;let V=new hC.default(l.title,l.data);return l.kind!==void 0&&(V.kind=yt(l.kind)),l.diagnostics!==void 0&&(V.diagnostics=p(l.diagnostics)),l.edit!==void 0&&(V.edit=await c(l.edit,Q)),l.command!==void 0&&(V.command=Ze(l.command)),l.isPreferred!==void 0&&(V.isPreferred=l.isPreferred),l.disabled!==void 0&&(V.disabled={reason:l.disabled.reason}),V}function ue(l,Q){return He.mapAsync(l,async V=>_e.Command.is(V)?Ze(V):z(V,Q),Q)}function g(l){if(!l)return;let Q=new fC.default(_(l.range));return l.command&&(Q.command=Ze(l.command)),l.data!==void 0&&l.data!==null&&(Q.data=l.data),Q}async function a(l,Q){if(l)return He.map(l,g,Q)}async function c(l,Q){if(!l)return;let V=new Map;if(l.changeAnnotations!==void 0){let qt=l.changeAnnotations;await He.forEach(Object.keys(qt),$e=>{let kn=d(qt[$e]);V.set($e,kn)},Q)}let ge=qt=>{if(qt!==void 0)return V.get(qt)},Zt=new se.WorkspaceEdit;if(l.documentChanges){let qt=l.documentChanges;await He.forEach(qt,$e=>{if(_e.CreateFile.is($e))Zt.createFile(i($e.uri),$e.options,ge($e.annotationId));else if(_e.RenameFile.is($e))Zt.renameFile(i($e.oldUri),i($e.newUri),$e.options,ge($e.annotationId));else if(_e.DeleteFile.is($e))Zt.deleteFile(i($e.uri),$e.options,ge($e.annotationId));else if(_e.TextDocumentEdit.is($e)){let kn=i($e.textDocument.uri);for(let Xe of $e.edits)_e.AnnotatedTextEdit.is(Xe)?Zt.replace(kn,_(Xe.range),Xe.newText,ge(Xe.annotationId)):Zt.replace(kn,_(Xe.range),Xe.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify($e,void 0,4)}`)},Q)}else if(l.changes){let qt=l.changes;await He.forEach(Object.keys(qt),$e=>{Zt.set(i($e),ht(qt[$e]))},Q)}return Zt}function d(l){if(l!==void 0)return{label:l.label,needsConfirmation:!!l.needsConfirmation,description:l.description}}function w(l){let Q=_(l.range),V=l.target?s(l.target):void 0,ge=new pC.default(Q,V);return l.tooltip!==void 0&&(ge.tooltip=l.tooltip),l.data!==void 0&&l.data!==null&&(ge.data=l.data),ge}async function k(l,Q){if(l)return He.map(l,w,Q)}function I(l){return new se.Color(l.red,l.green,l.blue,l.alpha)}function ae(l){return new se.ColorInformation(_(l.range),I(l.color))}async function me(l,Q){if(l)return He.map(l,ae,Q)}function ve(l){let Q=new se.ColorPresentation(l.label);return Q.additionalTextEdits=ht(l.additionalTextEdits),l.textEdit&&(Q.textEdit=X(l.textEdit)),Q}async function Ce(l,Q){if(l)return He.map(l,ve,Q)}function ce(l){if(l)switch(l){case _e.FoldingRangeKind.Comment:return se.FoldingRangeKind.Comment;case _e.FoldingRangeKind.Imports:return se.FoldingRangeKind.Imports;case _e.FoldingRangeKind.Region:return se.FoldingRangeKind.Region}}function Le(l){return new se.FoldingRange(l.startLine,l.endLine,ce(l.kind))}async function m(l,Q){if(l)return He.map(l,Le,Q)}function L(l){return new se.SelectionRange(_(l.range),l.parent?L(l.parent):void 0)}async function oe(l,Q){return Array.isArray(l)?He.map(l,L,Q):[]}function Te(l){return _e.InlineValueText.is(l)?new se.InlineValueText(_(l.range),l.text):_e.InlineValueVariableLookup.is(l)?new se.InlineValueVariableLookup(_(l.range),l.variableName,l.caseSensitiveLookup):new se.InlineValueEvaluatableExpression(_(l.range),l.expression)}async function q(l,Q){return Array.isArray(l)?He.map(l,Te,Q):[]}async function y(l,Q){let V=typeof l.label=="string"?l.label:await He.map(l.label,P,Q),ge=new vC.default(B(l.position),V);return l.kind!==void 0&&(ge.kind=l.kind),l.textEdits!==void 0&&(ge.textEdits=await Oe(l.textEdits,Q)),l.tooltip!==void 0&&(ge.tooltip=F(l.tooltip)),l.paddingLeft!==void 0&&(ge.paddingLeft=l.paddingLeft),l.paddingRight!==void 0&&(ge.paddingRight=l.paddingRight),l.data!==void 0&&(ge.data=l.data),ge}function P(l){let Q=new se.InlayHintLabelPart(l.value);return l.location!==void 0&&(Q.location=wt(l.location)),l.tooltip!==void 0&&(Q.tooltip=F(l.tooltip)),l.command!==void 0&&(Q.command=Ze(l.command)),Q}function F(l){return typeof l=="string"?l:ie(l)}async function b(l,Q){if(Array.isArray(l))return He.mapAsync(l,y,Q)}function f(l){if(l===null)return;let Q=new gC.default(Re(l.kind),l.name,l.detail||"",s(l.uri),_(l.range),_(l.selectionRange),l.data);return l.tags!==void 0&&(Q.tags=Kt(l.tags)),Q}async function O(l,Q){if(l!==null)return He.map(l,f,Q)}async function J(l,Q){return new se.CallHierarchyIncomingCall(f(l.from),await M(l.fromRanges,Q))}async function Ee(l,Q){if(l!==null)return He.mapAsync(l,J,Q)}async function it(l,Q){return new se.CallHierarchyOutgoingCall(f(l.to),await M(l.fromRanges,Q))}async function Ve(l,Q){if(l!==null)return He.mapAsync(l,it,Q)}async function on(l,Q){if(l!=null)return new se.SemanticTokens(new Uint32Array(l.data),l.resultId)}function Vt(l){return new se.SemanticTokensEdit(l.start,l.deleteCount,l.data!==void 0?new Uint32Array(l.data):void 0)}async function yn(l,Q){if(l!=null)return new se.SemanticTokensEdits(l.edits.map(Vt),l.resultId)}function qe(l){return l}async function Yn(l,Q){if(l!=null)return new se.LinkedEditingRanges(await M(l.ranges,Q),Fr(l.wordPattern))}function Fr(l){if(l!=null)return new RegExp(l)}function ui(l){if(l===null)return;let Q=new mC.default(Re(l.kind),l.name,l.detail||"",s(l.uri),_(l.range),_(l.selectionRange),l.data);return l.tags!==void 0&&(Q.tags=Kt(l.tags)),Q}async function Hg(l,Q){if(l!==null)return He.map(l,ui,Q)}function Kg(l){if(hn.string(l))return l;if(_e.RelativePattern.is(l)){if(_e.URI.is(l.baseUri))return new se.RelativePattern(s(l.baseUri),l.pattern);if(_e.WorkspaceFolder.is(l.baseUri)){let Q=se.workspace.getWorkspaceFolder(s(l.baseUri.uri));return Q!==void 0?new se.RelativePattern(Q,l.pattern):void 0}}}return{asUri:s,asDocumentSelector:o,asDiagnostics:u,asDiagnostic:h,asRange:_,asRanges:M,asPosition:B,asDiagnosticSeverity:U,asDiagnosticTag:A,asHover:ye,asCompletionResult:te,asCompletionItem:nt,asTextEdit:X,asTextEdits:Oe,asSignatureHelp:ct,asSignatureInformations:ze,asSignatureInformation:je,asParameterInformations:Pe,asParameterInformation:et,asDeclarationResult:mn,asDefinitionResult:dn,asLocation:wt,asReferences:Pt,asDocumentHighlights:en,asDocumentHighlight:tn,asDocumentHighlightKind:nn,asSymbolKind:Re,asSymbolTag:Mt,asSymbolTags:Kt,asSymbolInformations:Rt,asSymbolInformation:Ft,asDocumentSymbols:Jt,asDocumentSymbol:Ct,asCommand:Ze,asCommands:At,asCodeAction:z,asCodeActionKind:yt,asCodeActionKinds:N,asCodeActionResult:ue,asCodeLens:g,asCodeLenses:a,asWorkspaceEdit:c,asDocumentLink:w,asDocumentLinks:k,asFoldingRangeKind:ce,asFoldingRange:Le,asFoldingRanges:m,asColor:I,asColorInformation:ae,asColorInformations:me,asColorPresentation:ve,asColorPresentations:Ce,asSelectionRange:L,asSelectionRanges:oe,asInlineValue:Te,asInlineValues:q,asInlayHint:y,asInlayHints:b,asSemanticTokensLegend:qe,asSemanticTokens:on,asSemanticTokensEdit:Vt,asSemanticTokensEdits:yn,asCallHierarchyItem:f,asCallHierarchyItems:O,asCallHierarchyIncomingCall:J,asCallHierarchyIncomingCalls:Ee,asCallHierarchyOutgoingCall:it,asCallHierarchyOutgoingCalls:Ve,asLinkedEditingRanges:Yn,asTypeHierarchyItem:ui,asTypeHierarchyItems:Hg,asGlobPattern:Kg}}Bo.createConverter=wC});var Zc=Z(Po=>{"use strict";E();D();x();R();S();Object.defineProperty(Po,"__esModule",{value:!0});Po.ProgressPart=void 0;var dh=we("vscode"),fh=De(),ph=xn(),Vc=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(fh.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&dh.window.withProgress({location:dh.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(fh.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&ph.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(ph.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Po.ProgressPart=Vc});var mh=Z(Qo=>{"use strict";E();D();x();R();S();Object.defineProperty(Qo,"__esModule",{value:!0});Qo.NotebookDocumentSyncFeature=void 0;var Ht=we("vscode"),CC=Do(),$n=De(),AC=ft(),hh=xn();function gh(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Zr;(function(n){let e;(function(t){function r(A,B){return{version:A.version,uri:B.asUri(A.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(A,B,_){let M=$n.NotebookDocument.create(_.asUri(A.uri),A.notebookType,A.version,s(B,_));return Object.keys(A.metadata).length>0&&(M.metadata=o(A.metadata)),M}t.asNotebookDocument=i;function s(A,B){return A.map(_=>u(_,B))}t.asNotebookCells=s;function o(A){return h(new Set,A)}t.asMetadata=o;function u(A,B){let _=$n.NotebookCell.create(p(A.kind),B.asUri(A.document.uri));return Object.keys(A.metadata).length>0&&(_.metadata=o(A.metadata)),A.executionSummary!==void 0&&hh.number(A.executionSummary.executionOrder)&&hh.boolean(A.executionSummary.success)&&(_.executionSummary={executionOrder:A.executionSummary.executionOrder,success:A.executionSummary.success}),_}t.asNotebookCell=u;function p(A){switch(A){case Ht.NotebookCellKind.Markup:return $n.NotebookCellKind.Markup;case Ht.NotebookCellKind.Code:return $n.NotebookCellKind.Code}}function h(A,B){if(A.has(B))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(B)){let _=[];for(let M of B)if(M!==null&&typeof M=="object"||Array.isArray(M))_.push(h(A,M));else{if(M instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");_.push(M)}return _}else{let _=Object.keys(B),M=Object.create(null);for(let U of _){let Y=B[U];if(Y!==null&&typeof Y=="object"||Array.isArray(Y))M[U]=h(A,Y);else{if(Y instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");M[U]=Y}}return M}}function C(A,B){let _=B.asChangeTextDocumentParams(A,A.document.uri,A.document.version);return{document:_.textDocument,changes:_.contentChanges}}t.asTextContentChange=C;function T(A,B){let _=Object.create(null);if(A.metadata&&(_.metadata=n.c2p.asMetadata(A.metadata)),A.cells!==void 0){let M=Object.create(null),U=A.cells;U.structure&&(M.structure={array:{start:U.structure.array.start,deleteCount:U.structure.array.deleteCount,cells:U.structure.array.cells!==void 0?U.structure.array.cells.map(Y=>n.c2p.asNotebookCell(Y,B)):void 0},didOpen:U.structure.didOpen!==void 0?U.structure.didOpen.map(Y=>B.asOpenTextDocumentParams(Y.document).textDocument):void 0,didClose:U.structure.didClose!==void 0?U.structure.didClose.map(Y=>B.asCloseTextDocumentParams(Y.document).textDocument):void 0}),U.data!==void 0&&(M.data=U.data.map(Y=>n.c2p.asNotebookCell(Y,B))),U.textContent!==void 0&&(M.textContent=U.textContent.map(Y=>n.c2p.asTextContentChange(Y,B))),Object.keys(M).length>0&&(_.cells=M)}return _}t.asNotebookDocumentChangeEvent=T})(e=n.c2p||(n.c2p={}))})(Zr||(Zr={}));var Xc;(function(n){function e(u,p,h){let C=u.length,T=p.length,A=0;for(;A<T&&A<C&&t(u[A],p[A],h);)A++;if(A<T&&A<C){let B=C-1,_=T-1;for(;B>=0&&_>=0&&t(u[B],p[_],h);)B--,_--;let M=B+1-A,U=A===_+1?void 0:p.slice(A,_+1);return U!==void 0?{start:A,deleteCount:M,cells:U}:{start:A,deleteCount:M}}else return A<T?{start:A,deleteCount:0,cells:p.slice(A)}:A<C?{start:A,deleteCount:C-A}:void 0}n.computeDiff=e;function t(u,p,h=!0){return u.kind!==p.kind||u.document.uri.toString()!==p.document.uri.toString()||u.document.languageId!==p.document.languageId||!r(u.executionSummary,p.executionSummary)?!1:!h||h&&s(u.metadata,p.metadata)}function r(u,p){return u===p?!0:u===void 0||p===void 0?!1:u.executionOrder===p.executionOrder&&u.success===p.success&&i(u.timing,p.timing)}function i(u,p){return u===p?!0:u===void 0||p===void 0?!1:u.startTime===p.startTime&&u.endTime===p.endTime}function s(u,p){if(u===p)return!0;if(u==null||p===null||p===void 0||typeof u!=typeof p||typeof u!="object")return!1;let h=Array.isArray(u),C=Array.isArray(p);if(h!==C)return!1;if(h&&C){if(u.length!==p.length)return!1;for(let T=0;T<u.length;T++)if(!s(u[T],p[T]))return!1}if(o(u)&&o(p)){let T=Object.keys(u),A=Object.keys(p);if(T.length!==A.length||(T.sort(),A.sort(),!s(T,A)))return!1;for(let B=0;B<T.length;B++){let _=T[B];if(!s(u[_],p[_]))return!1}return!0}return!1}function o(u){return u!==null&&typeof u=="object"}n.isObjectLiteral=o})(Xc||(Xc={}));var Yc;(function(n){function e(t,r){if(typeof t=="string")return t==="*"||r.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let s=new CC.Minimatch(t.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(Yc||(Yc={}));var Fo;(function(n){function e(r){let i=r.notebookSelector,s=[];for(let o of i){let u=(typeof o.notebook=="string"?o.notebook:o.notebook?.notebookType)??"*",p=typeof o.notebook=="string"?void 0:o.notebook?.scheme,h=typeof o.notebook=="string"?void 0:o.notebook?.pattern;if(o.cells!==void 0)for(let C of o.cells)s.push(t(u,p,h,C.language));else s.push(t(u,p,h,void 0))}return s}n.asDocumentSelector=e;function t(r,i,s,o){return i===void 0&&s===void 0?{notebook:r,language:o}:{notebook:{notebookType:r,scheme:i,pattern:s},language:o}}})(Fo||(Fo={}));var qo;(function(n){function e(t){return{cells:t,uris:new Set(t.map(r=>r.document.uri.toString()))}}n.create=e})(qo||(qo={}));var Xr=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Fo.asDocumentSelector(t)),Ht.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of Ht.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);Ht.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&Ht.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),Ht.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of Ht.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return Ht.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(Ht.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let o=this.getMatchingCells(e);if(o!==void 0){let u=this.asNotebookDocumentChangeEvent(e,void 0,r,o);u!==void 0&&this.doSendChange(u,o).catch(()=>{})}}}else i&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){Ht.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=t.document.uri,s=r.cells.findIndex(o=>o.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let o=r.cells.slice(),u=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:u}}},o).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(t!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,t);i!==void 0&&this.doSendChange(i,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(t);if(i===void 0)return;this.didOpen(t,i,r)}else{let i=this.getMatchingCells(t);if(i===void 0){this.didClose(t,r);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=>t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let r=async(s,o)=>{let u=Zr.c2p.asNotebookDocument(s,o,this.client.code2ProtocolConverter),p=o.map(h=>this.client.code2ProtocolConverter.asTextDocumentItem(h.document));try{await this.client.sendNotification($n.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:p})}catch(h){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",h),h}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),qo.create(t)),i?.didOpen!==void 0?i.didOpen(e,t,r):r(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let r=async s=>{try{await this.client.sendNotification($n.DidChangeNotebookDocumentNotification.type,{notebookDocument:Zr.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:Zr.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(o){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),qo.create(t??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async i=>{try{await this.client.sendNotification($n.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=async(s,o)=>{try{await this.client.sendNotification($n.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:o.map(u=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(u.document))})}catch(u){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",u),u}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}asNotebookDocumentChangeEvent(e,t,r,i){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};t?.metadata!==void 0&&(s.metadata=Zr.c2p.asMetadata(t.metadata));let o;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let u=[];o=new Set(i.map(p=>p.document.uri.toString()));for(let p of t.cellChanges)o.has(p.cell.document.uri.toString())&&(p.executionSummary!==void 0||p.metadata!==void 0)&&u.push(p.cell);u.length>0&&(s.cells=s.cells??{},s.cells.data=u)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&r!==void 0&&i!==void 0){let u=r.cells,p=i,h=Xc.computeDiff(u,p,!1),C,T;if(h!==void 0){C=h.cells===void 0?new Map:new Map(h.cells.map(_=>[_.document.uri.toString(),_])),T=h.deleteCount===0?new Map:new Map(u.slice(h.start,h.start+h.deleteCount).map(_=>[_.document.uri.toString(),_]));for(let _ of Array.from(T.keys()))C.has(_)&&(T.delete(_),C.delete(_));s.cells=s.cells??{};let A=[],B=[];if(C.size>0||T.size>0){for(let _ of C.values())A.push(_);for(let _ of T.values())B.push(_)}s.cells.structure={array:h,didOpen:A,didClose:B}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||Yc.matchNotebook(r.notebook,e)){let i=this.filterCells(e,t,r.cells);return i.length===0?void 0:i}}}cellMatches(e,t){let r=this.getMatchingCells(e,[t]);return r!==void 0&&r[0]===t}filterCells(e,t,r){let i=r!==void 0?t.filter(s=>{let o=s.document.languageId;return r.some(u=>u.language==="*"||o===u.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},Gn=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=$n.NotebookDocumentSyncRegistrationType.type,Ht.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==Gn.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Xr&&s.didOpenNotebookCellTextDocument(r,i)}),Ht.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==Gn.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let s of this.registrations.values())s instanceof Xr&&s.didChangeNotebookCellTextDocument(i,t)}),Ht.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==Gn.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Xr&&s.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=gh(gh(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Fo.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??AC.generateUuid();this.register({id:r,registerOptions:t})}register(e){let t=new Xr(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==Gn.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Ht.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let r of Ht.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}};Qo.NotebookDocumentSyncFeature=Gn;Gn.CellScheme="vscode-notebook-cell"});var vh=Z(ar=>{"use strict";E();D();x();R();S();Object.defineProperty(ar,"__esModule",{value:!0});ar.SyncConfigurationFeature=ar.toJSONObject=ar.ConfigurationFeature=void 0;var Yr=we("vscode"),Qi=De(),_C=xn(),bC=ft(),yh=Me(),eu=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Qi.ConfigurationRequest.type,(t,r)=>{let i=o=>{let u=[];for(let p of o.items){let h=p.scopeUri!==void 0&&p.scopeUri!==null?this._client.protocol2CodeConverter.asUri(p.scopeUri):void 0;u.push(this.getConfiguration(h,p.section!==null?p.section:void 0))}return u},s=e.middleware.workspace;return s&&s.configuration?s.configuration(t,r,i):i(t,r)})}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(i===-1)r=_r(Yr.workspace.getConfiguration(void 0,e).get(t));else{let s=Yr.workspace.getConfiguration(t.substr(0,i),e);s&&(r=_r(s.get(t.substr(i+1))))}}else{let i=Yr.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=_r(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};ar.ConfigurationFeature=eu;function _r(n){if(n){if(Array.isArray(n))return n.map(_r);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=_r(n[t]));return e}}return n}ar.toJSONObject=_r;var tu=class{constructor(e){this._client=e,this.isDisposed=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Qi.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,yh.ensure)((0,yh.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:bC.generateUuid(),registerOptions:{section:e}})}register(e){let t=Yr.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isDisposed=!0}onDidChangeConfiguration(e,t){if(this.isDisposed)return;let r;if(_C.string(e)?r=[e]:r=e,r!==void 0&&t!==void 0&&!r.some(u=>t.affectsConfiguration(u)))return;let i=async o=>o===void 0?this._client.sendNotification(Qi.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(Qi.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)}),s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(r,i):i(r)).catch(o=>{this._client.error(`Sending notification ${Qi.DidChangeConfigurationNotification.type.method} failed`,o)})}extractSettingsInformation(e){function t(s,o){let u=s;for(let p=0;p<o.length-1;p++){let h=u[o[p]];h||(h=Object.create(null),u[o[p]]=h),u=h}return u}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],u=o.indexOf("."),p=null;if(u>=0?p=Yr.workspace.getConfiguration(o.substr(0,u),r).get(o.substr(u+1)):p=Yr.workspace.getConfiguration(void 0,r).get(o),p){let h=e[s].split(".");t(i,h)[h[h.length-1]]=_r(p)}}return i}};ar.SyncConfigurationFeature=tu});var wh=Z(Xt=>{"use strict";E();D();x();R();S();Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DidSaveTextDocumentFeature=Xt.WillSaveWaitUntilFeature=Xt.WillSaveFeature=Xt.DidChangeTextDocumentFeature=Xt.DidCloseTextDocumentFeature=Xt.DidOpenTextDocumentFeature=void 0;var cn=we("vscode"),Ye=De(),pt=Me(),ei=ft(),nu=class extends pt.TextDocumentEventFeature{constructor(e,t){super(e,cn.workspace.onDidOpenTextDocument,Ye.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,pt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,pt.ensure)((0,pt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:ei.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return Ye.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);cn.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&cn.languages.match(t,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let s=this._client.middleware,o=u=>this._client.sendNotification(this._type,this._createParams(u));(s.didOpen?s.didOpen(r,o):o(r)).catch(u=>{this._client.error(`Sending document notification ${this._type.method} failed`,u)}),this._syncedDocuments.set(i,r)}})}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,r)}};Xt.DidOpenTextDocumentFeature=nu;var ru=class extends pt.TextDocumentEventFeature{constructor(e,t,r){super(e,cn.workspace.onDidCloseTextDocument,Ye.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,pt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=r}get registrationType(){return Ye.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,pt.ensure)((0,pt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:ei.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,r)}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(cn.languages.match(t,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,o=u=>this._client.sendNotification(this._type,this._createParams(u));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,o):o(i)).catch(u=>{this._client.error(`Sending document notification ${this._type.method} failed`,u)})}})}};Xt.DidCloseTextDocumentFeature=ru;var iu=class extends pt.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new cn.EventEmitter,this._onPendingChangeAdded=new cn.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=Ye.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return Ye.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,pt.ensure)((0,pt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.change!==void 0&&r.change!==Ye.TextDocumentSyncKind.None&&this.register({id:ei.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=cn.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=e.document.uri,r=e.document.version,i=[];for(let s of this._changeData.values())if(cn.languages.match(s.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let o=this._client.middleware;if(s.syncKind===Ye.TextDocumentSyncKind.Incremental){let u=async p=>{let h=this._client.code2ProtocolConverter.asChangeTextDocumentParams(p,t,r);await this._client.sendNotification(Ye.DidChangeTextDocumentNotification.type,h),this.notificationSent(p.document,Ye.DidChangeTextDocumentNotification.type,h)};i.push(o.didChange?o.didChange(e,p=>u(p)):u(e))}else if(s.syncKind===Ye.TextDocumentSyncKind.Full){let u=async p=>{let h=p.document.uri.toString();this._pendingTextDocumentChanges.set(h,p.document),this._onPendingChangeAdded.fire()};i.push(o.didChange?o.didChange(e,p=>u(p)):u(e))}}return Promise.all(i).then(void 0,s=>{throw this._client.error(`Sending document notification ${Ye.DidChangeTextDocumentNotification.type.method} failed`,s),s})}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=Ye.TextDocumentSyncKind.None;else{this._syncKind=Ye.TextDocumentSyncKind.None;for(let t of this._changeData.values())if(this.updateSyncKind(t.syncKind),this._syncKind===Ye.TextDocumentSyncKind.Full)break}}dispose(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=Ye.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let t;if(e.size===0)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(let r of this._pendingTextDocumentChanges)e.has(r[0])||(t.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return t}getProvider(e){for(let t of this._changeData.values())if(cn.languages.match(t.documentSelector,e)>0)return{send:r=>this.callback(r)}}updateSyncKind(e){if(this._syncKind!==Ye.TextDocumentSyncKind.Full)switch(e){case Ye.TextDocumentSyncKind.Full:this._syncKind=e;break;case Ye.TextDocumentSyncKind.Incremental:this._syncKind===Ye.TextDocumentSyncKind.None&&(this._syncKind=Ye.TextDocumentSyncKind.Incremental);break}}};Xt.DidChangeTextDocumentFeature=iu;var ou=class extends pt.TextDocumentEventFeature{constructor(e){super(e,cn.workspace.onWillSaveTextDocument,Ye.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,r)=>pt.TextDocumentEventFeature.textDocumentFilter(t,r.document))}get registrationType(){return Ye.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,pt.ensure)((0,pt.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:ei.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}};Xt.WillSaveFeature=ou;var su=class extends pt.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Ye.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,pt.ensure)((0,pt.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:ei.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=cn.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(pt.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,r=i=>this._client.sendRequest(Ye.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};Xt.WillSaveWaitUntilFeature=su;var au=class extends pt.TextDocumentEventFeature{constructor(e){super(e,cn.workspace.onDidSaveTextDocument,Ye.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,pt.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Ye.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,pt.ensure)((0,pt.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:ei.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};Xt.DidSaveTextDocumentFeature=au});var Ch=Z(Io=>{"use strict";E();D();x();R();S();Object.defineProperty(Io,"__esModule",{value:!0});Io.CompletionItemFeature=void 0;var EC=we("vscode"),Qe=De(),cu=Me(),DC=ft(),xC=[Qe.CompletionItemKind.Text,Qe.CompletionItemKind.Method,Qe.CompletionItemKind.Function,Qe.CompletionItemKind.Constructor,Qe.CompletionItemKind.Field,Qe.CompletionItemKind.Variable,Qe.CompletionItemKind.Class,Qe.CompletionItemKind.Interface,Qe.CompletionItemKind.Module,Qe.CompletionItemKind.Property,Qe.CompletionItemKind.Unit,Qe.CompletionItemKind.Value,Qe.CompletionItemKind.Enum,Qe.CompletionItemKind.Keyword,Qe.CompletionItemKind.Snippet,Qe.CompletionItemKind.Color,Qe.CompletionItemKind.File,Qe.CompletionItemKind.Reference,Qe.CompletionItemKind.Folder,Qe.CompletionItemKind.EnumMember,Qe.CompletionItemKind.Constant,Qe.CompletionItemKind.Struct,Qe.CompletionItemKind.Event,Qe.CompletionItemKind.Operator,Qe.CompletionItemKind.TypeParameter],uu=class extends cu.TextDocumentLanguageFeature{constructor(e){super(e,Qe.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,cu.ensure)((0,cu.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[Qe.MarkupKind.Markdown,Qe.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[Qe.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[Qe.InsertTextMode.asIs,Qe.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=Qe.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:xC},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);r&&this.register({id:DC.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(u,p,h,C)=>{let T=this._client,A=this._client.middleware,B=(_,M,U,Y)=>T.sendRequest(Qe.CompletionRequest.type,T.code2ProtocolConverter.asCompletionParams(_,M,U),Y).then(le=>Y.isCancellationRequested?null:T.protocol2CodeConverter.asCompletionResult(le,i,Y),le=>T.handleFailedRequest(Qe.CompletionRequest.type,Y,le,null));return A.provideCompletionItem?A.provideCompletionItem(u,p,C,h,B):B(u,p,C,h)},resolveCompletionItem:e.resolveProvider?(u,p)=>{let h=this._client,C=this._client.middleware,T=(A,B)=>h.sendRequest(Qe.CompletionResolveRequest.type,h.code2ProtocolConverter.asCompletionItem(A,!!this.labelDetailsSupport.get(t)),B).then(_=>B.isCancellationRequested?null:h.protocol2CodeConverter.asCompletionItem(_),_=>h.handleFailedRequest(Qe.CompletionResolveRequest.type,B,_,A));return C.resolveCompletionItem?C.resolveCompletionItem(u,p,T):T(u,p)}:void 0};return[EC.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...r),o]}};Io.CompletionItemFeature=uu});var Ah=Z(Oo=>{"use strict";E();D();x();R();S();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.HoverFeature=void 0;var SC=we("vscode"),Ii=De(),lu=Me(),RC=ft(),du=class extends lu.TextDocumentLanguageFeature{constructor(e){super(e,Ii.HoverRequest.type)}fillClientCapabilities(e){let t=(0,lu.ensure)((0,lu.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[Ii.MarkupKind.Markdown,Ii.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);r&&this.register({id:RC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideHover:(i,s,o)=>{let u=this._client,p=(C,T,A)=>u.sendRequest(Ii.HoverRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(C,T),A).then(B=>A.isCancellationRequested?null:u.protocol2CodeConverter.asHover(B),B=>u.handleFailedRequest(Ii.HoverRequest.type,A,B,null)),h=u.middleware;return h.provideHover?h.provideHover(i,s,o,p):p(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return SC.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Oo.HoverFeature=du});var _h=Z(Mo=>{"use strict";E();D();x();R();S();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.DefinitionFeature=void 0;var TC=we("vscode"),fu=De(),pu=Me(),kC=ft(),hu=class extends pu.TextDocumentLanguageFeature{constructor(e){super(e,fu.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,pu.ensure)((0,pu.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);r&&this.register({id:kC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDefinition:(i,s,o)=>{let u=this._client,p=(C,T,A)=>u.sendRequest(fu.DefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(C,T),A).then(B=>A.isCancellationRequested?null:u.protocol2CodeConverter.asDefinitionResult(B,A),B=>u.handleFailedRequest(fu.DefinitionRequest.type,A,B,null)),h=u.middleware;return h.provideDefinition?h.provideDefinition(i,s,o,p):p(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return TC.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Mo.DefinitionFeature=hu});var Eh=Z(Lo=>{"use strict";E();D();x();R();S();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.SignatureHelpFeature=void 0;var bh=we("vscode"),Oi=De(),gu=Me(),BC=ft(),mu=class extends gu.TextDocumentLanguageFeature{constructor(e){super(e,Oi.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,gu.ensure)((0,gu.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Oi.MarkupKind.Markdown,Oi.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);r&&this.register({id:BC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideSignatureHelp:(r,i,s,o)=>{let u=this._client,p=(C,T,A,B)=>u.sendRequest(Oi.SignatureHelpRequest.type,u.code2ProtocolConverter.asSignatureHelpParams(C,T,A),B).then(_=>B.isCancellationRequested?null:u.protocol2CodeConverter.asSignatureHelp(_,B),_=>u.handleFailedRequest(Oi.SignatureHelpRequest.type,B,_,null)),h=u.middleware;return h.provideSignatureHelp?h.provideSignatureHelp(r,i,o,s,p):p(r,i,o,s)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return bh.languages.registerSignatureHelpProvider(r,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return bh.languages.registerSignatureHelpProvider(r,t,i)}}};Lo.SignatureHelpFeature=mu});var Dh=Z(No=>{"use strict";E();D();x();R();S();Object.defineProperty(No,"__esModule",{value:!0});No.DocumentHighlightFeature=void 0;var PC=we("vscode"),yu=De(),vu=Me(),FC=ft(),wu=class extends vu.TextDocumentLanguageFeature{constructor(e){super(e,yu.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,vu.ensure)((0,vu.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);r&&this.register({id:FC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentHighlights:(i,s,o)=>{let u=this._client,p=(C,T,A)=>u.sendRequest(yu.DocumentHighlightRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(C,T),A).then(B=>A.isCancellationRequested?null:u.protocol2CodeConverter.asDocumentHighlights(B,A),B=>u.handleFailedRequest(yu.DocumentHighlightRequest.type,A,B,null)),h=u.middleware;return h.provideDocumentHighlights?h.provideDocumentHighlights(i,s,o,p):p(i,s,o)}};return[PC.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};No.DocumentHighlightFeature=wu});var _u=Z(In=>{"use strict";E();D();x();R();S();Object.defineProperty(In,"__esModule",{value:!0});In.DocumentSymbolFeature=In.SupportedSymbolTags=In.SupportedSymbolKinds=void 0;var qC=we("vscode"),Ke=De(),Cu=Me(),QC=ft();In.SupportedSymbolKinds=[Ke.SymbolKind.File,Ke.SymbolKind.Module,Ke.SymbolKind.Namespace,Ke.SymbolKind.Package,Ke.SymbolKind.Class,Ke.SymbolKind.Method,Ke.SymbolKind.Property,Ke.SymbolKind.Field,Ke.SymbolKind.Constructor,Ke.SymbolKind.Enum,Ke.SymbolKind.Interface,Ke.SymbolKind.Function,Ke.SymbolKind.Variable,Ke.SymbolKind.Constant,Ke.SymbolKind.String,Ke.SymbolKind.Number,Ke.SymbolKind.Boolean,Ke.SymbolKind.Array,Ke.SymbolKind.Object,Ke.SymbolKind.Key,Ke.SymbolKind.Null,Ke.SymbolKind.EnumMember,Ke.SymbolKind.Struct,Ke.SymbolKind.Event,Ke.SymbolKind.Operator,Ke.SymbolKind.TypeParameter];In.SupportedSymbolTags=[Ke.SymbolTag.Deprecated];var Au=class extends Cu.TextDocumentLanguageFeature{constructor(e){super(e,Ke.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,Cu.ensure)((0,Cu.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:In.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:In.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);r&&this.register({id:QC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentSymbols:(s,o)=>{let u=this._client,p=async(C,T)=>{try{let A=await u.sendRequest(Ke.DocumentSymbolRequest.type,u.code2ProtocolConverter.asDocumentSymbolParams(C),T);if(T.isCancellationRequested||A===void 0||A===null)return null;if(A.length===0)return[];{let B=A[0];return Ke.DocumentSymbol.is(B)?await u.protocol2CodeConverter.asDocumentSymbols(A,T):await u.protocol2CodeConverter.asSymbolInformations(A,T)}}catch(A){return u.handleFailedRequest(Ke.DocumentSymbolRequest.type,T,A,null)}},h=u.middleware;return h.provideDocumentSymbols?h.provideDocumentSymbols(s,o,p):p(s,o)}},i=e.label!==void 0?{label:e.label}:void 0;return[qC.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,i),r]}};In.DocumentSymbolFeature=Au});var Sh=Z(Uo=>{"use strict";E();D();x();R();S();Object.defineProperty(Uo,"__esModule",{value:!0});Uo.WorkspaceSymbolFeature=void 0;var IC=we("vscode"),Mi=De(),bu=Me(),xh=_u(),OC=ft(),Eu=class extends bu.WorkspaceFeature{constructor(e){super(e,Mi.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,bu.ensure)((0,bu.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:xh.SupportedSymbolKinds},t.tagSupport={valueSet:xh.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:OC.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=>{let s=this._client,o=(p,h)=>s.sendRequest(Mi.WorkspaceSymbolRequest.type,{query:p},h).then(C=>h.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(C,h),C=>s.handleFailedRequest(Mi.WorkspaceSymbolRequest.type,h,C,null)),u=s.middleware;return u.provideWorkspaceSymbols?u.provideWorkspaceSymbols(r,i,o):o(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let s=this._client,o=(p,h)=>s.sendRequest(Mi.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(p),h).then(C=>h.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(C),C=>s.handleFailedRequest(Mi.WorkspaceSymbolResolveRequest.type,h,C,null)),u=s.middleware;return u.resolveWorkspaceSymbol?u.resolveWorkspaceSymbol(r,i,o):o(r,i)}:void 0};return[IC.languages.registerWorkspaceSymbolProvider(t),t]}};Uo.WorkspaceSymbolFeature=Eu});var Rh=Z(jo=>{"use strict";E();D();x();R();S();Object.defineProperty(jo,"__esModule",{value:!0});jo.ReferencesFeature=void 0;var MC=we("vscode"),Du=De(),xu=Me(),LC=ft(),Su=class extends xu.TextDocumentLanguageFeature{constructor(e){super(e,Du.ReferencesRequest.type)}fillClientCapabilities(e){(0,xu.ensure)((0,xu.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);r&&this.register({id:LC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideReferences:(i,s,o,u)=>{let p=this._client,h=(T,A,B,_)=>p.sendRequest(Du.ReferencesRequest.type,p.code2ProtocolConverter.asReferenceParams(T,A,B),_).then(M=>_.isCancellationRequested?null:p.protocol2CodeConverter.asReferences(M,_),M=>p.handleFailedRequest(Du.ReferencesRequest.type,_,M,null)),C=p.middleware;return C.provideReferences?C.provideReferences(i,s,o,u,h):h(i,s,o,u)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return MC.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};jo.ReferencesFeature=Su});var Th=Z(Ho=>{"use strict";E();D();x();R();S();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.CodeActionFeature=void 0;var NC=we("vscode"),un=De(),UC=ft(),Ru=Me(),Tu=class extends Ru.TextDocumentLanguageFeature{constructor(e){super(e,un.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,Ru.ensure)((0,Ru.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[un.CodeActionKind.Empty,un.CodeActionKind.QuickFix,un.CodeActionKind.Refactor,un.CodeActionKind.RefactorExtract,un.CodeActionKind.RefactorInline,un.CodeActionKind.RefactorRewrite,un.CodeActionKind.Source,un.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);r&&this.register({id:UC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideCodeActions:(i,s,o,u)=>{let p=this._client,h=async(T,A,B,_)=>{let M={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(T),range:p.code2ProtocolConverter.asRange(A),context:await p.code2ProtocolConverter.asCodeActionContext(B,_)};return p.sendRequest(un.CodeActionRequest.type,M,_).then(U=>_.isCancellationRequested||U===null||U===void 0?null:p.protocol2CodeConverter.asCodeActionResult(U,_),U=>p.handleFailedRequest(un.CodeActionRequest.type,_,U,null))},C=p.middleware;return C.provideCodeActions?C.provideCodeActions(i,s,o,u,h):h(i,s,o,u)},resolveCodeAction:e.resolveProvider?(i,s)=>{let o=this._client,u=this._client.middleware,p=async(h,C)=>o.sendRequest(un.CodeActionResolveRequest.type,await o.code2ProtocolConverter.asCodeAction(h,C),C).then(T=>C.isCancellationRequested?h:o.protocol2CodeConverter.asCodeAction(T,C),T=>o.handleFailedRequest(un.CodeActionResolveRequest.type,C,T,h));return u.resolveCodeAction?u.resolveCodeAction(i,s,p):p(i,s)}:void 0};return[NC.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};Ho.CodeActionFeature=Tu});var Bh=Z(Ko=>{"use strict";E();D();x();R();S();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.CodeLensFeature=void 0;var kh=we("vscode"),ti=De(),jC=ft(),Li=Me(),ku=class extends Li.TextDocumentLanguageFeature{constructor(e){super(e,ti.CodeLensRequest.type)}fillClientCapabilities(e){(0,Li.ensure)((0,Li.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Li.ensure)((0,Li.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(ti.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);i&&this.register({id:jC.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new kh.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(s,o)=>{let u=this._client,p=(C,T)=>u.sendRequest(ti.CodeLensRequest.type,u.code2ProtocolConverter.asCodeLensParams(C),T).then(A=>T.isCancellationRequested?null:u.protocol2CodeConverter.asCodeLenses(A,T),A=>u.handleFailedRequest(ti.CodeLensRequest.type,T,A,null)),h=u.middleware;return h.provideCodeLenses?h.provideCodeLenses(s,o,p):p(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{let u=this._client,p=(C,T)=>u.sendRequest(ti.CodeLensResolveRequest.type,u.code2ProtocolConverter.asCodeLens(C),T).then(A=>T.isCancellationRequested?C:u.protocol2CodeConverter.asCodeLens(A),A=>u.handleFailedRequest(ti.CodeLensResolveRequest.type,T,A,C)),h=u.middleware;return h.resolveCodeLens?h.resolveCodeLens(s,o,p):p(s,o)}:void 0};return[kh.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};Ko.CodeLensFeature=ku});var Ph=Z(cr=>{"use strict";E();D();x();R();S();Object.defineProperty(cr,"__esModule",{value:!0});cr.DocumentOnTypeFormattingFeature=cr.DocumentRangeFormattingFeature=cr.DocumentFormattingFeature=void 0;var Wo=we("vscode"),zn=De(),qu=ft(),Jn=Me(),Ni;(function(n){function e(t){let r=Wo.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}n.fromConfiguration=e})(Ni||(Ni={}));var Bu=class extends Jn.TextDocumentLanguageFeature{constructor(e){super(e,zn.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Jn.ensure)((0,Jn.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);r&&this.register({id:qu.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentFormattingEdits:(i,s,o)=>{let u=this._client,p=(C,T,A)=>{let B={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),options:u.code2ProtocolConverter.asFormattingOptions(T,Ni.fromConfiguration(C))};return u.sendRequest(zn.DocumentFormattingRequest.type,B,A).then(_=>A.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(_,A),_=>u.handleFailedRequest(zn.DocumentFormattingRequest.type,A,_,null))},h=u.middleware;return h.provideDocumentFormattingEdits?h.provideDocumentFormattingEdits(i,s,o,p):p(i,s,o)}};return[Wo.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};cr.DocumentFormattingFeature=Bu;var Pu=class extends Jn.TextDocumentLanguageFeature{constructor(e){super(e,zn.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,Jn.ensure)((0,Jn.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);r&&this.register({id:qu.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,s,o,u)=>{let p=this._client,h=(T,A,B,_)=>{let M={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(T),range:p.code2ProtocolConverter.asRange(A),options:p.code2ProtocolConverter.asFormattingOptions(B,Ni.fromConfiguration(T))};return p.sendRequest(zn.DocumentRangeFormattingRequest.type,M,_).then(U=>_.isCancellationRequested?null:p.protocol2CodeConverter.asTextEdits(U,_),U=>p.handleFailedRequest(zn.DocumentRangeFormattingRequest.type,_,U,null))},C=p.middleware;return C.provideDocumentRangeFormattingEdits?C.provideDocumentRangeFormattingEdits(i,s,o,u,h):h(i,s,o,u)}};return[Wo.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};cr.DocumentRangeFormattingFeature=Pu;var Fu=class extends Jn.TextDocumentLanguageFeature{constructor(e){super(e,zn.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Jn.ensure)((0,Jn.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);r&&this.register({id:qu.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideOnTypeFormattingEdits:(s,o,u,p,h)=>{let C=this._client,T=(B,_,M,U,Y)=>{let le={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(B),position:C.code2ProtocolConverter.asPosition(_),ch:M,options:C.code2ProtocolConverter.asFormattingOptions(U,Ni.fromConfiguration(B))};return C.sendRequest(zn.DocumentOnTypeFormattingRequest.type,le,Y).then(ie=>Y.isCancellationRequested?null:C.protocol2CodeConverter.asTextEdits(ie,Y),ie=>C.handleFailedRequest(zn.DocumentOnTypeFormattingRequest.type,Y,ie,null))},A=C.middleware;return A.provideOnTypeFormattingEdits?A.provideOnTypeFormattingEdits(s,o,u,p,h,T):T(s,o,u,p,h)}},i=e.moreTriggerCharacter||[];return[Wo.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.firstTriggerCharacter,...i),r]}};cr.DocumentOnTypeFormattingFeature=Fu});var qh=Z($o=>{"use strict";E();D();x();R();S();Object.defineProperty($o,"__esModule",{value:!0});$o.RenameFeature=void 0;var HC=we("vscode"),br=De(),KC=ft(),Fh=xn(),Qu=Me(),Iu=class extends Qu.TextDocumentLanguageFeature{constructor(e){super(e,br.RenameRequest.type)}fillClientCapabilities(e){let t=(0,Qu.ensure)((0,Qu.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=br.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);r&&(Fh.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:KC.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t=e.documentSelector,r={provideRenameEdits:(i,s,o,u)=>{let p=this._client,h=(T,A,B,_)=>{let M={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(T),position:p.code2ProtocolConverter.asPosition(A),newName:B};return p.sendRequest(br.RenameRequest.type,M,_).then(U=>_.isCancellationRequested?null:p.protocol2CodeConverter.asWorkspaceEdit(U,_),U=>p.handleFailedRequest(br.RenameRequest.type,_,U,null,!1))},C=p.middleware;return C.provideRenameEdits?C.provideRenameEdits(i,s,o,u,h):h(i,s,o,u)},prepareRename:e.prepareProvider?(i,s,o)=>{let u=this._client,p=(C,T,A)=>{let B={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),position:u.code2ProtocolConverter.asPosition(T)};return u.sendRequest(br.PrepareRenameRequest.type,B,A).then(_=>A.isCancellationRequested?null:br.Range.is(_)?u.protocol2CodeConverter.asRange(_):this.isDefaultBehavior(_)?_.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):_&&br.Range.is(_.range)?{range:u.protocol2CodeConverter.asRange(_.range),placeholder:_.placeholder}:Promise.reject(new Error("The element can't be renamed.")),_=>{throw typeof _.message=="string"?new Error(_.message):new Error("The element can't be renamed.")})},h=u.middleware;return h.prepareRename?h.prepareRename(i,s,o,p):p(i,s,o)}:void 0};return[this.registerProvider(t,r),r]}registerProvider(e,t){return HC.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&Fh.boolean(t.defaultBehavior)}};$o.RenameFeature=Iu});var Qh=Z(Go=>{"use strict";E();D();x();R();S();Object.defineProperty(Go,"__esModule",{value:!0});Go.DocumentLinkFeature=void 0;var WC=we("vscode"),Ui=De(),Ou=Me(),$C=ft(),Mu=class extends Ou.TextDocumentLanguageFeature{constructor(e){super(e,Ui.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,Ou.ensure)((0,Ou.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);r&&this.register({id:$C.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentLinks:(i,s)=>{let o=this._client,u=(h,C)=>o.sendRequest(Ui.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(h),C).then(T=>C.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(T,C),T=>o.handleFailedRequest(Ui.DocumentLinkRequest.type,C,T,null)),p=o.middleware;return p.provideDocumentLinks?p.provideDocumentLinks(i,s,u):u(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let o=this._client,u=(h,C)=>o.sendRequest(Ui.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(h),C).then(T=>C.isCancellationRequested?h:o.protocol2CodeConverter.asDocumentLink(T),T=>o.handleFailedRequest(Ui.DocumentLinkResolveRequest.type,C,T,h)),p=o.middleware;return p.resolveDocumentLink?p.resolveDocumentLink(i,s,u):u(i,s)}:void 0};return[WC.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Go.DocumentLinkFeature=Mu});var Oh=Z(zo=>{"use strict";E();D();x();R();S();Object.defineProperty(zo,"__esModule",{value:!0});zo.ExecuteCommandFeature=void 0;var GC=we("vscode"),Lu=De(),zC=ft(),Ih=Me(),Nu=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Lu.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,Ih.ensure)((0,Ih.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:zC.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.middleware,i=(s,o)=>{let u={command:s,arguments:o};return t.sendRequest(Lu.ExecuteCommandRequest.type,u).then(void 0,p=>t.handleFailedRequest(Lu.ExecuteCommandRequest.type,void 0,p,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(GC.commands.registerCommand(o,(...u)=>r.executeCommand?r.executeCommand(o,u,i):i(o,u)));this._commands.set(e.id,s)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};zo.ExecuteCommandFeature=Nu});var Mh=Z(Vo=>{"use strict";E();D();x();R();S();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.FileSystemWatcherFeature=void 0;var JC=we("vscode"),Er=De(),Jo=Me(),Uu=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Er.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Jo.ensure)((0,Jo.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Jo.ensure)((0,Jo.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let s=!0,o=!0,u=!0;r.kind!==void 0&&r.kind!==null&&(s=(r.kind&Er.WatchKind.Create)!==0,o=(r.kind&Er.WatchKind.Change)!==0,u=(r.kind&Er.WatchKind.Delete)!==0);let p=JC.workspace.createFileSystemWatcher(i,!s,!o,!u);this.hookListeners(p,s,o,u,t),t.push(p)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,s){t&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Er.FileChangeType.Created}),null,s),r&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Er.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Er.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};Vo.FileSystemWatcherFeature=Uu});var Lh=Z(Zo=>{"use strict";E();D();x();R();S();Object.defineProperty(Zo,"__esModule",{value:!0});Zo.ColorProviderFeature=void 0;var VC=we("vscode"),ji=De(),ju=Me(),Hu=class extends ju.TextDocumentLanguageFeature{constructor(e){super(e,ji.DocumentColorRequest.type)}fillClientCapabilities(e){(0,ju.ensure)((0,ju.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,s,o)=>{let u=this._client,p=(C,T,A)=>{let B={color:C,textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(T.document),range:u.code2ProtocolConverter.asRange(T.range)};return u.sendRequest(ji.ColorPresentationRequest.type,B,A).then(_=>A.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(_,A),_=>u.handleFailedRequest(ji.ColorPresentationRequest.type,A,_,null))},h=u.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,s,o,p):p(i,s,o)},provideDocumentColors:(i,s)=>{let o=this._client,u=(h,C)=>{let T={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(h)};return o.sendRequest(ji.DocumentColorRequest.type,T,C).then(A=>C.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(A,C),A=>o.handleFailedRequest(ji.DocumentColorRequest.type,C,A,null))},p=o.middleware;return p.provideDocumentColors?p.provideDocumentColors(i,s,u):u(i,s)}};return[VC.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Zo.ColorProviderFeature=Hu});var Nh=Z(Xo=>{"use strict";E();D();x();R();S();Object.defineProperty(Xo,"__esModule",{value:!0});Xo.ImplementationFeature=void 0;var ZC=we("vscode"),Ku=De(),Wu=Me(),$u=class extends Wu.TextDocumentLanguageFeature{constructor(e){super(e,Ku.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,Wu.ensure)((0,Wu.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,s,o)=>{let u=this._client,p=(C,T,A)=>u.sendRequest(Ku.ImplementationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(C,T),A).then(B=>A.isCancellationRequested?null:u.protocol2CodeConverter.asDefinitionResult(B,A),B=>u.handleFailedRequest(Ku.ImplementationRequest.type,A,B,null)),h=u.middleware;return h.provideImplementation?h.provideImplementation(i,s,o,p):p(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return ZC.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Xo.ImplementationFeature=$u});var Uh=Z(Yo=>{"use strict";E();D();x();R();S();Object.defineProperty(Yo,"__esModule",{value:!0});Yo.TypeDefinitionFeature=void 0;var XC=we("vscode"),Gu=De(),Hi=Me(),zu=class extends Hi.TextDocumentLanguageFeature{constructor(e){super(e,Gu.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Hi.ensure)((0,Hi.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,Hi.ensure)((0,Hi.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,s,o)=>{let u=this._client,p=(C,T,A)=>u.sendRequest(Gu.TypeDefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(C,T),A).then(B=>A.isCancellationRequested?null:u.protocol2CodeConverter.asDefinitionResult(B,A),B=>u.handleFailedRequest(Gu.TypeDefinitionRequest.type,A,B,null)),h=u.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,s,o,p):p(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return XC.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Yo.TypeDefinitionFeature=zu});var jh=Z(ni=>{"use strict";E();D();x();R();S();Object.defineProperty(ni,"__esModule",{value:!0});ni.WorkspaceFoldersFeature=ni.arrayDiff=void 0;var YC=ft(),es=we("vscode"),Ki=De();function Ju(n,e){if(n!=null)return n[e]}function Vu(n,e){return n.filter(t=>e.indexOf(t)<0)}ni.arrayDiff=Vu;var Zu=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Ki.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=es.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Ki.WorkspaceFoldersRequest.type,s=>{let o=()=>{let p=es.workspace.workspaceFolders;return p===void 0?null:p.map(C=>this.asProtocol(C))},u=t.middleware.workspace;return u&&u.workspaceFolders?u.workspaceFolders(s,o):o(s)});let r=Ju(Ju(Ju(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=YC.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let r=Vu(this._initialFolders,e),i=Vu(e,this._initialFolders);(i.length>0||r.length>0)&&(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(r=>{this._client.error(`Sending notification ${Ki.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Ki.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=es.workspace.onDidChangeWorkspaceFolders(s=>{let o=h=>this.doSendEvent(h.added,h.removed),u=r.middleware.workspace;(u&&u.didChangeWorkspaceFolders?u.didChangeWorkspaceFolders(s,o):o(s)).catch(h=>{this._client.error(`Sending notification ${Ki.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(es.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};ni.WorkspaceFoldersFeature=Zu});var Hh=Z(ts=>{"use strict";E();D();x();R();S();Object.defineProperty(ts,"__esModule",{value:!0});ts.FoldingRangeFeature=void 0;var eA=we("vscode"),ri=De(),Xu=Me(),Yu=class extends Xu.TextDocumentLanguageFeature{constructor(e){super(e,ri.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Xu.ensure)((0,Xu.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[ri.FoldingRangeKind.Comment,ri.FoldingRangeKind.Imports,ri.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,s,o)=>{let u=this._client,p=(C,T,A)=>{let B={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C)};return u.sendRequest(ri.FoldingRangeRequest.type,B,A).then(_=>A.isCancellationRequested?null:u.protocol2CodeConverter.asFoldingRanges(_,A),_=>u.handleFailedRequest(ri.FoldingRangeRequest.type,A,_,null))},h=u.middleware;return h.provideFoldingRanges?h.provideFoldingRanges(i,s,o,p):p(i,s,o)}};return[eA.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};ts.FoldingRangeFeature=Yu});var Kh=Z(ns=>{"use strict";E();D();x();R();S();Object.defineProperty(ns,"__esModule",{value:!0});ns.DeclarationFeature=void 0;var tA=we("vscode"),el=De(),tl=Me(),nl=class extends tl.TextDocumentLanguageFeature{constructor(e){super(e,el.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,tl.ensure)((0,tl.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,s,o)=>{let u=this._client,p=(C,T,A)=>u.sendRequest(el.DeclarationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(C,T),A).then(B=>A.isCancellationRequested?null:u.protocol2CodeConverter.asDeclarationResult(B,A),B=>u.handleFailedRequest(el.DeclarationRequest.type,A,B,null)),h=u.middleware;return h.provideDeclaration?h.provideDeclaration(i,s,o,p):p(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return tA.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ns.DeclarationFeature=nl});var Wh=Z(rs=>{"use strict";E();D();x();R();S();Object.defineProperty(rs,"__esModule",{value:!0});rs.SelectionRangeFeature=void 0;var nA=we("vscode"),rl=De(),il=Me(),ol=class extends il.TextDocumentLanguageFeature{constructor(e){super(e,rl.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,il.ensure)((0,il.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,s,o)=>{let u=this._client,p=async(C,T,A)=>{let B={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),positions:await u.code2ProtocolConverter.asPositions(T,A)};return u.sendRequest(rl.SelectionRangeRequest.type,B,A).then(_=>A.isCancellationRequested?null:u.protocol2CodeConverter.asSelectionRanges(_,A),_=>u.handleFailedRequest(rl.SelectionRangeRequest.type,A,_,null))},h=u.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,s,o,p):p(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return nA.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};rs.SelectionRangeFeature=ol});var Gh=Z(is=>{"use strict";E();D();x();R();S();Object.defineProperty(is,"__esModule",{value:!0});is.ProgressFeature=void 0;var $h=De(),rA=Zc();function iA(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var sl=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:$h.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){iA(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new rA.ProgressPart(this._client,i.token,t))};e.onRequest($h.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};is.ProgressFeature=sl});var zh=Z(os=>{"use strict";E();D();x();R();S();Object.defineProperty(os,"__esModule",{value:!0});os.CallHierarchyFeature=void 0;var oA=we("vscode"),Dr=De(),al=Me(),cl=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,r){let i=this.client,s=this.middleware,o=(u,p,h)=>{let C=i.code2ProtocolConverter.asTextDocumentPositionParams(u,p);return i.sendRequest(Dr.CallHierarchyPrepareRequest.type,C,h).then(T=>h.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(T,h),T=>i.handleFailedRequest(Dr.CallHierarchyPrepareRequest.type,h,T,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,r,o):o(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,s=(o,u)=>{let p={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(Dr.CallHierarchyIncomingCallsRequest.type,p,u).then(h=>u.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h,u),h=>r.handleFailedRequest(Dr.CallHierarchyIncomingCallsRequest.type,u,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,s):s(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,s=(o,u)=>{let p={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(Dr.CallHierarchyOutgoingCallsRequest.type,p,u).then(h=>u.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h,u),h=>r.handleFailedRequest(Dr.CallHierarchyOutgoingCallsRequest.type,u,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,s):s(e,t)}},ul=class extends al.TextDocumentLanguageFeature{constructor(e){super(e,Dr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,r=(0,al.ensure)((0,al.ensure)(t,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new cl(t);return[oA.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};os.CallHierarchyFeature=ul});var Jh=Z(as=>{"use strict";E();D();x();R();S();Object.defineProperty(as,"__esModule",{value:!0});as.SemanticTokensFeature=void 0;var ss=we("vscode"),xe=De(),Wi=Me(),sA=xn(),ll=class extends Wi.TextDocumentLanguageFeature{constructor(e){super(e,xe.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,Wi.ensure)((0,Wi.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[xe.SemanticTokenTypes.namespace,xe.SemanticTokenTypes.type,xe.SemanticTokenTypes.class,xe.SemanticTokenTypes.enum,xe.SemanticTokenTypes.interface,xe.SemanticTokenTypes.struct,xe.SemanticTokenTypes.typeParameter,xe.SemanticTokenTypes.parameter,xe.SemanticTokenTypes.variable,xe.SemanticTokenTypes.property,xe.SemanticTokenTypes.enumMember,xe.SemanticTokenTypes.event,xe.SemanticTokenTypes.function,xe.SemanticTokenTypes.method,xe.SemanticTokenTypes.macro,xe.SemanticTokenTypes.keyword,xe.SemanticTokenTypes.modifier,xe.SemanticTokenTypes.comment,xe.SemanticTokenTypes.string,xe.SemanticTokenTypes.number,xe.SemanticTokenTypes.regexp,xe.SemanticTokenTypes.operator,xe.SemanticTokenTypes.decorator],t.tokenModifiers=[xe.SemanticTokenModifiers.declaration,xe.SemanticTokenModifiers.definition,xe.SemanticTokenModifiers.readonly,xe.SemanticTokenModifiers.static,xe.SemanticTokenModifiers.deprecated,xe.SemanticTokenModifiers.abstract,xe.SemanticTokenModifiers.async,xe.SemanticTokenModifiers.modification,xe.SemanticTokenModifiers.documentation,xe.SemanticTokenModifiers.defaultLibrary],t.formats=[xe.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,Wi.ensure)((0,Wi.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(xe.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(t,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let t=e.documentSelector,r=sA.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new ss.EventEmitter,o=r?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(B,_)=>{let M=this._client,U=M.middleware,Y=(le,ie)=>{let ye={textDocument:M.code2ProtocolConverter.asTextDocumentIdentifier(le)};return M.sendRequest(xe.SemanticTokensRequest.type,ye,ie).then(te=>ie.isCancellationRequested?null:M.protocol2CodeConverter.asSemanticTokens(te,ie),te=>M.handleFailedRequest(xe.SemanticTokensRequest.type,ie,te,null))};return U.provideDocumentSemanticTokens?U.provideDocumentSemanticTokens(B,_,Y):Y(B,_)},provideDocumentSemanticTokensEdits:i?(B,_,M)=>{let U=this._client,Y=U.middleware,le=(ie,ye,te)=>{let de={textDocument:U.code2ProtocolConverter.asTextDocumentIdentifier(ie),previousResultId:ye};return U.sendRequest(xe.SemanticTokensDeltaRequest.type,de,te).then(async re=>te.isCancellationRequested?null:xe.SemanticTokens.is(re)?await U.protocol2CodeConverter.asSemanticTokens(re,te):await U.protocol2CodeConverter.asSemanticTokensEdits(re,te),re=>U.handleFailedRequest(xe.SemanticTokensDeltaRequest.type,te,re,null))};return Y.provideDocumentSemanticTokensEdits?Y.provideDocumentSemanticTokensEdits(B,_,M,le):le(B,_,M)}:void 0}:void 0,p=e.range===!0?{provideDocumentRangeSemanticTokens:(B,_,M)=>{let U=this._client,Y=U.middleware,le=(ie,ye,te)=>{let de={textDocument:U.code2ProtocolConverter.asTextDocumentIdentifier(ie),range:U.code2ProtocolConverter.asRange(ye)};return U.sendRequest(xe.SemanticTokensRangeRequest.type,de,te).then(re=>te.isCancellationRequested?null:U.protocol2CodeConverter.asSemanticTokens(re,te),re=>U.handleFailedRequest(xe.SemanticTokensRangeRequest.type,te,re,null))};return Y.provideDocumentRangeSemanticTokens?Y.provideDocumentRangeSemanticTokens(B,_,M,le):le(B,_,M)}}:void 0,h=[],C=this._client,T=C.protocol2CodeConverter.asSemanticTokensLegend(e.legend),A=C.protocol2CodeConverter.asDocumentSelector(t);return o!==void 0&&h.push(ss.languages.registerDocumentSemanticTokensProvider(A,o,T)),p!==void 0&&h.push(ss.languages.registerDocumentRangeSemanticTokensProvider(A,p,T)),[new ss.Disposable(()=>h.forEach(B=>B.dispose())),{range:p,full:o,onDidChangeSemanticTokensEmitter:s}]}};as.SemanticTokensFeature=ll});var Xh=Z(Yt=>{"use strict";E();D();x();R();S();Object.defineProperty(Yt,"__esModule",{value:!0});Yt.WillDeleteFilesFeature=Yt.WillRenameFilesFeature=Yt.WillCreateFilesFeature=Yt.DidDeleteFilesFeature=Yt.DidRenameFilesFeature=Yt.DidCreateFilesFeature=void 0;var gn=we("vscode"),aA=Do(),Vn=De(),cA=ft();function Vh(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function uA(n,e){return n[e]}function Zh(n,e,t){n[e]=t}var Zn=class{constructor(e,t,r,i,s){this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Vh(Vh(e,"workspace"),"fileOperations");Zh(t,"dynamicRegistration",!0),Zh(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?uA(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:cA.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=>{let i=new aA.Minimatch(r.pattern.glob,Zn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return Zn.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async s=>{let o=t(s),u=o.fsPath.replace(/\\/g,"/");for(let p of this._filters.values())for(let h of p)if(!(h.scheme!==void 0&&h.scheme!==o.scheme)){if(h.matcher.match(u)){if(h.kind===void 0)return!0;let C=await this.getFileType(o);if(C===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(C===gn.FileType.File&&h.kind===Vn.FileOperationPatternKind.file||C===gn.FileType.Directory&&h.kind===Vn.FileOperationPatternKind.folder)return!0}else if(h.kind===Vn.FileOperationPatternKind.folder&&await Zn.getFileType(o)===gn.FileType.Directory&&h.matcher.match(`${u}/`))return!0}return!1})),i=e.files.filter((s,o)=>r[o]);return{...e,files:i}}static async getFileType(e){try{return(await gn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},cs=class extends Zn{constructor(e,t,r,i,s,o,u){super(e,t,r,i,s),this._notificationType=r,this._accessUri=o,this._createParams=u}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},us=class extends cs{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await Zn.getFileType(e);return r&&this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},dl=class extends cs{constructor(e){super(e,gn.workspace.onDidCreateFiles,Vn.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};Yt.DidCreateFilesFeature=dl;var fl=class extends us{constructor(e){super(e,gn.workspace.onDidRenameFiles,Vn.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=gn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};Yt.DidRenameFilesFeature=fl;var pl=class extends us{constructor(e){super(e,gn.workspace.onDidDeleteFiles,Vn.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=gn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};Yt.DidDeleteFilesFeature=pl;var $i=class extends Zn{constructor(e,t,r,i,s,o,u){super(e,t,r,i,s),this._requestType=r,this._accessUri=o,this._createParams=u}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},hl=class extends $i{constructor(e){super(e,gn.workspace.onWillCreateFiles,Vn.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};Yt.WillCreateFilesFeature=hl;var gl=class extends $i{constructor(e){super(e,gn.workspace.onWillRenameFiles,Vn.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};Yt.WillRenameFilesFeature=gl;var ml=class extends $i{constructor(e){super(e,gn.workspace.onWillDeleteFiles,Vn.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};Yt.WillDeleteFilesFeature=ml});var Yh=Z(ls=>{"use strict";E();D();x();R();S();Object.defineProperty(ls,"__esModule",{value:!0});ls.LinkedEditingFeature=void 0;var lA=we("vscode"),yl=De(),vl=Me(),wl=class extends vl.TextDocumentLanguageFeature{constructor(e){super(e,yl.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,vl.ensure)((0,vl.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,s,o)=>{let u=this._client,p=(C,T,A)=>u.sendRequest(yl.LinkedEditingRangeRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(C,T),A).then(B=>A.isCancellationRequested?null:u.protocol2CodeConverter.asLinkedEditingRanges(B,A),B=>u.handleFailedRequest(yl.LinkedEditingRangeRequest.type,A,B,null)),h=u.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,s,o,p):p(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return lA.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ls.LinkedEditingFeature=wl});var eg=Z(ds=>{"use strict";E();D();x();R();S();Object.defineProperty(ds,"__esModule",{value:!0});ds.TypeHierarchyFeature=void 0;var dA=we("vscode"),xr=De(),Cl=Me(),Al=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,r){let i=this.client,s=this.middleware,o=(u,p,h)=>{let C=i.code2ProtocolConverter.asTextDocumentPositionParams(u,p);return i.sendRequest(xr.TypeHierarchyPrepareRequest.type,C,h).then(T=>h.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(T,h),T=>i.handleFailedRequest(xr.TypeHierarchyPrepareRequest.type,h,T,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,t,r,o):o(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,s=(o,u)=>{let p={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(xr.TypeHierarchySupertypesRequest.type,p,u).then(h=>u.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(h,u),h=>r.handleFailedRequest(xr.TypeHierarchySupertypesRequest.type,u,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,s):s(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,s=(o,u)=>{let p={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(xr.TypeHierarchySubtypesRequest.type,p,u).then(h=>u.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(h,u),h=>r.handleFailedRequest(xr.TypeHierarchySubtypesRequest.type,u,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,s):s(e,t)}},_l=class extends Cl.TextDocumentLanguageFeature{constructor(e){super(e,xr.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,Cl.ensure)((0,Cl.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Al(t);return[dA.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};ds.TypeHierarchyFeature=_l});var ng=Z(ps=>{"use strict";E();D();x();R();S();Object.defineProperty(ps,"__esModule",{value:!0});ps.InlineValueFeature=void 0;var tg=we("vscode"),fs=De(),Gi=Me(),bl=class extends Gi.TextDocumentLanguageFeature{constructor(e){super(e,fs.InlineValueRequest.type)}fillClientCapabilities(e){(0,Gi.ensure)((0,Gi.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Gi.ensure)((0,Gi.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(fs.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new tg.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(s,o,u,p)=>{let h=this._client,C=(A,B,_,M)=>{let U={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(A),range:h.code2ProtocolConverter.asRange(B),context:h.code2ProtocolConverter.asInlineValueContext(_)};return h.sendRequest(fs.InlineValueRequest.type,U,M).then(Y=>M.isCancellationRequested?null:h.protocol2CodeConverter.asInlineValues(Y,M),Y=>h.handleFailedRequest(fs.InlineValueRequest.type,M,Y,null))},T=h.middleware;return T.provideInlineValues?T.provideInlineValues(s,o,u,p,C):C(s,o,u,p)}};return[this.registerProvider(t,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,t){return tg.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ps.InlineValueFeature=bl});var ig=Z(hs=>{"use strict";E();D();x();R();S();Object.defineProperty(hs,"__esModule",{value:!0});hs.InlayHintsFeature=void 0;var rg=we("vscode"),ii=De(),zi=Me(),El=class extends zi.TextDocumentLanguageFeature{constructor(e){super(e,ii.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,zi.ensure)((0,zi.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,zi.ensure)((0,zi.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(ii.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(t,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new rg.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(s,o,u)=>{let p=this._client,h=async(T,A,B)=>{let _={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(T),range:p.code2ProtocolConverter.asRange(A)};try{let M=await p.sendRequest(ii.InlayHintRequest.type,_,B);return B.isCancellationRequested?null:p.protocol2CodeConverter.asInlayHints(M,B)}catch(M){return p.handleFailedRequest(ii.InlayHintRequest.type,B,M,null)}},C=p.middleware;return C.provideInlayHints?C.provideInlayHints(s,o,u,h):h(s,o,u)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{let u=this._client,p=async(C,T)=>{try{let A=await u.sendRequest(ii.InlayHintResolveRequest.type,u.code2ProtocolConverter.asInlayHint(C),T);if(T.isCancellationRequested)return null;let B=u.protocol2CodeConverter.asInlayHint(A,T);return T.isCancellationRequested?null:B}catch(A){return u.handleFailedRequest(ii.InlayHintResolveRequest.type,T,A,null)}},h=u.middleware;return h.resolveInlayHint?h.resolveInlayHint(s,o,p):p(s,o)}:void 0,[this.registerProvider(t,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,t){return rg.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};hs.InlayHintsFeature=El});var ug=Z(st=>{"use strict";E();D();x();R();S();Object.defineProperty(st,"__esModule",{value:!0});st.ProposedFeatures=st.BaseLanguageClient=st.MessageTransports=st.SuspendMode=st.State=st.CloseAction=st.ErrorAction=st.RevealOutputChannelOn=void 0;var We=we("vscode"),ee=De(),fA=ah(),pA=lh(),On=xn(),gs=So(),og=ft(),hA=Zc(),Tn=Me(),gA=vc(),sg=mh(),ag=vh(),oi=wh(),mA=Ch(),yA=Ah(),vA=_h(),wA=Eh(),CA=Dh(),AA=_u(),_A=Sh(),bA=Rh(),EA=Th(),DA=Bh(),Dl=Ph(),xA=qh(),SA=Qh(),RA=Oh(),TA=Mh(),kA=Lh(),BA=Nh(),PA=Uh(),FA=jh(),qA=Hh(),QA=Kh(),IA=Wh(),OA=Gh(),MA=zh(),LA=Jh(),si=Xh(),NA=Yh(),UA=eg(),jA=ng(),HA=ig(),Ji;(function(n){n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(Ji=st.RevealOutputChannelOn||(st.RevealOutputChannelOn={}));var ys;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(ys=st.ErrorAction||(st.ErrorAction={}));var Sr;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(Sr=st.CloseAction||(st.CloseAction={}));var ms;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(ms=st.State||(st.State={}));var KA;(function(n){n.off="off",n.on="on"})(KA=st.SuspendMode||(st.SuspendMode={}));var xl=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?{action:ys.Continue}:{action:ys.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Sr.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Sr.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Sr.Restart})}},Fe;(function(n){n.Initial="initial",n.Starting="starting",n.StartFailed="startFailed",n.Running="running",n.Stopping="stopping",n.Stopped="stopped"})(Fe||(Fe={}));var WA;(function(n){function e(t){return t&&ee.MessageReader.is(t.reader)&&ee.MessageWriter.is(t.writer)}n.is=e})(WA=st.MessageTransports||(st.MessageTransports={}));var Xn=class{constructor(e,t,r){this._traceFormat=ee.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new gs.Semaphore(1),this._id=e,this._name=t,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??Ji.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Fe.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new gs.Semaphore(1),this._pendingChangeDelayer=new gs.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new gs.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new ee.Emitter,this._stateChangeEmitter=new ee.Emitter,this._trace=ee.Trace.Off,this._tracer={log:(s,o)=>{On.string(s)?this.logTrace(s,o):this.logObjectTrace(s)}},this._c2p=fA.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=pA.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=We.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){switch(this.$state){case Fe.Starting:return ms.Starting;case Fe.Running:return ms.Running;default:return ms.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===Fe.StartFailed||this.$state===Fe.Stopping||this.$state===Fe.Stopped)return Promise.reject(new ee.ResponseError(ee.ErrorCodes.ConnectionInactive,"Client is not running"));let r=await this.$start();return this._didChangeTextDocumentFeature.syncKind===ee.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r),r.sendRequest(e,...t)}onRequest(e,t){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,t);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,t)),s={dispose:()=>{let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,t),s={dispose:()=>{this._pendingRequestHandlers.delete(r);let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),s.dispose()}}}async sendNotification(e,t){if(this.$state===Fe.StartFailed||this.$state===Fe.Stopping||this.$state===Fe.Stopped)return Promise.reject(new ee.ResponseError(ee.ErrorCodes.ConnectionInactive,"Client is not running"));let r=this._didChangeTextDocumentFeature.syncKind===ee.TextDocumentSyncKind.Full,i;r&&typeof e!="string"&&e.method===ee.DidOpenTextDocumentNotification.method&&(i=t?.textDocument.uri,this._pendingOpenNotifications.add(i));let s=await this.$start();return r&&await this.sendPendingFullTextDocumentChanges(s),i!==void 0&&this._pendingOpenNotifications.delete(i),s.sendNotification(e,t)}onNotification(e,t){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,t);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,t)),s={dispose:()=>{let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,t),s={dispose:()=>{this._pendingNotificationHandlers.delete(r);let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),s.dispose()}}}async sendProgress(e,t,r){if(this.$state===Fe.StartFailed||this.$state===Fe.Stopping||this.$state===Fe.Stopped)return Promise.reject(new ee.ResponseError(ee.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,r)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}onProgress(e,t,r){this._progressHandlers.set(t,{type:e,handler:r});let i=this.activeConnection(),s,o=this._clientOptions.middleware?.handleWorkDoneProgress,u=ee.WorkDoneProgress.is(e)&&o!==void 0?p=>{o(t,p,()=>r(p))}:r;return i!==void 0?(this._progressDisposables.set(t,i.onProgress(e,t,u)),s={dispose:()=>{let p=this._progressDisposables.get(t);p!==void 0&&(p.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:r}),s={dispose:()=>{this._pendingProgressHandlers.delete(t);let p=this._progressDisposables.get(t);p!==void 0&&(p.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new xl(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof ee.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?On.string(e.stack)?e.stack:e.message:On.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=Ji.Info&&this.showNotificationMessage(ee.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=Ji.Warn&&this.showNotificationMessage(ee.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=Ji.Error)&&this.showNotificationMessage(ee.MessageType.Error,e)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===ee.MessageType.Error?We.window.showErrorMessage:e===ee.MessageType.Warning?We.window.showWarningMessage:We.window.showInformationMessage)(t,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Fe.Initial||this.$state===Fe.Stopping||this.$state===Fe.Stopped}needsStop(){return this.$state===Fe.Starting||this.$state===Fe.Running}activeConnection(){return this.$state===Fe.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===Fe.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===Fe.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?We.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):We.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=Fe.Starting;try{let i=await this.createConnection();i.onNotification(ee.LogMessageNotification.type,s=>{switch(s.type){case ee.MessageType.Error:this.error(s.message,void 0,!1);break;case ee.MessageType.Warning:this.warn(s.message,void 0,!1);break;case ee.MessageType.Info:this.info(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification(ee.ShowMessageNotification.type,s=>{switch(s.type){case ee.MessageType.Error:We.window.showErrorMessage(s.message);break;case ee.MessageType.Warning:We.window.showWarningMessage(s.message);break;case ee.MessageType.Info:We.window.showInformationMessage(s.message);break;default:We.window.showInformationMessage(s.message)}}),i.onRequest(ee.ShowMessageRequest.type,s=>{let o;switch(s.type){case ee.MessageType.Error:o=We.window.showErrorMessage;break;case ee.MessageType.Warning:o=We.window.showWarningMessage;break;case ee.MessageType.Info:o=We.window.showInformationMessage;break;default:o=We.window.showInformationMessage}let u=s.actions||[];return o(s.message,...u)}),i.onNotification(ee.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest(ee.ShowDocumentRequest.type,async s=>{let o=async p=>{let h=this.protocol2CodeConverter.asUri(p.uri);try{if(p.external===!0)return{success:await We.env.openExternal(h)};{let C={};return p.selection!==void 0&&(C.selection=this.protocol2CodeConverter.asRange(p.selection)),p.takeFocus===void 0||p.takeFocus===!1?C.preserveFocus=!0:p.takeFocus===!0&&(C.preserveFocus=!1),await We.window.showTextDocument(h,C),{success:!0}}}catch{return{success:!1}}},u=this._clientOptions.middleware.window?.showDocument;return u!==void 0?u(s,o):o(s)}),i.listen(),await this.initialize(i),t()}catch(i){this.$state=Fe.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((i,s)=>{e=i,t=s}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:We.env.appName,version:We.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(We.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:On.func(t)?t():t,trace:ee.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let o=og.generateUuid(),u=new hA.ProgressPart(e,o);s.workDoneToken=o;try{let p=await this.doInitialize(e,s);return u.done(),p}catch(p){throw u.cancel(),p}}else return this.doInitialize(e,s)}async doInitialize(e,t){try{let r=await e.initialize(t);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==ee.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=Fe.Running;let i;On.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===ee.TextDocumentSyncKind.None?i={openClose:!1,change:ee.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(ee.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest(ee.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(ee.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(ee.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,o]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,o));this._pendingNotificationHandlers.clear();for(let[s,o]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,o));this._pendingRequestHandlers.clear();for(let[s,o]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(o.type,s,o.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(ee.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof ee.ResponseError&&r.data&&r.data.retry?We.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&We.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=We.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===Fe.Stopped||this.$state===Fe.Initial)return;if(this.$state===Fe.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==Fe.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Fe.Stopping,this.cleanUp(e);let i=new Promise(o=>{(0,ee.RAL)().timer.setTimeout(o,t)}),s=(async o=>(await o.shutdown(),await o.exit(),o))(r);return this._onStop=Promise.race([i,s]).then(o=>{if(o!==void 0)o.end(),o.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},o=>{throw this.error("Stopping server failed",o,!1),o}).finally(()=>{this.$state=Fe.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let r of t)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(s){return t._fileEvents.push(s),t._fileEventDelayer.trigger(async()=>{await t.sendNotification(ee.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(s=>{t.error("Notify file events failed.",s)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(t.length===0)return;for(let r of t){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification(ee.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(r,ee.DidChangeTextDocumentNotification.type,i)}}catch(t){throw this.error("Sending pending changes failed",t,!1),t}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,ee.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,r]=e.value;this._diagnosticQueue.delete(t);let i=new We.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(s=>{if(!i.token.isCancellationRequested){let o=this._p2c.asUri(t),u=this.clientOptions.middleware;u.handleDiagnostics?u.handleDiagnostics(o,s,(p,h)=>this.setDiagnostics(p,h)):this.setDiagnostics(o,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}getLocale(){return We.env.language}async $start(){if(this.$state===Fe.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,o)=>{this.handleConnectionError(i,s,o).catch(u=>this.error("Handling connection error failed",u))},t=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=$A(r.reader,r.writer,e,t,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===Fe.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:Sr.DoNotRestart};if(this.$state!==Fe.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===Sr.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===Fe.Starting?this.$state=Fe.StartFailed:this.$state=Fe.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===Sr.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=Fe.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}async handleConnectionError(e,t,r){let i=await this._clientOptions.errorHandler.error(e,t,r);i.action===ys.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)}))}hookConfigurationChanged(e){this._listeners.push(We.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let r=We.workspace.getConfiguration(this._id),i=ee.Trace.Off,s=ee.TraceFormat.Text;if(r){let o=r.get("trace.server","off");typeof o=="string"?i=ee.Trace.fromString(o):(i=ee.Trace.fromString(r.get("trace.server.verbosity","off")),s=ee.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(o=>{this.error("Updating trace failed with error",o,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;On.array(t)?r=t:r=[t],r&&this._dynamicFeatures.get(ee.DidChangeWatchedFilesNotification.type.method).registerRaw(og.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),Tn.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature(ee.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof sg.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new ag.ConfigurationFeature(this)),this.registerFeature(new oi.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new oi.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new oi.WillSaveFeature(this)),this.registerFeature(new oi.WillSaveWaitUntilFeature(this)),this.registerFeature(new oi.DidSaveTextDocumentFeature(this)),this.registerFeature(new oi.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new TA.FileSystemWatcherFeature(this,t=>this.notifyFileEvent(t))),this.registerFeature(new mA.CompletionItemFeature(this)),this.registerFeature(new yA.HoverFeature(this)),this.registerFeature(new wA.SignatureHelpFeature(this)),this.registerFeature(new vA.DefinitionFeature(this)),this.registerFeature(new bA.ReferencesFeature(this)),this.registerFeature(new CA.DocumentHighlightFeature(this)),this.registerFeature(new AA.DocumentSymbolFeature(this)),this.registerFeature(new _A.WorkspaceSymbolFeature(this)),this.registerFeature(new EA.CodeActionFeature(this)),this.registerFeature(new DA.CodeLensFeature(this)),this.registerFeature(new Dl.DocumentFormattingFeature(this)),this.registerFeature(new Dl.DocumentRangeFormattingFeature(this)),this.registerFeature(new Dl.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new xA.RenameFeature(this)),this.registerFeature(new SA.DocumentLinkFeature(this)),this.registerFeature(new RA.ExecuteCommandFeature(this)),this.registerFeature(new ag.SyncConfigurationFeature(this)),this.registerFeature(new PA.TypeDefinitionFeature(this)),this.registerFeature(new BA.ImplementationFeature(this)),this.registerFeature(new kA.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new FA.WorkspaceFoldersFeature(this)),this.registerFeature(new qA.FoldingRangeFeature(this)),this.registerFeature(new QA.DeclarationFeature(this)),this.registerFeature(new IA.SelectionRangeFeature(this)),this.registerFeature(new OA.ProgressFeature(this)),this.registerFeature(new MA.CallHierarchyFeature(this)),this.registerFeature(new LA.SemanticTokensFeature(this)),this.registerFeature(new NA.LinkedEditingFeature(this)),this.registerFeature(new si.DidCreateFilesFeature(this)),this.registerFeature(new si.DidRenameFilesFeature(this)),this.registerFeature(new si.DidDeleteFilesFeature(this)),this.registerFeature(new si.WillCreateFilesFeature(this)),this.registerFeature(new si.WillRenameFilesFeature(this)),this.registerFeature(new si.WillDeleteFilesFeature(this)),this.registerFeature(new UA.TypeHierarchyFeature(this)),this.registerFeature(new jA.InlineValueFeature(this)),this.registerFeature(new HA.InlayHintsFeature(this)),this.registerFeature(new gA.DiagnosticFeature(this)),this.registerFeature(new sg.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(cg.createAll(this))}fillInitializeParams(e){for(let t of this._features)On.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,Tn.ensure)(e,"workspace").applyEdit=!0;let t=(0,Tn.ensure)((0,Tn.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[ee.ResourceOperationKind.Create,ee.ResourceOperationKind.Rename,ee.ResourceOperationKind.Delete],t.failureHandling=ee.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,Tn.ensure)((0,Tn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[ee.DiagnosticTag.Unnecessary,ee.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,Tn.ensure)(e,"window"),s=(0,Tn.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=(0,Tn.ensure)(i,"showDocument");o.support=!0;let u=(0,Tn.ensure)(e,"general");u.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(Xn.RequestsToCancelOnContentModified)},u.regularExpressions={engine:"ECMAScript",version:"ES2020"},u.markdown={parser:"marked",version:"1.1.0"},u.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(u.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let p of this._features)p.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)On.func(r.preInitialize)&&r.preInitialize(this._capabilities,t);for(let r of this._features)r.initialize(this._capabilities,t)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let r=this._dynamicFeatures.get(t.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let i=t.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:t.id,registerOptions:i};try{r.register(s)}catch(o){return Promise.reject(o)}}}async handleUnregistrationRequest(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let r=this._dynamicFeatures.get(t.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));r.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),i=new Map;We.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let s=!1;if(t.documentChanges){for(let o of t.documentChanges)if(ee.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let u=this._p2c.asUri(o.textDocument.uri).toString(),p=i.get(u);if(p&&p.version!==o.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):On.asPromise(We.workspace.applyEdit(r).then(o=>({applied:o})))}handleFailedRequest(e,t,r,i,s=!0){if(r instanceof ee.ResponseError){if(r.code===ee.ErrorCodes.PendingResponseRejected||r.code===ee.ErrorCodes.ConnectionInactive)return i;if(r.code===ee.LSPErrorCodes.RequestCancelled||r.code===ee.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw r.data!==void 0?new Tn.LSPCancellationError(r.data):new We.CancellationError}else if(r.code===ee.LSPErrorCodes.ContentModified){if(Xn.RequestsToCancelOnContentModified.has(e.method)||Xn.CancellableResolveCalls.has(e.method))throw new We.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,s),r}};st.BaseLanguageClient=Xn;Xn.RequestsToCancelOnContentModified=new Set([ee.SemanticTokensRequest.method,ee.SemanticTokensRangeRequest.method,ee.SemanticTokensDeltaRequest.method]);Xn.CancellableResolveCalls=new Set([ee.CompletionResolveRequest.method,ee.CodeLensResolveRequest.method,ee.CodeActionResolveRequest.method,ee.InlayHintResolveRequest.method,ee.DocumentLinkResolveRequest.method,ee.WorkspaceSymbolResolveRequest.method]);var Sl=class{error(e){(0,ee.RAL)().console.error(e)}warn(e){(0,ee.RAL)().console.warn(e)}info(e){(0,ee.RAL)().console.info(e)}log(e){(0,ee.RAL)().console.log(e)}};function $A(n,e,t,r,i){let s=new Sl,o=(0,ee.createProtocolConnection)(n,e,s,i);return o.onError(p=>{t(p[0],p[1],p[2])}),o.onClose(r),{listen:()=>o.listen(),sendRequest:o.sendRequest,onRequest:o.onRequest,hasPendingResponse:o.hasPendingResponse,sendNotification:o.sendNotification,onNotification:o.onNotification,onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(p,h,C)=>{let T={sendNotification:!1,traceFormat:ee.TraceFormat.Text};return C===void 0?o.trace(p,h,T):(On.boolean(C),o.trace(p,h,C))},initialize:p=>o.sendRequest(ee.InitializeRequest.type,p),shutdown:()=>o.sendRequest(ee.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(ee.ExitNotification.type),end:()=>o.end(),dispose:()=>o.dispose()}}var cg;(function(n){function e(t){return[]}n.createAll=e})(cg=st.ProposedFeatures||(st.ProposedFeatures={}))});var Tl=Z(ln=>{"use strict";E();D();x();R();S();var GA=ln&&ln.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Rl=ln&&ln.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&GA(e,n,t)};Object.defineProperty(ln,"__esModule",{value:!0});ln.DiagnosticPullMode=ln.vsdiag=void 0;Rl(De(),ln);Rl(Me(),ln);var lg=vc();Object.defineProperty(ln,"vsdiag",{enumerable:!0,get:function(){return lg.vsdiag}});Object.defineProperty(ln,"DiagnosticPullMode",{enumerable:!0,get:function(){return lg.DiagnosticPullMode}});Rl(ug(),ln)});var kl=Z((DF,dg)=>{"use strict";E();D();x();R();S();dg.exports=De()});var hg=Z(Mn=>{"use strict";E();D();x();R();S();var zA=Mn&&Mn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),pg=Mn&&Mn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&zA(e,n,t)};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.LanguageClient=void 0;var JA=Tl(),fg=kl();pg(kl(),Mn);pg(Tl(),Mn);var Bl=class extends JA.BaseLanguageClient{constructor(e,t,r,i){super(e,t,r),this.worker=i}createMessageTransports(e){let t=new fg.BrowserMessageReader(this.worker),r=new fg.BrowserMessageWriter(this.worker);return Promise.resolve({reader:t,writer:r})}};Mn.LanguageClient=Bl});var mg=Z((OF,gg)=>{"use strict";E();D();x();R();S();gg.exports=hg()});var Ql=Z((sq,Sg)=>{"use strict";E();D();x();R();S();function d_(n,e){function t(){this.constructor=n}t.prototype=e.prototype,n.prototype=new t}function Tr(n,e,t,r){this.message=n,this.expected=e,this.found=t,this.location=r,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Tr)}d_(Tr,Error);Tr.buildMessage=function(n,e){var t={literal:function(h){return'"'+i(h.text)+'"'},class:function(h){var C="",T;for(T=0;T<h.parts.length;T++)C+=h.parts[T]instanceof Array?s(h.parts[T][0])+"-"+s(h.parts[T][1]):s(h.parts[T]);return"["+(h.inverted?"^":"")+C+"]"},any:function(h){return"any character"},end:function(h){return"end of input"},other:function(h){return h.description}};function r(h){return h.charCodeAt(0).toString(16).toUpperCase()}function i(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+r(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+r(C)})}function s(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+r(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+r(C)})}function o(h){return t[h.type](h)}function u(h){var C=new Array(h.length),T,A;for(T=0;T<h.length;T++)C[T]=o(h[T]);if(C.sort(),C.length>0){for(T=1,A=1;T<C.length;T++)C[T-1]!==C[T]&&(C[A]=C[T],A++);C.length=A}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function p(h){return h?'"'+i(h)+'"':"end of input"}return"Expected "+u(n)+" but "+p(e)+" found."};function f_(n,e){e=e!==void 0?e:{};var t={},r={package_file:Ft},i=Ft,s=function(N,z){return{name:N,imports:z.flat()}},o="package",u=St("package",!1),p=function(N){return N},h="import",C=St("import",!1),T=function(N){return N},A=function(N){return[N]},B="(",_=St("(",!1),M=")",U=St(")",!1),Y=/^[a-zA-Z_\/.]/,le=Bt([["a","z"],["A","Z"],"_","/","."],!1,!1),ie=/^[a-zA-Z_\/.:\-0-9]/,ye=Bt([["a","z"],["A","Z"],"_","/",".",":","-",["0","9"]],!1,!1),te=function(N){return N},de=function(N,z){return{alias:N,path:z}},re='"',he=St('"',!1),be=/^[^"]/,nt=Bt(['"'],!0,!1),rt=function(N){return JSON.parse(N)},at=/^[ \t\r\n]/,kt=Bt([" ","	","\r",`
`],!1,!1),X=0,Oe=0,ht=[{line:1,column:1}],ct=0,ze=[],je=0,Pe;if("startRule"in e){if(!(e.startRule in r))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');i=r[e.startRule]}function et(){return n.substring(Oe,X)}function wt(){return Rt(Oe,X)}function mn(N,z){throw z=z!==void 0?z:Rt(Oe,X),Kt([tn(N)],n.substring(Oe,X),z)}function dn(N,z){throw z=z!==void 0?z:Rt(Oe,X),Mt(N,z)}function St(N,z){return{type:"literal",text:N,ignoreCase:z}}function Bt(N,z,ue){return{type:"class",parts:N,inverted:z,ignoreCase:ue}}function Pt(){return{type:"any"}}function en(){return{type:"end"}}function tn(N){return{type:"other",description:N}}function nn(N){var z=ht[N],ue;if(z)return z;for(ue=N-1;!ht[ue];)ue--;for(z=ht[ue],z={line:z.line,column:z.column};ue<N;)n.charCodeAt(ue)===10?(z.line++,z.column=1):z.column++,ue++;return ht[N]=z,z}function Rt(N,z){var ue=nn(N),g=nn(z);return{start:{offset:N,line:ue.line,column:ue.column},end:{offset:z,line:g.line,column:g.column}}}function Re(N){X<ct||(X>ct&&(ct=X,ze=[]),ze.push(N))}function Mt(N,z){return new Tr(N,null,null,z)}function Kt(N,z,ue){return new Tr(Tr.buildMessage(N,z),N,z,ue)}function Ft(){var N,z,ue,g,a;if(N=X,z=yt(),z!==t)if(ue=Jt(),ue===t&&(ue=null),ue!==t){for(g=[],a=Ct();a!==t;)g.push(a),a=Ct();g!==t?(Oe=N,z=s(ue,g),N=z):(X=N,N=t)}else X=N,N=t;else X=N,N=t;return N}function Jt(){var N,z,ue,g;return N=X,n.substr(X,7)===o?(z=o,X+=7):(z=t,je===0&&Re(u)),z!==t?(ue=yt(),ue!==t?(g=Ze(),g!==t?(Oe=N,z=p(g),N=z):(X=N,N=t)):(X=N,N=t)):(X=N,N=t),N}function Ct(){var N,z,ue,g;return N=X,n.substr(X,6)===h?(z=h,X+=6):(z=t,je===0&&Re(C)),z!==t?(ue=yt(),ue!==t?(g=rn(),g!==t?(Oe=N,z=T(g),N=z):(X=N,N=t)):(X=N,N=t)):(X=N,N=t),N}function rn(){var N,z,ue,g,a,c;if(N=X,z=At(),z!==t&&(Oe=N,z=A(z)),N=z,N===t)if(N=X,n.charCodeAt(X)===40?(z=B,X++):(z=t,je===0&&Re(_)),z!==t)if(ue=yt(),ue!==t){for(g=[],a=At();a!==t;)g.push(a),a=At();g!==t?(n.charCodeAt(X)===41?(a=M,X++):(a=t,je===0&&Re(U)),a!==t?(c=yt(),c!==t?(Oe=N,z=T(g),N=z):(X=N,N=t)):(X=N,N=t)):(X=N,N=t)}else X=N,N=t;else X=N,N=t;return N}function Ze(){var N,z,ue,g,a,c;if(N=X,z=X,ue=X,Y.test(n.charAt(X))?(g=n.charAt(X),X++):(g=t,je===0&&Re(le)),g!==t){for(a=[],ie.test(n.charAt(X))?(c=n.charAt(X),X++):(c=t,je===0&&Re(ye));c!==t;)a.push(c),ie.test(n.charAt(X))?(c=n.charAt(X),X++):(c=t,je===0&&Re(ye));a!==t?(g=[g,a],ue=g):(X=ue,ue=t)}else X=ue,ue=t;return ue!==t?z=n.substring(z,X):z=ue,z!==t?(ue=yt(),ue!==t?(Oe=N,z=te(z),N=z):(X=N,N=t)):(X=N,N=t),N}function At(){var N,z,ue;return N=X,z=Ze(),z===t&&(z=null),z!==t?(ue=Je(),ue!==t?(Oe=N,z=de(z,ue),N=z):(X=N,N=t)):(X=N,N=t),N}function Je(){var N,z,ue,g,a,c;if(N=X,z=X,ue=X,n.charCodeAt(X)===34?(g=re,X++):(g=t,je===0&&Re(he)),g!==t){for(a=[],be.test(n.charAt(X))?(c=n.charAt(X),X++):(c=t,je===0&&Re(nt));c!==t;)a.push(c),be.test(n.charAt(X))?(c=n.charAt(X),X++):(c=t,je===0&&Re(nt));a!==t?(n.charCodeAt(X)===34?(c=re,X++):(c=t,je===0&&Re(he)),c!==t?(g=[g,a,c],ue=g):(X=ue,ue=t)):(X=ue,ue=t)}else X=ue,ue=t;return ue!==t?z=n.substring(z,X):z=ue,z!==t?(ue=yt(),ue!==t?(Oe=N,z=rt(z),N=z):(X=N,N=t)):(X=N,N=t),N}function yt(){var N,z;for(N=[],at.test(n.charAt(X))?(z=n.charAt(X),X++):(z=t,je===0&&Re(kt));z!==t;)N.push(z),at.test(n.charAt(X))?(z=n.charAt(X),X++):(z=t,je===0&&Re(kt));return N}if(Pe=i(),Pe!==t&&X===n.length)return Pe;throw Pe!==t&&X<n.length&&Re(en()),Kt(ze,ct<n.length?n.charAt(ct):null,ct<n.length?Rt(ct,ct+1):Rt(ct,ct))}Sg.exports={SyntaxError:Tr,parse:f_}});var V_={};Hl(V_,{activate:()=>J_});E();D();x();R();S();var Ue=qr(we("vscode")),Ss=qr(mg());E();D();x();R();S();var Pl="moonbit",yg="Moonbit";var vg="moonbit-builtin";E();D();x();R();S();var ur=qr(we("vscode"));E();D();x();R();S();var Cg=Symbol("Comlink.proxy"),VA=Symbol("Comlink.endpoint"),ZA=Symbol("Comlink.releaseProxy"),Fl=Symbol("Comlink.finalizer"),ws=Symbol("Comlink.thrown"),Ag=n=>typeof n=="object"&&n!==null||typeof n=="function",XA={canHandle:n=>Ag(n)&&n[Cg],serialize(n){let{port1:e,port2:t}=new MessageChannel;return bs(n,e),[t,[t]]},deserialize(n){return n.start(),n_(n)}},YA={canHandle:n=>Ag(n)&&ws in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},_g=new Map([["proxy",XA],["throw",YA]]);function e_(n,e){for(let t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function bs(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!e_(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}let{id:s,type:o,path:u}=Object.assign({path:[]},i.data),p=(i.data.argumentList||[]).map(Rr),h;try{let C=u.slice(0,-1).reduce((A,B)=>A[B],n),T=u.reduce((A,B)=>A[B],n);switch(o){case"GET":h=T;break;case"SET":C[u.slice(-1)[0]]=Rr(i.data.value),h=!0;break;case"APPLY":h=T.apply(C,p);break;case"CONSTRUCT":{let A=new T(...p);h=a_(A)}break;case"ENDPOINT":{let{port1:A,port2:B}=new MessageChannel;bs(n,B),h=s_(A,[A])}break;case"RELEASE":h=void 0;break;default:return}}catch(C){h={value:C,[ws]:0}}Promise.resolve(h).catch(C=>({value:C,[ws]:0})).then(C=>{let[T,A]=_s(C);e.postMessage(Object.assign(Object.assign({},T),{id:s}),A),o==="RELEASE"&&(e.removeEventListener("message",r),bg(e),Fl in n&&typeof n[Fl]=="function"&&n[Fl]())}).catch(C=>{let[T,A]=_s({value:new TypeError("Unserializable return value"),[ws]:0});e.postMessage(Object.assign(Object.assign({},T),{id:s}),A)})}),e.start&&e.start()}function t_(n){return n.constructor.name==="MessagePort"}function bg(n){t_(n)&&n.close()}function n_(n,e){return ql(n,[],e)}function vs(n){if(n)throw new Error("Proxy has been released and is not useable")}function Eg(n){return ai(n,{type:"RELEASE"}).then(()=>{bg(n)})}var Cs=new WeakMap,As="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{let e=(Cs.get(n)||0)-1;Cs.set(n,e),e===0&&Eg(n)});function r_(n,e){let t=(Cs.get(e)||0)+1;Cs.set(e,t),As&&As.register(n,e,n)}function i_(n){As&&As.unregister(n)}function ql(n,e=[],t=function(){}){let r=!1,i=new Proxy(t,{get(s,o){if(vs(r),o===ZA)return()=>{i_(i),Eg(n),r=!0};if(o==="then"){if(e.length===0)return{then:()=>i};let u=ai(n,{type:"GET",path:e.map(p=>p.toString())}).then(Rr);return u.then.bind(u)}return ql(n,[...e,o])},set(s,o,u){vs(r);let[p,h]=_s(u);return ai(n,{type:"SET",path:[...e,o].map(C=>C.toString()),value:p},h).then(Rr)},apply(s,o,u){vs(r);let p=e[e.length-1];if(p===VA)return ai(n,{type:"ENDPOINT"}).then(Rr);if(p==="bind")return ql(n,e.slice(0,-1));let[h,C]=wg(u);return ai(n,{type:"APPLY",path:e.map(T=>T.toString()),argumentList:h},C).then(Rr)},construct(s,o){vs(r);let[u,p]=wg(o);return ai(n,{type:"CONSTRUCT",path:e.map(h=>h.toString()),argumentList:u},p).then(Rr)}});return r_(i,n),i}function o_(n){return Array.prototype.concat.apply([],n)}function wg(n){let e=n.map(_s);return[e.map(t=>t[0]),o_(e.map(t=>t[1]))]}var Dg=new WeakMap;function s_(n,e){return Dg.set(n,e),n}function a_(n){return Object.assign(n,{[Cg]:!0})}function _s(n){for(let[e,t]of _g)if(t.canHandle(n)){let[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},Dg.get(n)||[]]}function Rr(n){switch(n.type){case"HANDLER":return _g.get(n.name).deserialize(n.value);case"RAW":return n.value}}function ai(n,e,t){return new Promise(r=>{let i=c_();n.addEventListener("message",function s(o){!o.data||!o.data.id||o.data.id!==i||(n.removeEventListener("message",s),r(o.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:i},e),t)})}function c_(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var l_={async stat(n){return ur.workspace.fs.stat(ur.Uri.parse(n))},async readFile(n){return ur.workspace.fs.readFile(ur.Uri.parse(n))},async readDirectory(n){return ur.workspace.fs.readDirectory(ur.Uri.parse(n))}};function xg(n){bs(l_,n)}var jg=qr(Ql());E();D();x();R();S();var p_=qr(Ql()),fq=Symbol("onDidChangeWatchedFiles");function Rg(n){let e="";n.name!==null&&(e+=`package ${n.name}
`,e+=`
`),e+=`import (
`;for(let{path:t,alias:r}of n.imports)r!==null?t.endsWith(`/${r}`)?e+=`  ${JSON.stringify(t)}
`:e+=`  ${r} ${JSON.stringify(t)}
`:e+=`  ${JSON.stringify(t)}
`;return e+=`)
`,e}E();D();x();R();S();var Il=[{name:"builtin",mi:Uint8Array.from(atob("TUlOVEYyMzA1MjCElaa+AAACPgAAAJ8AAAI8AAACLtCgoCVwcmludMCwoKVAIVRAsZAkVW5pdEBAQUGwJ2J1aWx0aW7AK2NvbnNvbGUubWJ0SABsAHXABAJIAGwAepCwBAsEDKCwkCRTaG93sAQLwAQKSABsAH/ABAtIAGwBAIOgsKBCKXRvX3N0cmluZ7CgBBlAsZAmU3RyaW5nQEBBQUBAoCdwcmludGxuwLCgpUAhVECxBCFAQEFBsAQfwAQeQ0JLwAQfQ0JSkLAEBwQIoLAEHbAEJsAEJUNCV8AEJkNCW6CwoEEEG7CgBBJABBpBQUBAkKAmUmVzdWx08KEEMgQDQpCgoCJPa+CQpUAhVLEECqAEBKClQSFFQEGgQkBCoLAECQQKQLAEBQQGQLAERMAqcmVzdWx0Lm1idEJWWMAEAkJWXaCgI0VycuCQBA8EEqBCQUIEDbAETsAECkNeYMAEC0NeZkCQQAQRsARSwAQOQUBJwAQPQUBPIICgoAQmoKAkaXNPa/CwBFyQBCwEBECwoLEEL6ClQCFUoKVBIUVAQUCxkCRCb29sQEBBQbAEasAEJkZqc8AEJ0Zqd0GgsAQMBA1AsAQKBAtAoCVpc0VycvCwBHOQBEMEBECwoLEERqClQCFUoKVBIUVAQUCxBBdAQEFBsAR/wAQ7TQEAlgEAn8AEPE0BAJYBAKRBoLAECgQLQLAECAQJQKAEHpCgKXRvX3N0cmluZ/CwBIqQBCQEBECwoLEEJ0BAQLEEe0BAQEGwBJDABI9MAQC+AQDHwASQTAEAvgEA0EGABJI="),n=>n.charCodeAt(0)),tast:Uint8Array.from(atob("TUNPUkUyMzA4MTeElaa+AAAF8wAAAXEAAAVTAAAFPMCgktCQsCdidWlsdGlukKEEAyZSZXN1bHQkaXNPa6CgsKJDJHNlbGaxBAmgpUAhVKClQSFFQECwBBLAKnJlc3VsdC5tYnRGan3ABAJGagBBQAgAABQTwqJDBA8EDoCwIMAgQEAA/wQCoLCgQkCQoKJPIXiTkJAEGrCQQbGQJEJvb2xAQLAELMAEGkgAaQB2wAQbSABpAHqgsKBCQZCgok4EEpOQkAQosJBABBGwBDrABChJAHsBAInABClJAHsBAI5AQAQUBCSgsAQxBDJAsAQvBDBAQbAEQMAELkZqasAEL0sBAJMBAJSgktCQsARHkARGJWlzRXJyoKCwokQkc2VsZrEETaClQCFUoKVBIUVAQLAEVsAERE0BAJYBAKrABEVNAQCWAQCuQMNMoOeQsARdkARcBFqgwqJEBBQEE4CwBGLABFBOAQDHAQDOwARRTgEAxwEA0kBAsQQ8QECgk5CQBBmTkJAEGbAEbQQLwARbTgEAxwEA2UAERrAEb8AEXU4BAMcBAMnABF5OAQDHAQDaoLAEIgQjQLAEIAQhQEGwBHXABGNNAQCWAQCWwARkTwEA2wEA3KCS0JCwBHxAJ3ByaW50bG6goLCiRiVpbnB1dKVAIVSwBIXAK2NvbnNvbGUubWJ0Q0JdwAQCQ0JiQAgAABARw6BBLHByaW50X3N0cmluZ6DnsUAEDCl0b19zdHJpbmegwqJGBBIEEYCwBJTABA9EcgBBwAQQRHIARkBAsZAmU3RyaW5nQECAsASaBAbABBVEcgBSQLGQJFVuaXRAQLAEn8AEGkRydMAEG0RyAFPDBBigsJUhCgQQsASnwAQiRQBUAGPABCNFAFQAZ0AEDrAEqsAEJUUAVABWwAQmRQBUAGixBBFAQLAErgQPBAOQsAQtBC6gsJAkU2hvd7AEtcAEMENCV8AEMUNCW6CwoEUEK7CgBDpABCZBQUBAQbAEvcAEOENCQsAEOUYAaQBqoJLQkLAExEAlcHJpbnSgoLCiSCVpbnB1dKVAIVSwBM3ABEhIAGwBAIXABElIAGwBAIpAwwRGoOexQAQIBESgwqJIBA0EDICwBNfABFJJAQCZAQCowARTSQEAmQEArUBABEOAsATaBAPABFVJAQCZAQC5QARAsATcwARXSQEAmQEAm8AEWEkBAJkBALqQsAQVBBagsAQwsATjwAReSABsAH/ABF9IAGwBAIOgsKBHBFmwoAQgQARUQUFAQEGwBOvABGZIAGwAbMAEZ0oBALsBALygktCQsATykATKKXRvX3N0cmluZ6CgsKJJJHNlbGaxBNFAQLAE+8AEdkwBAL4BANHABHdMAQC+AQDVQAgAABQSwqJJBAgEB4CwBQEBwAR8TQEA6gEA78AEfU0BAOoBAPOwlSR0cnVlBHCwBQEHwASCTgEA9gEA+sAEg04BAPYBAQCQsJUlZmFsc2UEd7AFAQ7ABIlQAQEMAQEQwASKUAEBDAEBF7EEekBAsAUBEsAEjU0BAOoBAOzABI5RAQEYAQEbgEGwBQEVwASQTAEAvgEAvsAEkVIBARwBAR1AkKAFARbwBQEYQpCgoCJPa+CQpUAhVLEFASGgBASgpUEhRUBBBQEJQqCwBAgECUCwBAQEBUCwBQErwAUBGUJWWMAFARpCVl2goCNFcnLgkAQNBBAFAQJCBAuwBQEzwAUBIUNeYMAFASJDXmZAkEAED7AFATfABQElQUBJwAUBJkFATyCgoAUBOqCgBQE68ATjQLCgsQUBQKClQAUBN6ClQQUBNkBBQATiQUGwBQFHwAUBNUZqc8AFATZGandBoLAFAT4ECECwBQE8BAdAoAUBBfCwBQFPkAUBTgUBCECwoLEFAVGgpUAFAQSgpUEFAQNAQUCxBQEvQEBBQbAFAVnABQFHTQEAlgEAn8AFAUhNAQCWAQCkQaCwBQEMBAlAsAUBCgQIQKAFATaQoARu8LAFAWOQBQE7BHFAsKCxBQE+QEBAsQTRQEBAQbAFAWnABORMAQC+AQDHwATlTAEAvgEA0EGABQFr"),n=>n.charCodeAt(0)),sources:[{filename:"console.mbt",content:`

pub func println[T : Show](input : T) -> Unit {
  print_string(input.to_string())
  print_string("\\n")
}

pub func print[T : Show](input : T) -> Unit{
  print_string(input.to_string())
}

pub func to_string(self : Bool) -> String {
  if self {
    "true"
  } else {
    "false"
  }
}
`},{filename:"result.mbt",content:`pub enum Result[T,E]{
  Ok(T)
  Err(E)
}

pub func isOk[T,E](self : Result[T,E]) -> Bool{
  match self {
    Ok(_) => true
    Err(_) => false
  }
}

pub func isErr[T,E](self : Result[T,E]) -> Bool{
  not (self.isOk())
}

`}]},{name:"canvas",mi:Uint8Array.from(atob("TUlOVEYyMzA1MjCElaa+AAAHYQAAAY8AAAZEAAAGHNDAoCNyZ2LAsKCxkCNJbnRAQKCxBARAQKCxBAZAQECxoSZjYW52YXMsQ2FudmFzX2NvbG9yQEBAQbAEA8ApY29sb3IubWJ0Q1dgwAQCQ1djgKAqcmdiX29mX2ludMCwoLEEFEBAQLEEDkBAQEGwBA7ABAtFAF0AZsAEDEUAXQBwgKAudGV4dF9vZl9zdHJpbmfAsKCxkCZTdHJpbmdAQECxoQQaK0NhbnZhc190ZXh0QEBAQbAEHMAodGV4dC5tYnRHAQDuAQD3wAQCRwEA7gEBBYCgJHJnYmHAsKCxBC1AQKCxBC9AQKCxBDFAQKCxkCdGbG9hdDY0QEBAsQQvQEBAQbAEL8AELEcBAKEBAKrABC1HAQChAQCugLCgMUNhbnZhc19jb250ZXh0XzJk8KEENgQDQECQQICwBDjAKmNhbnZhcy5tYnRBQEnABAJBQFogoAQj8AQlQECQQICwBEDABCRBQEnABCVBQFQEB6AEQvAERUBAkECAsARGwARDQUBJwAREQUBVBA2AkKAEFQgAAFQAoCRmaWxs8LAET5AEGwQEQLCgsQQeQEBAsZAkVW5pdEBAQEGwBFfABB9TAQMqAQMzwAQgUwEDKgEDN0GAoCtzdHJva2VfcmVjdPCwBF2QBCkEBECwoLEELEBAoLEEOEBAoLEEOkBAoLEEPEBAoLEEPkBAQAQWQEGwBGrABDJlAQYeAQYnwAQzZQEGHgEGMkGAoCVzY2FsZfCwBHCQBDwEBECwoLEEP0BAoLEES0BAoLEETUBAQAQlQEGwBHnABEFnAQafAQaowARCZwEGnwEGrUGAoCZzdHJva2XwsAR/kARLBARAsKCxBE5AQEAEMEBBsASEwARMYwEF4AEF6cAETWMBBeABBe9BgKAkc2F2ZfCwBIqQBFYEBECwoLEEWUBAQAQ7QEGwBI/ABFdrAQdPAQdYwARYawEHTwEHXEGAoCNhcmPwsASVkARhBARAsKCxBGRAQKCxBHBAQKCxBHJAQKCxBHRAQKCxBHZAQKCxBHhAQEAEUEBBsASkwARsSwEBkQEBmsAEbUsBAZEBAZ1BgKAncmVzdG9yZfCwBKqQBHYEBECwoLEEeUBAQARbQEGwBK/ABHdtAQeJAQeSwAR4bQEHiQEHmUGAoCdsaW5lX3Rv8LAEtZAEgQQEQLCgsQSEQECgsQSQQECgsQSSQEBABGpAQbAEvsAEhkkBATkBAULABIdJAQE5AQFJQYCgJ21vdmVfdG/wsATEkASQBARAsKCxBJNAQKCxBJ9AQKCxBKFAQEAEeUBBsATNwASVRwEA4QEA6sAElkcBAOEBAPFBgKApdHJhbnNsYXRl8LAE05AEnwQEQLCgsQSiQECgsQSuQECgsQSwQEBABIhAQbAE3MAEpGkBBvMBBvzABKVpAQbzAQcFQYCgKmNsZWFyX3JlY3TwsATikASuBARAsKCxBLFAQKCxBL1AQKCxBL9AQKCxBMFAQKCxBMNAQEAEm0BBsATvwAS3Q1xlwAS4Q1xvQYCgKHNldF9mb2508LAE9ZAEwQQEQLCgsQTEQECgsQTlQEBABKhAQbAE/MAExF8BBXMBBXzABMVfAQVzAQWEQYCgJHJlY3TwsAUBApAEzgQEQLCgsQTRQECgsQTdQECgsQTfQECgsQThQECgsQTjQEBABLtAQbAFAQ/ABNdNAQIaAQIjwATYTQECGgECJ0GAoCpiZWdpbl9wYXRo8LAFARWQBOEEBECwoLEE5EBAQATGQEGwBQEawATiRQEAmwEApMAE40UBAJsBAK5BgKAuc2V0X2ZpbGxfY29sb3LwsAUBIJAE7AQEQLCgsQTvQECgsQUBJ0BAQATTQEGwBQEnwATvUQECxwEC0MAE8FEBAscBAt5BgKApZmlsbF90ZXh08LAFAS2QBPkEBECwoLEE/EBAoLEFARpAQKCxBQEKQECgsQUBDEBAQATkQEGwBQE4wAUBAFcBA+EBA+rABQEBVwED4QED80GAoCRjbGlw8LAFAT6QBQEKBARAsKCxBQENQEBABO9AQbAFAUPABQELTwECjQEClsAFAQxPAQKNAQKaQYCgMV9zZXRfZm9udF9ieV90ZXh08LAFAUmQBQEVBARAsKCxBQEYQECgsQUBNkBAQAT8QEGwBQFQwAUBGF0BBRUBBR7ABQEZXQEFFQEFL0GAoClmaWxsX3JlY3TwsAUBVpAFASIEBECwoLEFASVAQKCxBQExQECgsQUBM0BAoLEFATVAQKCxBQE3QEBABQEPQEGwBQFjwAUBK1UBA2QBA23ABQEsVQEDZAEDdkGAoDBzZXRfc3Ryb2tlX2NvbG9y8LAFAWmQBQE1BARAsKCxBQE4QECgsQUBcEBAQAUBHEBBsAUBcMAFAThZAQRQAQRZwAUBOVkBBFABBGlBgKAuc2V0X2xpbmVfd2lkdGjwsAUBdpAFAUIEBECwoLEFAUVAQKCxBQFRQEBABQEpQEGwBQF9wAUBRVsBBLcBBMDABQFGWwEEtwEEzkGABQF/"),n=>n.charCodeAt(0)),tast:Uint8Array.from(atob("TUNPUkUyMzA4MTeElaa+AAARBQAAA5EAAA2bAAANNMCgw5CwJmNhbnZhc0AqdGV4dF9lbXB0ebBAkESgJmNhbnZhcyp0ZXh0X2VtcHR5QLAECMAodGV4dC5tYnRDVlbABAJDVgBOoMOQsAQPQCl0ZXh0X2NoYXKwoEBAkESgJmNhbnZhcyl0ZXh0X2NoYXJAsAQXwAQPRABPAE/ABBBEAE8BAIygw5CwBB1AK3RleHRfY29uY2F0sKBEoERAkESgJmNhbnZhcyt0ZXh0X2NvbmNhdECwBCbABB5FAQCNAQCNwAQfRQEAjQEA7KCS0JCwBC1ALnRleHRfb2Zfc3RyaW5noKCwokEheLGQJlN0cmluZ0BAsAQ3wAQvRwEA7gEBBsAEMEcBAO4BAQdA1KNIJHRleHTnkAQ/QECxoQRAK0NhbnZhc190ZXh0QECAsARCwAQ6SAEBIgEBL8AEO0gBASIBATvUo0khabCiQJAhMLGQI0ludEBAsARPwARHSQEBPAEBRsAESEkBATwBAUcIAAAQEQgAABAVw6BBKmludF9pc19uZWegw6BCK2NvbXBhcmVfaW50oMIEFwQRgLAgwCBAQAD/BAKgw1GgwqJBBDMEMoCwBGbABF5KAQFIAQFUwARfSgEBSAEBVUAEHbAEaQQDwARhSgEBSAEBXkAEH7AEa8AEY0oBAUgBAVAEA0CxkCRCb29sQEAEEwgAABARCAAAEBAEN+eQBFegwgQ7BDeABBmg55AEaqDDQ6DCokEESwRKgLAEfsAEdksBAWEBAYjABHdLAQFhAQGJoMIEPQQ3gAQmQLGQJENoYXJAQLAEhgQIwAR+SwEBYQEBjEBAsQRJQECAsASJwASBSwEBYQEBfsAEgksBAWEBAY1AQLEETUBAgLAEjcAEhUsBAWEBAWzABIZLAQFhAQGOsZAkVW5pdEBAsASTwASLSwEBYQEBZQQGCAAAEBAEUMOkQECgwgRUBE6ABD2gsKJBkCExBFOwBJ/ABJdMAQGPAQGbwASYTAEBjwEBnEAEVrAEosAEmkwBAY8BAZcEAwQUsASkwAScTAEBjwEBkwQFBBawBKYEEwQGBBewBKfABJ9KAQFIAQFKwASgTQEBnQEBoMIEcARsgAROsQRsQECwBKwEBcAEpE4BAaEBAacEA7AErsAEpkkBATwBAT4EAwQFsASwwASoSAEBIgEBJAQFgEGwBLLABKpHAQDuAQDuwASrTwEBqAEBqaDDkLAEuEAjcmdisKBAoECgQECQRKAlY29sb3IjcmdiQbAEwsApY29sb3IubWJ0Q1dXwAQCQ1cAW6DDkLAEyUAqcmdiX29mX2ludLCgQECQRKAlY29sb3IqcmdiX29mX2ludEGwBNHABA9FAF0AXcAEEEUAXQEAn6DDkLAE10AkcmdiYbCgQKBAoECgQ0CQRKAlY29sb3IkcmdiYUGwBOLABCBHAQChAQChwAQhRwEAoQEA86DDkLAE6JChBOoxQ2FudmFzX2NvbnRleHRfMmQqY2xlYXJfcmVjdLCgRKBDoEOgQ6BDQECgJmNhbnZhcypjbGVhcl9yZWN0QbAE9sAqY2FudmFzLm1idENcXMAEAkNcAQCZoMOQsAT9kAQVKmJlZ2luX3BhdGiwoERAQKAmY2FudmFzKmJlZ2luX3BhdGhBsAUBBcAED0UBAJsBAJvABBBFAQCbAQDfoMOQsAUBC5AEIydtb3ZlX3RvsKBEoEOgQ0BAoCZjYW52YXMnbW92ZV90b0GwBQEVwAQfRwEA4QEA4cAEIEcBAOEBATegw5CwBQEbkAQzJ2xpbmVfdG+woESgQ6BDQECgJmNhbnZhcydsaW5lX3RvQbAFASXABC9JAQE5AQE5wAQwSQEBOQEBj6DDkLAFASuQBEMjYXJjsKBEoEOgQ6BDoEOgQ0BAoCZjYW52YXMjYXJjQbAFATjABEJLAQGRAQGRwARDSwEBkQECGKDDkLAFAT6QBFYkcmVjdLCgRKBDoEOgQ6BDQECgJmNhbnZhcyRyZWN0QbAFAUrABFRNAQIaAQIawARVTQECGgECi6DDkLAFAVCQBGgkY2xpcLCgREBAoCZjYW52YXMkY2xpcEGwBQFYwARiTwECjQECjcAEY08BAo0BAsWgw5CwBQFekAR2LnNldF9maWxsX2NvbG9ysKBEoERAQKAmY2FudmFzLnNldF9maWxsX2NvbG9yQbAFAWfABHFRAQLHAQLHwARyUQECxwEDKKDDkLAFAW2QBIUkZmlsbLCgREBAoCZjYW52YXMkZmlsbEGwBQF1wAR/UwEDKgEDKsAEgFMBAyoBA2Kgw5CwBQF7kASTKWZpbGxfcmVjdLCgRKBDoEOgQ6BDQECgJmNhbnZhcylmaWxsX3JlY3RBsAUBh8AEkVUBA2QBA2TABJJVAQNkAQPfoMOQsAUBjZAEpSlmaWxsX3RleHSwoESgRKBDoENAQKAmY2FudmFzKWZpbGxfdGV4dEGwBQGYwASiVwED4QED4cAEo1cBA+EBBE6gw5CwBQGekAS2MHNldF9zdHJva2VfY29sb3KwoESgREBAoCZjYW52YXMwc2V0X3N0cm9rZV9jb2xvckGwBQGnwASxWQEEUAEEUMAEslkBBFABBLWgw5CwBQGtkATFLnNldF9saW5lX3dpZHRosKBEoENAQKAmY2FudmFzLnNldF9saW5lX3dpZHRoQbAFAbbABMBbAQS3AQS3wATBWwEEtwEFE6DDkLAFAbyQBNQxX3NldF9mb250X2J5X3RleHSwoESgREBAoCZjYW52YXMoc2V0X2ZvbnRBsAUBxcAEz10BBRUBBRXABNBdAQUVAQVxoJLQkLAFAcyQBOQoc2V0X2ZvbnSgoLCiRCRzZWxmsQTrQECwBQHVwATfXwEFcwEFhcAE4F8BBXMBBYmgsKJFJGZvbnSxBQGoQECwBQHdwATnXwEFcwEFnsAE6F8BBXMBBaJA55CwBQHikAT6BCagwqJEBBQEE4CwBQHnwATxYAEFrgEFsMAE8mABBa4BBbSg55AFAcCgwqJFBBUEFICwBQHwwAT6YAEFrgEF1sAE+2ABBa4BBdpAQLEFAbRAQICwBQH0wAT+YAEFrgEFx8AE/2ABBa4BBdtAQAUBZ4CwBQH3BBDABQEBYAEFrgEF3IBBsAUB+cAFAQNfAQVzAQVzwAUBBGEBBd0BBd6gw5CwBQH/kAUBFyZzdHJva2WwoERAQKAmY2FudmFzJnN0cm9rZUGwBQIHwAUBEWMBBeABBeDABQESYwEF4AEGHKDDkLAFAg2QBQElK3N0cm9rZV9yZWN0sKBEoEOgQ6BDoENAQKAmY2FudmFzK3N0cm9rZV9yZWN0QbAFAhnABQEjZQEGHgEGHsAFASRlAQYeAQadoMOQsAUCH5AFATclc2NhbGWwoESgQ6BDQECgJmNhbnZhcyVzY2FsZUGwBQIpwAUBM2cBBp8BBp/ABQE0ZwEGnwEG8aDDkLAFAi+QBQFHKXRyYW5zbGF0ZbCgRKBDoENAQKAmY2FudmFzKXRyYW5zbGF0ZUGwBQI5wAUBQ2kBBvMBBvPABQFEaQEG8wEHTaDDkLAFAj+QBQFXJHNhdmWwoERAQKAmY2FudmFzJHNhdmVBsAUCR8AFAVFrAQdPAQdPwAUBUmsBB08BB4egw5CwBQJNkAUBZSdyZXN0b3JlsKBEQECgJmNhbnZhcydyZXN0b3JlQbAFAlXABQFfbQEHiQEHicAFAWBtAQeJAQfHQLCgBQFv8AUBcUBAkECAsAUCXMAFAWZBQEnABQFnQUBaIKAFAiDwBQIiQECQQICwBQJjwAUCW0FAScAFAlxBQFQEB6AsQ2FudmFzX2NvbG9y8KEFAmkEA0BAkECAsAUCa8AFAalBQEnABQGqQUBVBA+QoAUBhggAAFQAoAUBA/CwBQJzkAUBiwUBBkCwoLEFAY5AQEAFAehAQbAFAnjABQGCUwEDKgEDM8AFAYNTAQMqAQM3QYCgBG3wsAUCfZAFAZUEcECwoLEFAZhAQKCxkCdGbG9hdDY0QECgsQQEQECgsQQGQECgsQQIQEBABQH8QEGwBQKMwAUBlmUBBh4BBifABQGXZQEGHgEGMkGAoARv8LAFApGQBQGpBHJAsKCxBQGsQECgsQQUQECgsQQWQEBABQIKQEGwBQKawAUBpGcBBp8BBqjABQGlZwEGnwEGrUGAoASd8LAFAp+QBQG3BKBAsKCxBQG6QEBABQIUQEGwBQKkwAUBrmMBBeABBenABQGvYwEF4AEF70GAoARn8LAFAqmQBQHBBGpAsKCxBQHEQEBABQIeQEGwBQKuwAUBuGsBB08BB1jABQG5awEHTwEHXEGAoAUBhfCwBQKzkAUBywUBiECwoLEFAc5AQKCxBDZAQKCxBDhAQKCxBDpAQKCxBDxAQKCxBD5AQEAFAjJAQbAFAsLABQHMSwEBkQEBmsAFAc1LAQGRAQGdQYCgBHfwsAUCx5AFAd8EekCwoLEFAeJAQEAFAjxAQbAFAszABQHWbQEHiQEHksAFAddtAQeJAQeZQYCgBQGz8LAFAtGQBQHpBQG2QLCgsQUB7EBAoLEEVEBAoLEEVkBAQAUCSkBBsAUC2sAFAeRJAQE5AQFCwAUB5UkBATkBAUlBgKAFAdHwsAUC35AFAfcFAdRAsKCxBQH6QECgsQRiQECgsQRkQEBABQJYQEGwBQLowAUB8kcBAOEBAOrABQHzRwEA4QEA8UGAoAS78LAFAu2QBQIFBL5AsKCxBQIIQECgsQRwQECgsQRyQEBABQJmQEGwBQL2wAUCAGkBBvMBBvzABQIBaQEG8wEHBUGAoAUCDvCwBQL7kAUCEwUCEUCwoLEFAhZAQKCxBH5AQKCxBIBAQKCxBIJAQKCxBIRAQEAFAnhAQbAFAwjABQISQ1xlwAUCE0Ncb0GAoAUBPvCwBQMNkAUCJQUBQUCwoLEFAihAQKCxBQLfQEBABQKEQEGwBQMUwAUCHl8BBXMBBXzABQIfXwEFcwEFhEGAoAUB2PCwBQMZkAUCMQUB20CwoLEFAjRAQKCxBJxAQKCxBJ5AQKCxBKBAQKCxBKJAQEAFApZAQbAFAybABQIwTQECGgECI8AFAjFNAQIaAQInQYCgBQIr8LAFAyuQBQJDBQIuQLCgsQUCRkBAQAUCoEBBsAUDMMAFAjpFAQCbAQCkwAUCO0UBAJsBAK5BgKAFAdTwsAUDNZAFAk0FAddAsKCxBQJQQECgsQTTQEBABQKsQEGwBQM8wAUCRlEBAscBAtDABQJHUQECxwEC3kGAoAUBsfCwBQNBkAUCWQUBtECwoLEFAlxAQKCxBQMIQECgsQTGQECgsQTIQEBABQK8QEGwBQNMwAUCVlcBA+EBA+rABQJXVwED4QED80GAoAUB/vCwBQNRkAUCaQUCAUCwoLEFAmxAQEAFAsZAQbAFA1bABQJgTwECjQEClsAFAmFPAQKNAQKaQYCgBQGc8AUBeUCwoLEFAnRAQKCxBQMgQEBABQLQQEGwBQNgwAUCal0BBRUBBR7ABQJrXQEFFQEFL0GAoAUB5/CwBQNlkAUCfQUB6kCwoLEFAoBAQKCxBOhAQKCxBOpAQKCxBOxAQKCxBO5AQEAFAuJAQbAFA3LABQJ8VQEDZAEDbcAFAn1VAQNkAQN2QYCgBQHW8LAFA3eQBQKPBQHZQLCgsQUCkkBAoLEFARVAQEAFAu5AQbAFA37ABQKIWQEEUAEEWcAFAolZAQRQAQRpQYCgBQHT8LAFA4OQBQKbBQHWQLCgsQUCnkBAoLEFAQZAQEAFAvpAQbAFA4rABQKUWwEEtwEEwMAFApVbAQS3AQTOQYAFA4w="),n=>n.charCodeAt(0)),sources:[{filename:"canvas.mbt",content:`pub type Canvas_context_2d

pub func clear_rect(self: Canvas_context_2d, x: Float64, y: Float64, width: Float64, height: Float64) = "canvas" "clear_rect"

pub func begin_path(self: Canvas_context_2d) = "canvas" "begin_path"

pub func move_to(self: Canvas_context_2d, x: Float64, y: Float64) = "canvas" "move_to"

pub func line_to(self: Canvas_context_2d, x: Float64, y: Float64) = "canvas" "line_to"

pub func arc(self: Canvas_context_2d, x: Float64, y: Float64, radius: Float64, startAngle: Float64, endAngle: Float64) = "canvas" "arc"

pub func rect(self: Canvas_context_2d, x: Float64, y: Float64, width: Float64, height: Float64) = "canvas" "rect"

pub func clip(self: Canvas_context_2d) = "canvas" "clip"

pub func set_fill_color(self: Canvas_context_2d, color: Canvas_color) = "canvas" "set_fill_color"

pub func fill(self: Canvas_context_2d) = "canvas" "fill"

pub func fill_rect(self: Canvas_context_2d, x: Float64, y: Float64, width: Float64, height: Float64) = "canvas" "fill_rect"

pub func fill_text(self: Canvas_context_2d, text: Canvas_text, x: Float64, y: Float64) = "canvas" "fill_text"

pub func set_stroke_color(self: Canvas_context_2d, color: Canvas_color) = "canvas" "set_stroke_color"

pub func set_line_width(self: Canvas_context_2d, width: Float64) = "canvas" "set_line_width"

pub func _set_font_by_text(self: Canvas_context_2d, font: Canvas_text) = "canvas" "set_font"

pub func set_font(self: Canvas_context_2d, font: String) {
  self._set_font_by_text(text_of_string(font))
}

pub func stroke(self: Canvas_context_2d) = "canvas" "stroke"

pub func stroke_rect(self: Canvas_context_2d, x: Float64, y: Float64, width: Float64, height: Float64) = "canvas" "stroke_rect"

pub func scale(self: Canvas_context_2d, x: Float64, y: Float64) = "canvas" "scale"

pub func translate(self: Canvas_context_2d, x: Float64, y: Float64) = "canvas" "translate"

pub func save(self: Canvas_context_2d) = "canvas" "save"

pub func restore(self: Canvas_context_2d) = "canvas" "restore"
`},{filename:"color.mbt",content:`pub type Canvas_color

pub func rgb(r: Int, g: Int, b: Int) -> Canvas_color = "color" "rgb"

pub func rgb_of_int(x: Int) -> Canvas_color = "color" "rgb_of_int"

pub func rgba(r: Int, g: Int, b: Int, a: Float64) -> Canvas_color = "color" "rgba"
`},{filename:"text.mbt",content:`pub type Canvas_text

func text_empty() -> Canvas_text = "canvas" "text_empty"
func text_char(x: Char) -> Canvas_text = "canvas" "text_char"
func text_concat(left: Canvas_text, right: Canvas_text) -> Canvas_text = "canvas" "text_concat"

pub func text_of_string(x: String) -> Canvas_text {
  var text = text_empty()
  var i = 0
  while i < x.length() {
    text = text_concat(text, text_char(x[i]))
    i = i + 1
  }
  text
}
`}]},{name:"math",mi:Uint8Array.from(atob("TUlOVEYyMzA1MjCElaa+AAAA+AAAADgAAADdAAAA1tDQoCNjb3PAsKCxkCdGbG9hdDY0QEBAsQQDQEBAQbAkbWF0aMAobWF0aC5tYnRLAQEGAQEPwAQCSwEBBgEBEoCgJWZsb29ywLCgsQQOQEBAsZAjSW50QEBAQbAEDsAEDUUAXABlwAQORQBcAGqAoCZyYW5kb23AsECxBBlAQEBBsAQWwAQVQ2x1wAQWQ2x7gKAjc2luwLCgsQQiQEBAsQQjQEBAQbAEIMAEH0kBANIBANvABCBJAQDSAQDegKAsZmxvYXRfb2ZfaW50wLCgsQQdQEBAsQQtQEBAQbAEKsAEKUcBAJABAJnABCpHAQCQAQClgICAgAQs"),n=>n.charCodeAt(0)),tast:Uint8Array.from(atob("TUNPUkUyMzA4MTeElaa+AAABHwAAAEgAAAD+AAAA78Cgw5CwJG1hdGhAJnJhbmRvbbBAkEOgJG1hdGgmcmFuZG9tQbAECMAobWF0aC5tYnRDbGzABAJDbABaoMOQsAQPQCVmbG9vcrCgQ0CQQKAkbWF0aCVmbG9vckGwBBfABA9FAFwAXMAEEEUAXAEAjqDDkLAEHUAsZmxvYXRfb2ZfaW50sKBAQJBDoCRtYXRoLGZsb2F0X29mX2ludEGwBCXABB1HAQCQAQCQwAQeRwEAkAEA0KDDkLAEK0Ajc2lusKBDQJBDoCRtYXRoI3NpbkGwBDPABCtJAQDSAQDSwAQsSQEA0gEBBKDDkLAEOUAjY29zsKBDQJBDoCRtYXRoI2Nvc0GwBEHABDlLAQEGAQEGwAQ6SwEBBgEBOECAgARD"),n=>n.charCodeAt(0)),sources:[{filename:"math.mbt",content:`// pub let pi: Float64 = 3.141592653589793

pub func random() -> Float64 = "math" "random"

pub func floor(x: Float64) -> Int = "math" "floor"

pub func float_of_int(x: Int) -> Float64 = "math" "float_of_int"

pub func sin(x: Float64) -> Float64 = "math" "sin"

pub func cos(x: Float64) -> Float64 = "math" "cos"
`}]}];E();D();x();R();S();var Se=we("vscode");E();D();x();R();S();var kr=qr(we("vscode"));function Tg(n){n.writeFile(kr.default.Uri.parse("memfs:/app/config.mbt"),new TextEncoder().encode(`let stage_width = 10
let stage_height = 20

let initial_sprite_x = 3
let initial_sprite_y = -4

let bg_color : Int = 0x021c2d
let bg_even_color : Int = bg_color
let bg_odd_color : Int = 0x00263f

let brick_colors : Array[Int] = [
  0xffb900,
  0x2753f1,
  0xf7ff00,
  0xff6728,
  0x11c5bf,
  0xae81ff,
  0xe94659,
]

func speed_formula(level: Int) -> Float64 {
  return 1.0 + (level.to_float() * 0.5)
}

func score_formula(num_rows : Int) -> Int {
  match num_rows {
    0 => 0
    1 => 100
    2 => 300
    3 => 700
    4 => 1500
    _ => 0
  }
}

func upgrade_score_formula(level : Int) -> Int {
  if level == 1 {
    100
  } else if level == 2 {
    1000
  } else {
    upgrade_score_formula(level - 1) * 2
  }
}

`),{create:!0,overwrite:!0}),n.writeFile(kr.default.Uri.parse("memfs:/app/draw.mbt"),new TextEncoder().encode(`//#region draw
func draw_bg(ctx: @canvas.Canvas_context_2d) {
  // draw background
  var x = 0
  while (x < Stage::width()) {
    ctx.set_fill_color(@canvas.rgb_of_int(if (x % 2) == 0 {bg_even_color} else {bg_odd_color}))
    ctx.fill_rect(x.to_float(), 0.0, 1.0, Stage::height().to_float())
    x = x + 1
  }
  ctx.set_stroke_color(@canvas.rgb_of_int(bg_even_color))
  ctx.set_line_width(0.1)
  ctx.stroke_rect(0.0, 0.0, 10.0, 20.0)
}

func draw_brick(ctx: @canvas.Canvas_context_2d, x: Float64, y: Float64, color: Int) {
  if (color == 0) {
    abort("unreachable")
  }
  ctx.set_fill_color(@canvas.rgb_of_int(brick_colors[(color - 1) % brick_colors.length()]))
  ctx.fill_rect(x, y, 1.to_float(), 1.to_float())
  ctx.set_stroke_color(@canvas.rgb_of_int(bg_even_color))
  ctx.set_line_width(0.1)
  ctx.stroke_rect(x, y, 1.to_float(), 1.to_float())
}

func draw_stage(ctx: @canvas.Canvas_context_2d, stage: Stage) {
  var iy = 0
  while iy < Stage::height() {
    var ix = 0
    while ix < Stage::width() {
      let c = stage[(ix, iy)]
      if (c > 0) {
        draw_brick(ctx, ix.to_float(), iy.to_float(), c)
      }
      ix = ix + 1
    }
    iy = iy + 1
  }
}

func draw_shape(ctx: @canvas.Canvas_context_2d, shape: Shape, x: Float64, y: Float64) {
  let shape_data = shape.data()
  var iy = 0
  while iy < Shape::side_length() {
    var ix = 0
    while ix < Shape::side_length() {
      let c = shape_data[iy][ix]
      if (c > 0) {
        draw_brick(ctx, x + ix.to_float(), y + iy.to_float(), c)
      }
      ix = ix + 1
    }
    iy = iy + 1
  }
}

func draw_sprite(ctx: @canvas.Canvas_context_2d, sprite: Sprite) {
  draw_shape(ctx, sprite.shape, sprite.x.to_float(), sprite.y.to_float())
}

func draw_peek_shape(ctx: @canvas.Canvas_context_2d, shape: Shape) {
  ctx.set_font("1px Bold")
  ctx.set_fill_color(@canvas.rgb(0, 0, 255))
  ctx.fill_text(@canvas.text_of_string("Next"), 11.0, 1.0)
  ctx.set_line_width(0.1)
  ctx.stroke_rect(12.0, 2.1, 5.0, 5.0)
  draw_shape(ctx, shape, 12.5, 2.5)
}

func draw_level(level: Int, ctx: @canvas.Canvas_context_2d) {
  ctx.set_font("1px Bold")
  ctx.set_fill_color(@canvas.rgb(0, 0, 255))
  ctx.fill_text(@canvas.text_of_string("Level"), 11.0, 10.0)
  ctx.set_font("1px monospace")
  ctx.fill_text(@canvas.text_of_string(level.to_string()), 12.0, 12.0)
}

func draw_score(score: Int, ctx: @canvas.Canvas_context_2d) {
  ctx.set_font("1px Bold")
  ctx.set_fill_color(@canvas.rgb(0, 0, 255))
  ctx.fill_text(@canvas.text_of_string("Score"), 11.0, 15.0)
  ctx.set_font("1px monospace")
  ctx.fill_text(@canvas.text_of_string(score.to_string()), 12.0, 17.0)
}

func draw_game(game: Game,  ctx: @canvas.Canvas_context_2d) {
  ctx.save()
  let s = 1.0 / Stage::height().to_float()
  ctx.scale(s, s)

  ctx.translate(0.1, 0.0)
  draw_bg(ctx)
  draw_stage(ctx, game.stage)
  draw_sprite(ctx, game.sprite)

  draw_peek_shape(ctx, game.next_shape)
  draw_level(game.level, ctx)
  draw_score(game.score, ctx)

  ctx.restore()
}

let game: Game = Game::new()
//#endregion
`),{create:!0,overwrite:!0}),n.writeFile(kr.default.Uri.parse("memfs:/app/main.mbt"),new TextEncoder().encode(`pub func draw(ctx : @canvas.Canvas_context_2d, _tick : Float64) -> Float64 {
  game.handle_action(MoveDown)
  draw_game(game, ctx)
  let speed = speed_formula(game.level)
  return 1000.0 / speed
}

pub func event(ctx : @canvas.Canvas_context_2d, code: Int) {
  match code {
    // Space
    0 =>
      match game.state {
        GameOver =>
          game.continue_()
        Running =>
          game.pause()
        Pause =>
          game.resume()
      }
    // ArrowUp
    1 => game.handle_action(NextShape)
    // ArrowRight
    2 => game.handle_action(MoveRight)
    // ArrowDown
    3 => game.handle_action(MoveDown)
    // ArrowLeft
    4 => game.handle_action(MoveLeft)
    _ => ()
  }
  draw_game(game, ctx)
}
`),{create:!0,overwrite:!0}),n.writeFile(kr.default.Uri.parse("memfs:/app/misc.mbt"),new TextEncoder().encode(`func to_float(self: Int) -> Float64 {
  @math.float_of_int(self)
}
`),{create:!0,overwrite:!0}),n.writeFile(kr.default.Uri.parse("memfs:/app/shape.mbt"),new TextEncoder().encode(`//#region ShapeKind
enum ShapeKind { L; J; I; O; T; S; Z }

func index(self: ShapeKind) -> Int {
  match self {
    L => 0
    J => 1
    I => 2
    O => 3
    T => 4
    S => 5
    Z => 6
  }
}

func ShapeKind::of_index(index: Int) -> ShapeKind {
  match index {
    0 => L
    1 => J
    2 => I
    3 => O
    4 => T
    5 => S
    6 => Z
    _ => abort("unreachable")
  }
}

func ShapeKind::random() -> ShapeKind {
  ShapeKind::of_index(@math.floor(@math.random() * 7.to_float()))
}
//#endregion

//#region Direction
enum Direction { Up; Right; Down; Left }

func index(self: Direction) -> Int {
  match self {
    Up => 0
    Right => 1
    Down => 2
    Left => 3
  }
}

func Direction::of_index(index: Int) -> Direction {
  match index {
    0 => Up
    1 => Right
    2 => Down
    3 => Left
    _ => abort("unreachable")
  }
}

func Direction::random() -> Direction {
  Direction::of_index(@math.floor(@math.random() * 4.to_float()))
}

func cycle_next(self: Direction) -> Direction {
  Direction::of_index((self.index() + 1) % 4)
}
//#endregion

//#region Shape
struct Shape {
  kind: ShapeKind
  dir: Direction
  color: Int // 1..7
}

func Shape::side_length() -> Int {
  return 4
}

func Shape::random() -> Shape {
  let kind = ShapeKind::random()
  return {
    kind: kind,
    dir: Direction::random(),
    color: 1 + kind.index(),
  }
}

func cycle_next(self: Shape) -> Shape {
  return {
    ..self,
    dir: self.dir.cycle_next(),
  }
}

func data(self: Shape) -> Array[Array[Int]] {
  let c = self.color
  match (self.kind, self.dir) {
    (L, Up) =>
      [
        [0, c, 0, 0],
        [0, c, 0, 0],
        [0, c, c, 0],
        [0, 0, 0, 0],
      ]
    (L, Right) =>
      [
        [0, 0, 0, 0],
        [c, c, c, 0],
        [c, 0, 0, 0],
        [0, 0, 0, 0],
      ]
    (L, Down) =>
      [
        [0, c, c, 0],
        [0, 0, c, 0],
        [0, 0, c, 0],
        [0, 0, 0, 0],
      ]
    (L, Left) =>
      [
        [0, 0, 0, 0],
        [0, 0, c, 0],
        [c, c, c, 0],
        [0, 0, 0, 0],
      ]
    (J, Up) =>
      [
        [0, 0, c, 0],
        [0, 0, c, 0],
        [0, c, c, 0],
        [0, 0, 0, 0],
      ]
    (J, Right) =>
      [
        [0, c, 0, 0],
        [0, c, c, c],
        [0, 0, 0, 0],
        [0, 0, 0, 0],
      ]
    (J, Down) =>
      [
        [0, c, c, 0],
        [0, c, 0, 0],
        [0, c, 0, 0],
        [0, 0, 0, 0],
      ]
    (J, Left) =>
      [
        [c, c, c, 0],
        [0, 0, c, 0],
        [0, 0, 0, 0],
        [0, 0, 0, 0],
      ]
    (I, Up) =>
      [
        [0, 0, 0, 0],
        [c, c, c, c],
        [0, 0, 0, 0],
        [0, 0, 0, 0],
      ]
    (I, Right) =>
      [
        [0, 0, c, 0],
        [0, 0, c, 0],
        [0, 0, c, 0],
        [0, 0, c, 0],
      ]
    (I, Down) =>
      [
        [0, 0, 0, 0],
        [c, c, c, c],
        [0, 0, 0, 0],
        [0, 0, 0, 0],
      ]
    (I, Left) =>
      [
        [0, 0, c, 0],
        [0, 0, c, 0],
        [0, 0, c, 0],
        [0, 0, c, 0],
      ]
    (O, Up) =>
      [
        [0, 0, 0, 0],
        [0, c, c, 0],
        [0, c, c, 0],
        [0, 0, 0, 0],
      ]
    (O, Right) =>
      [
        [0, 0, 0, 0],
        [0, c, c, 0],
        [0, c, c, 0],
        [0, 0, 0, 0],
      ]
    (O, Down) =>
      [
        [0, 0, 0, 0],
        [0, c, c, 0],
        [0, c, c, 0],
        [0, 0, 0, 0],
      ]
    (O, Left) =>
      [
        [0, 0, 0, 0],
        [0, c, c, 0],
        [0, c, c, 0],
        [0, 0, 0, 0],
      ]
    (T, Up) =>
      [
        [0, 0, 0, 0],
        [0, c, 0, 0],
        [c, c, c, 0],
        [0, 0, 0, 0],
      ]
    (T, Right) =>
      [
        [0, 0, 0, 0],
        [0, c, 0, 0],
        [c, c, 0, 0],
        [0, c, 0, 0],
      ]
    (T, Down) =>
      [
        [0, 0, 0, 0],
        [0, 0, 0, 0],
        [c, c, c, 0],
        [0, c, 0, 0],
      ]
    (T, Left) =>
      [
        [0, 0, 0, 0],
        [0, c, 0, 0],
        [0, c, c, 0],
        [0, c, 0, 0],
      ]
    (S, Up) =>
      [
        [0, 0, 0, 0],
        [0, c, c, 0],
        [c, c, 0, 0],
        [0, 0, 0, 0],
      ]
    (S, Right) =>
      [
        [c, 0, 0, 0],
        [c, c, 0, 0],
        [0, c, 0, 0],
        [0, 0, 0, 0],
      ]
    (S, Down) =>
      [
        [0, 0, 0, 0],
        [0, c, c, 0],
        [c, c, 0, 0],
        [0, 0, 0, 0],
      ]
    (S, Left) =>
      [
        [c, 0, 0, 0],
        [c, c, 0, 0],
        [0, c, 0, 0],
        [0, 0, 0, 0],
      ]
    (Z, Up) =>
      [
        [0, 0, 0, 0],
        [c, c, 0, 0],
        [0, c, c, 0],
        [0, 0, 0, 0],
      ]
    (Z, Right) =>
      [
        [0, 0, c, 0],
        [0, c, c, 0],
        [0, c, 0, 0],
        [0, 0, 0, 0],
      ]
    (Z, Down) =>
      [
        [0, 0, 0, 0],
        [c, c, 0, 0],
        [0, c, c, 0],
        [0, 0, 0, 0],
      ]
    (Z, Left) =>
      [
        [0, 0, c, 0],
        [0, c, c, 0],
        [0, c, 0, 0],
        [0, 0, 0, 0],
      ]
  }
}
//#endregion Shape
`),{create:!0,overwrite:!0}),n.writeFile(kr.default.Uri.parse("memfs:/app/tetris.mbt"),new TextEncoder().encode(`// #region Stage
struct Stage {
  grid : Array[Array[Int]]
}

func Stage::width() -> Int {
  return stage_width
}

func Stage::height() -> Int {
  return stage_height
}

func Stage::new() -> Stage {
  let grid = Array::make(stage_height, [])
  var i = 0
  while i < stage_height {
    grid[i] = Array::make(stage_width, 0)
    i = i + 1
  }
  return { grid, }
}

func op_get(self : Stage, coord : (Int, Int)) -> Int {
  let (x, y) = coord
  if x < 0 || x >= Stage::width() {
    return 1
  }
  if y < 0 {
    return 0
  }
  if y >= Stage::height() {
    return 1
  }
  return self.grid[y][x]
}

func op_set(self : Stage, coord : (Int, Int), color : Int) {
  let (x, y) = coord
  if x >= 0 && x < Stage::width() && y >= 0 && y < Stage::height() {
    self.grid[y][x] = color
  }
}

func is_full_row(row: Array[Int]) -> Bool {
  var x = 0
  while (x < Stage::width()) {
    if (row[x] == 0) {
      return false
    }
    x = x + 1
  }
  return true
}

func eliminate_row(self: Stage, row: Int) {
  var y = row
  while y >= 0 {
    let row = self.grid[y]
    var x = 0
    while x < Stage::width() {
      row[x] = self[(x, y - 1)]
      x = x + 1
    }
    y = y - 1
  }
}

func eliminate_full_rows(self: Stage) -> Int {
  var num_eliminiated = 0
  var y = 0
  while y < Stage::height() {
    let row = self.grid[y]
    if (is_full_row(row)) {
      self.eliminate_row(y)
      num_eliminiated = num_eliminiated + 1
    }
    y = y + 1
  }
  return num_eliminiated
}

func check_collision(stage : Stage, sprite : Sprite) -> Bool {
  let { shape, x, y } = sprite
  let shape_data = shape.data()
  var iy = 0
  while iy < Shape::side_length() {
    var ix = 0
    while ix < Shape::side_length() {
      let wc = stage[(x + ix, y + iy)]
      let sc = shape_data[iy][ix]
      if sc > 0 && wc > 0 {
        return true
      }
      ix = ix + 1
    }
    iy = iy + 1
  }
  return false
}

func check_game_over(sprite: Sprite) -> Bool {
  let shape_data = sprite.shape.data()
  var iy = 0
  while iy < Shape::side_length() {
    var ix = 0
    while ix < Shape::side_length() {
      let sc = shape_data[iy][ix]
      if sc > 0 && sprite.y + iy <= 0 {
        return true
      }
      ix = ix + 1
    }
    iy = iy + 1
  }
  return false
}

func glue(self : Stage, sprite : Sprite) {
  let { shape, x, y } = sprite
  let shape_data = shape.data()
  var iy = 0
  while iy < Shape::side_length() {
    var ix = 0
    while ix < Shape::side_length() {
      let color = shape_data[iy][ix]
      if color > 0 {
        self[(x + ix, y + iy)] = color
      }
      ix = ix + 1
    }
    iy = iy + 1
  }
}
// #endregion Stage

struct Sprite {
  shape : Shape
  x : Int
  y : Int
}

func Sprite::new(shape : Shape) -> Sprite {
  return { shape, x: initial_sprite_x, y: initial_sprite_y }
}

func change_shape(self : Sprite) -> Sprite {
  return {..self, shape: self.shape.cycle_next() }
}

func move_left(self : Sprite) -> Sprite {
  return {..self, x: self.x - 1 }
}

func move_right(self : Sprite) -> Sprite {
  return {..self, x: self.x + 1 }
}

func move_down(self : Sprite) -> Sprite {
  return {..self, y: self.y + 1 }
}

enum GameState {
  Running
  Pause
  GameOver
}

struct Game {
  mut state : GameState
  mut stage : Stage
  mut sprite : Sprite
  mut next_shape : Shape
  mut level : Int
  mut score : Int
}

enum Action {
  NextShape
  MoveLeft
  MoveRight
  MoveDown
}

func Game::new() -> Game {
  return {
    state: Running,
    stage: Stage::new(),
    sprite: Sprite::new(Shape::random()),
    next_shape: Shape::random(),
    level: 1,
    score: 0,
  }
}

func pause(self: Game) {
  match self.state {
    Running => {
      self.state = Pause
    }
    _ => ()
  }
}

func resume(self: Game) {
  match self.state {
    Pause => {
      self.state = Running
    }
    _ => ()
  }
}

func continue_(self: Game) {
  match self.state {
    GameOver => {
      self.stage = Stage::new()
      self.state = Running
    }
    _ => ()
  }
}


func handle_action(self : Game, action : Action) {
  match self.state {
    GameOver => ()
    Pause => ()
    Running =>
      match action {
        NextShape => {
          let newSprite = self.sprite.change_shape()
          if not(check_collision(self.stage, newSprite)) {
            self.sprite = newSprite
          }
        }
        MoveLeft => {
          let newSprite = self.sprite.move_left()
          if not(check_collision(self.stage, newSprite)) {
            self.sprite = newSprite
          }
        }
        MoveRight => {
          let newSprite = self.sprite.move_right()
          if not(check_collision(self.stage, newSprite)) {
            self.sprite = newSprite
          }
        }
        MoveDown => {
          let newSprite = self.sprite.move_down()
          if not(check_collision(self.stage, newSprite)) {
            self.sprite = newSprite
          } else {
            if check_game_over(self.sprite) {
              self.state = GameOver
            }
            self.stage.glue(self.sprite)
            let num_eliminated_rows = self.stage.eliminate_full_rows()
            self.score = self.score + score_formula(num_eliminated_rows)
            if (self.score >= upgrade_score_formula(self.level)) {
              self.level = self.level + 1
            }
            self.sprite = Sprite::new(self.next_shape)
            self.next_shape = Shape::random()
          }
        }
      }
  }
}

`),{create:!0,overwrite:!0})}var Vi=class{constructor(e,t){this.uri=e;vt(this,"type");vt(this,"ctime");vt(this,"mtime");vt(this,"size");vt(this,"name");vt(this,"data");this.type=Se.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=t}},Br=class{constructor(e,t){this.uri=e;vt(this,"type");vt(this,"ctime");vt(this,"mtime");vt(this,"size");vt(this,"name");vt(this,"entries");this.type=Se.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=t,this.entries=new Map}},h_=new TextEncoder,Zi=class{constructor(){vt(this,"disposable");vt(this,"root",new Br(Se.Uri.parse("memfs:/"),""));vt(this,"_emitter",new Se.EventEmitter);vt(this,"_bufferedEvents",[]);vt(this,"_fireSoonHandle");vt(this,"onDidChangeFile",this._emitter.event);vt(this,"_textDecoder",new TextDecoder);this.disposable=Se.Disposable.from(Se.workspace.registerFileSystemProvider(Zi.scheme,this,{isCaseSensitive:!0}),Se.workspace.registerFileSearchProvider(Zi.scheme,this),Se.workspace.registerTextSearchProvider(Zi.scheme,this))}dispose(){this.disposable?.dispose()}initFolder(){console.log("create dir: sample-folder"),this.createDirectory(Se.Uri.parse("memfs:/app/")),Tg(this),this.writeFile(Se.Uri.parse("memfs:/app/moon.pkg"),h_.encode("package app"),{create:!0,overwrite:!0})}stat(e){return this._lookup(e,!1)}readDirectory(e){let t=this._lookupAsDirectory(e,!1),r=[];for(let[i,s]of t.entries)r.push([i,s.type]);return r}readFile(e){let t=this._lookupAsFile(e,!1).data;if(t)return t;throw Se.FileSystemError.FileNotFound()}writeFile(e,t,r){let i=this._basename(e.path),s=this._lookupParentDirectory(e),o=s.entries.get(i);if(o instanceof Br)throw Se.FileSystemError.FileIsADirectory(e);if(!o&&!r.create)throw Se.FileSystemError.FileNotFound(e);if(o&&r.create&&!r.overwrite)throw Se.FileSystemError.FileExists(e);o||(o=new Vi(e,i),s.entries.set(i,o),this._fireSoon({type:Se.FileChangeType.Created,uri:e})),o.mtime=Date.now(),o.size=t.byteLength,o.data=t,this._fireSoon({type:Se.FileChangeType.Changed,uri:e})}rename(e,t,r){if(!r.overwrite&&this._lookup(t,!0))throw Se.FileSystemError.FileExists(t);let i=this._lookup(e,!1),s=this._lookupParentDirectory(e),o=this._lookupParentDirectory(t),u=this._basename(t.path);s.entries.delete(i.name),i.name=u,o.entries.set(u,i),this._fireSoon({type:Se.FileChangeType.Deleted,uri:e},{type:Se.FileChangeType.Created,uri:t})}delete(e){let t=e.with({path:this._dirname(e.path)}),r=this._basename(e.path),i=this._lookupAsDirectory(t,!1);if(!i.entries.has(r))throw Se.FileSystemError.FileNotFound(e);i.entries.delete(r),i.mtime=Date.now(),i.size-=1,this._fireSoon({type:Se.FileChangeType.Changed,uri:t},{uri:e,type:Se.FileChangeType.Deleted})}createDirectory(e){let t=this._basename(e.path),r=e.with({path:this._dirname(e.path)}),i=this._lookupAsDirectory(r,!1),s=new Br(e,t);i.entries.set(s.name,s),i.mtime=Date.now(),i.size+=1,this._fireSoon({type:Se.FileChangeType.Changed,uri:r},{type:Se.FileChangeType.Created,uri:e})}_lookup(e,t){let r=e.path.split("/"),i=this.root;for(let s of r){if(!s)continue;let o;if(i instanceof Br&&(o=i.entries.get(s)),!o){if(t)return;throw Se.FileSystemError.FileNotFound(e)}i=o}return i}_lookupAsDirectory(e,t){let r=this._lookup(e,t);if(r instanceof Br)return r;throw Se.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){let r=this._lookup(e,t);if(r instanceof Vi)return r;throw Se.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){let t=e.with({path:this._dirname(e.path)});return this._lookupAsDirectory(t,!1)}watch(e){return new Se.Disposable(()=>{})}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout(()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0},5)}_basename(e){return e=this._rtrim(e,"/"),e?e.substr(e.lastIndexOf("/")+1):""}_dirname(e){return e=this._rtrim(e,"/"),e?e.substr(0,e.lastIndexOf("/")):"/"}_rtrim(e,t){if(!e||!t)return e;let r=t.length,i=e.length;if(r===0||i===0)return e;let s=i,o=-1;for(;o=e.lastIndexOf(t,s-1),!(o===-1||o+r!==s);){if(o===0)return"";s=o}return e.substring(0,s)}_getFiles(){let e=new Set;return this._doGetFiles(this.root,e),e}_doGetFiles(e,t){e.entries.forEach(r=>{r instanceof Vi?t.add(r):this._doGetFiles(r,t)})}_convertSimple2RegExpPattern(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}provideFileSearchResults(e,t,r){return this._findFiles(e.pattern)}_findFiles(e){let t=this._getFiles(),r=[],i=e?new RegExp(this._convertSimple2RegExpPattern(e)):null;for(let s of t)(!i||i.exec(s.name))&&r.push(s.uri);return r}provideTextSearchResults(e,t,r,i){let s={limitHit:!1},o=this._findFiles(t.includes[0]);if(o)for(let u of o){let h=this._textDecoder.decode(this.readFile(u)).split(`
`);for(let C=0;C<h.length;C++){let T=h[C],A=T.indexOf(e.pattern);A!==-1&&r.report({uri:u,ranges:new Se.Range(new Se.Position(C,A),new Se.Position(C,A+e.pattern.length)),preview:{text:T,matches:new Se.Range(new Se.Position(0,A),new Se.Position(0,A+e.pattern.length))}})}}return s}},Es=Zi;vt(Es,"scheme","memfs");var Ol=new Es;E();D();x();R();S();E();D();x();R();S();E();D();x();R();S();E();D();x();R();S();E();D();x();R();S();E();D();x();R();S();var g_=typeof j=="object"&&j&&j.Object===Object&&j,kg=g_;var m_=typeof self=="object"&&self&&self.Object===Object&&self,y_=kg||m_||Function("return this")(),Ds=y_;var v_=Ds.Symbol,ci=v_;E();D();x();R();S();var Bg=Object.prototype,w_=Bg.hasOwnProperty,C_=Bg.toString,Xi=ci?ci.toStringTag:void 0;function A_(n){var e=w_.call(n,Xi),t=n[Xi];try{n[Xi]=void 0;var r=!0}catch{}var i=C_.call(n);return r&&(e?n[Xi]=t:delete n[Xi]),i}var Pg=A_;E();D();x();R();S();var __=Object.prototype,b_=__.toString;function E_(n){return b_.call(n)}var Fg=E_;var D_="[object Null]",x_="[object Undefined]",qg=ci?ci.toStringTag:void 0;function S_(n){return n==null?n===void 0?x_:D_:qg&&qg in Object(n)?Pg(n):Fg(n)}var Qg=S_;E();D();x();R();S();function R_(n){return n!=null&&typeof n=="object"}var Ig=R_;var T_="[object Symbol]";function k_(n){return typeof n=="symbol"||Ig(n)&&Qg(n)==T_}var Og=k_;E();D();x();R();S();E();D();x();R();S();E();D();x();R();S();var B_=/\s/;function P_(n){for(var e=n.length;e--&&B_.test(n.charAt(e)););return e}var Mg=P_;var F_=/^\s+/;function q_(n){return n&&n.slice(0,Mg(n)+1).replace(F_,"")}var Lg=q_;E();D();x();R();S();function Q_(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Pr=Q_;var Ng=0/0,I_=/^[-+]0x[0-9a-f]+$/i,O_=/^0b[01]+$/i,M_=/^0o[0-7]+$/i,L_=parseInt;function N_(n){if(typeof n=="number")return n;if(Og(n))return Ng;if(Pr(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Pr(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Lg(n);var t=O_.test(n);return t||M_.test(n)?L_(n.slice(2),t?2:8):I_.test(n)?Ng:+n}var Ml=N_;E();D();x();R();S();E();D();x();R();S();var U_=function(){return Ds.Date.now()},xs=U_;var j_="Expected a function",H_=Math.max,K_=Math.min;function W_(n,e,t){var r,i,s,o,u,p,h=0,C=!1,T=!1,A=!0;if(typeof n!="function")throw new TypeError(j_);e=Ml(e)||0,Pr(t)&&(C=!!t.leading,T="maxWait"in t,s=T?H_(Ml(t.maxWait)||0,e):s,A="trailing"in t?!!t.trailing:A);function B(de){var re=r,he=i;return r=i=void 0,h=de,o=n.apply(he,re),o}function _(de){return h=de,u=setTimeout(Y,e),C?B(de):o}function M(de){var re=de-p,he=de-h,be=e-re;return T?K_(be,s-he):be}function U(de){var re=de-p,he=de-h;return p===void 0||re>=e||re<0||T&&he>=s}function Y(){var de=xs();if(U(de))return le(de);u=setTimeout(Y,M(de))}function le(de){return u=void 0,A&&r?B(de):(r=i=void 0,o)}function ie(){u!==void 0&&clearTimeout(u),h=0,r=p=i=u=void 0}function ye(){return u===void 0?o:le(xs())}function te(){var de=xs(),re=U(de);if(r=arguments,i=this,p=de,re){if(u===void 0)return _(p);if(T)return clearTimeout(u),u=setTimeout(Y,e),B(p)}return u===void 0&&(u=setTimeout(Y,e)),o}return te.cancel=ie,te.flush=ye,te}var Ug=W_;E();D();x();R();S();var $_="Expected a function";function G_(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError($_);return Pr(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Ug(n,e,{leading:r,maxWait:e,trailing:i})}var Ll=G_;async function J_(n){await Ue.workspace.getConfiguration().update("workbench.colorTheme","Default Dark+",!0);let t=null,r=null,i=()=>{if(r==null){let A=Ue.window.createWebviewPanel("canvas","Preview",{viewColumn:Ue.ViewColumn.Two},{enableScripts:!0});A.webview.html=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Preview</title>
  <style>
    body { margin: 0; }
    html, body { height: 100%; }
    body { display: flex; flex-direction: column; }
    #canvas { display: block; object-fit: scale-down; flex: 1; overflow: hidden; }
    #msg { padding: 8px 0; height: 20px; min-height: 20px; line-height: 20px; font-size: 14px; }
  </style>
</head>
<body>
  <div id="msg"></div>
  <canvas id="canvas" width="800" height="800"></canvas>
  <script>
    const msgDiv = document.getElementById('msg');
    const canvas = document.getElementById('canvas');
    const ctxBitmap = canvas.getContext('bitmaprenderer');

    let lastWorker = null;
    const start = (wasm) => {
      if (lastWorker !== null) {
        try { lastWorker.terminate() } catch {}
        console.log('hot reloaded');
      }
      const workerCode = \`// worker
const init = async () => {
  let startTick = null;
  const wasm = await new Promise(resolve => {
    const listener = (event) => {
      self.removeEventListener('message', listener);
      resolve(event.data);
    };
    self.addEventListener('message', listener);
  });

  const canvas = new OffscreenCanvas(800, 800);
  const ctx = canvas.getContext('2d');
  ctx.scale(800, 800);

  self.addEventListener('message', (event) => {
    wasmObj.instance.exports["event"](ctx, event.data);
    self.postMessage({ bitmap: canvas.transferToImageBitmap() });
  });

  const wasmObj = await WebAssembly.instantiate(wasm, {
    spectest: {
      print_i32: (x) => { console.log("" + x) },
      print_f64: (x) => { console.log("" + x) },
      print_char: (x) => { if (String.fromCharCode(x) == "u") { debugger } console.log(String.fromCharCode(x)) },
    },
    math: {
      random: Math.random,
      floor: (f) => Math.floor(f),
      float_of_int: (n) => n,
      pi: Math.PI,
      sin: Math.sin,
      cos: Math.cos,
    },
    color: {
      rgb: (r, g, b) => \\\`rgb(\\\${r}, \\\${g}, \\\${b})\\\`,
      rgb_of_int: (x) => \\\`#\\\${x.toString(16).padStart(6, '0')}\\\`,
      rgba: (r, g, b, a) => \\\`rgb(\\\${r}, \\\${g}, \\\${b}, \\\${a})\\\`,
    },
    canvas: {
      clear_rect: (ctx, x, y, width, height) => ctx.clearRect(x, y, width, height),
      stroke_rect: (ctx, x, y, width, height) => ctx.strokeRect(x, y, width, height),
      stroke: (ctx) => ctx.stroke(),
      move_to: (ctx, x, y) => ctx.moveTo(x, y),
      line_to: (ctx, x, y) => ctx.lineTo(x, y),
      begin_path: (ctx) => ctx.beginPath(),
      arc: (ctx, x, y, radius, startAngle, endAngle) => ctx.arc(x, y, radius, startAngle, endAngle),
      rect: (ctx, x, y, width, height) => ctx.rect(x, y, width, height),
      clip: (ctx) => ctx.clip(),
      fill: (ctx) => ctx.fill(),
      fill_rect: (ctx, x, y, width, height) => {
        ctx.fillRect(x, y, width, height);
      },
      fill_text: (ctx, text, x, y) => {
        ctx.fillText(text, x, y)
      },
      set_stroke_color: (ctx, color) => {
        ctx.strokeStyle = color;
      },
      set_line_width: (ctx, width) => {
        ctx.lineWidth = width;
      },
      set_fill_color: (ctx, color) => {
        ctx.fillStyle = color;
      },
      set_font: (ctx, font) => {
        ctx.font = font;
      },
      stroke_rect: (ctx, x, y, width, height) => ctx.strokeRect(x, y, width, height),
      scale: (ctx, x, y) => ctx.scale(x, y),
      translate: (ctx, x, y) => ctx.translate(x, y),
      save: () => ctx.save(),
      restore: () => ctx.restore(),
      text_empty: () => "",
      text_char: (c) => String.fromCodePoint(c),
      text_concat: (a, b) => a + b
    }
  });
  wasmObj.instance.exports["_start"]();

  // Heartbeat
  setInterval(() => {
    self.postMessage({ ping: Date.now() });
  }, 500);

  const renderLoop = (tick) => {
    if (startTick === null) {
      startTick = tick;
    }
    if (wasmObj !== null) {
      try {
        const nextTick = wasmObj.instance.exports["draw"](ctx, tick - startTick);
        self.postMessage({ bitmap: canvas.transferToImageBitmap() });
        if (nextTick === -1) {
          return;
        }
        if (nextTick === 0) {
          requestAnimationFrame(renderLoop);
          return;
        }
        if (nextTick > 0) {
          setTimeout(() => {
            requestAnimationFrame(renderLoop);
          }, nextTick);
          return;
        }
      } catch {}
    }
  };
  requestAnimationFrame(renderLoop);
};
void init();
\`;
      const workerUrl = URL.createObjectURL(new Blob([workerCode]));
      const worker = new Worker(workerUrl);
      lastWorker = worker;
      worker.postMessage(wasm);
      let lastTick = Date.now();
      worker.addEventListener('message', (event) => {
        lastTick = Date.now();
        const { bitmap } = event.data;
        if (bitmap != null) {
          ctxBitmap.transferFromImageBitmap(bitmap);
        }
      });
      // watchdog
      const watchdog = setInterval(() => {
        if (Date.now() - lastTick > 1000) {
          worker.terminate();
          clearInterval(watchdog);
        }
      }, 1000);
    };
    self.addEventListener('message', async (event) => {
      const {wasm} = event.data;
      if (wasm != null) {
        start(wasm);
      }
    });
    const vscode = acquireVsCodeApi();
    vscode.postMessage({});
    document.addEventListener('keydown', (event) => {
      if (event.code == 'Space') {
        lastWorker.postMessage(0);
      } else if (event.code == 'ArrowUp') {
        lastWorker.postMessage(1);
      } else if (event.code == 'ArrowRight') {
        lastWorker.postMessage(2);
      } else if (event.code == 'ArrowDown') {
        lastWorker.postMessage(3);
      } else if (event.code == 'ArrowLeft') {
        lastWorker.postMessage(4);
      }
    });
  <\/script>
</body>
</html>`,A.onDidDispose(()=>{r===A&&(r=null)}),A.webview.onDidReceiveMessage(()=>{t!=null&&A.webview.postMessage({wasm:t})}),r=A}r.reveal(),Ue.commands.executeCommand("workbench.action.lockEditorGroup")};n.subscriptions.push(Ue.commands.registerCommand("extension.my-ext.open-preview",()=>{i()})),i(),n.subscriptions.push(Ol),Ol.initFolder();let s=Ue.Uri.joinPath(n.extensionUri,"lib/lsp-server.js").toString(!0),o=new Worker(s),u=new MessageChannel;o.postMessage({builtinPkgs:Il},[u.port2]),xg(u.port1);let p=new Ss.LanguageClient(Pl,yg,{documentSelector:[{language:Pl}],synchronize:{fileEvents:[Ue.workspace.createFileSystemWatcher("{**/target/check/**/*.mi,**/moon.pkg,**/moon.mod}")]}},o);n.subscriptions.push(p);let h=Ue.workspace.createFileSystemWatcher("**/*.mbt");n.subscriptions.push(h);let C=Ll(async()=>{let A=Ue.workspace.workspaceFolders?.[0];if(A==null)return;let B=await Ue.workspace.fs.readDirectory(A.uri),_=[];for(let[M,U]of B)U===Ue.FileType.File&&M.endsWith(".mbt")&&_.push(Ue.Uri.joinPath(A.uri,M).toString(!1));if(r!=null)try{let{wat:M}=await p.sendRequest("compile",{files:_}),{wasm:U}=await p.sendRequest("watToWasm",{wat:M});t=U,r.webview.postMessage({wasm:U})}catch(M){console.error(M)}},100);h.onDidCreate(C),h.onDidChange(C),n.subscriptions.push(Ue.commands.registerCommand("extension.moonbit.packageAddImport",async(A,B,_)=>{let M=Ue.Uri.parse(A),U=async()=>{let te=Ue.workspace.textDocuments.find(re=>re.uri.toString(!0)===M.toString(!0));if(te!=null)return te.getText();let de=await Ue.workspace.fs.readFile(M);return new TextDecoder().decode(de)},Y=async te=>{let de=Ue.workspace.textDocuments.find(re=>re.uri.toString(!0)===M.toString(!0));if(de!=null){let re=new Ue.WorkspaceEdit;re.set(M,[new Ue.TextEdit(new Ue.Range(de.positionAt(0),de.positionAt(de.getText().length)),te)]),await Ue.workspace.applyEdit(re);return}await Ue.workspace.fs.writeFile(M,new TextEncoder().encode(te))},le=await U(),ie=jg.default.parse(le);if(ie.imports.findIndex(te=>te.path===B&&te.alias===_)!==-1)return;ie.imports.push({path:B,alias:_});let ye=Rg(ie);await Y(ye),p.sendNotification(new Ss.NotificationType("moonbit/moonpkg-did-update"),{pkgFileUri:A})}));let T=new Map;for(let A of Il)for(let{filename:B,content:_}of A.sources)T.set(`${A.name}/${B}`,_);n.subscriptions.push(Ue.workspace.registerTextDocumentContentProvider(vg,{provideTextDocumentContent(A){let B=A.path.slice(1);if(T.has(B))return T.get(B)}})),await p.start()}return Xg(V_);})();
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
